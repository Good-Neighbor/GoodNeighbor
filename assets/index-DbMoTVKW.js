(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function uE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var km={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function t2(){if(a0)return Yl;a0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Yl.Fragment=e,Yl.jsx=t,Yl.jsxs=t,Yl}var o0;function n2(){return o0||(o0=1,km.exports=t2()),km.exports}var E=n2(),Mm={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function i2(){if(l0)return Ve;l0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=_&&U[_]||U["@@iterator"],typeof U=="function"?U:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,V={};function j(U,Q,J){this.props=U,this.context=Q,this.refs=V,this.updater=J||A}j.prototype.isReactComponent={},j.prototype.setState=function(U,Q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Q,"setState")},j.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function B(){}B.prototype=j.prototype;function H(U,Q,J){this.props=U,this.context=Q,this.refs=V,this.updater=J||A}var F=H.prototype=new B;F.constructor=H,C(F,j.prototype),F.isPureReactComponent=!0;var q=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function M(U,Q,J,te,oe,K){return J=K.ref,{$$typeof:i,type:U,key:Q,ref:J!==void 0?J:null,props:K}}function w(U,Q){return M(U.type,Q,void 0,void 0,void 0,U.props)}function b(U){return typeof U=="object"&&U!==null&&U.$$typeof===i}function I(U){var Q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(J){return Q[J]})}var D=/\/+/g;function k(U,Q){return typeof U=="object"&&U!==null&&U.key!=null?I(""+U.key):Q.toString(36)}function x(){}function Y(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(x,x):(U.status="pending",U.then(function(Q){U.status==="pending"&&(U.status="fulfilled",U.value=Q)},function(Q){U.status==="pending"&&(U.status="rejected",U.reason=Q)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function ne(U,Q,J,te,oe){var K=typeof U;(K==="undefined"||K==="boolean")&&(U=null);var de=!1;if(U===null)de=!0;else switch(K){case"bigint":case"string":case"number":de=!0;break;case"object":switch(U.$$typeof){case i:case e:de=!0;break;case y:return de=U._init,ne(de(U._payload),Q,J,te,oe)}}if(de)return oe=oe(U),de=te===""?"."+k(U,0):te,q(oe)?(J="",de!=null&&(J=de.replace(D,"$&/")+"/"),ne(oe,Q,J,"",function(Re){return Re})):oe!=null&&(b(oe)&&(oe=w(oe,J+(oe.key==null||U&&U.key===oe.key?"":(""+oe.key).replace(D,"$&/")+"/")+de)),Q.push(oe)),1;de=0;var Te=te===""?".":te+":";if(q(U))for(var be=0;be<U.length;be++)te=U[be],K=Te+k(te,be),de+=ne(te,Q,J,K,oe);else if(be=v(U),typeof be=="function")for(U=be.call(U),be=0;!(te=U.next()).done;)te=te.value,K=Te+k(te,be++),de+=ne(te,Q,J,K,oe);else if(K==="object"){if(typeof U.then=="function")return ne(Y(U),Q,J,te,oe);throw Q=String(U),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return de}function N(U,Q,J){if(U==null)return U;var te=[],oe=0;return ne(U,te,"","",function(K){return Q.call(J,K,oe++)}),te}function O(U){if(U._status===-1){var Q=U._result;Q=Q(),Q.then(function(J){(U._status===0||U._status===-1)&&(U._status=1,U._result=J)},function(J){(U._status===0||U._status===-1)&&(U._status=2,U._result=J)}),U._status===-1&&(U._status=0,U._result=Q)}if(U._status===1)return U._result.default;throw U._result}var ie=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Z(){}return Ve.Children={map:N,forEach:function(U,Q,J){N(U,function(){Q.apply(this,arguments)},J)},count:function(U){var Q=0;return N(U,function(){Q++}),Q},toArray:function(U){return N(U,function(Q){return Q})||[]},only:function(U){if(!b(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ve.Component=j,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=H,Ve.StrictMode=s,Ve.Suspense=m,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(U){return $.H.useMemoCache(U)}},Ve.cache=function(U){return function(){return U.apply(null,arguments)}},Ve.cloneElement=function(U,Q,J){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var te=C({},U.props),oe=U.key,K=void 0;if(Q!=null)for(de in Q.ref!==void 0&&(K=void 0),Q.key!==void 0&&(oe=""+Q.key),Q)!z.call(Q,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Q.ref===void 0||(te[de]=Q[de]);var de=arguments.length-2;if(de===1)te.children=J;else if(1<de){for(var Te=Array(de),be=0;be<de;be++)Te[be]=arguments[be+2];te.children=Te}return M(U.type,oe,void 0,void 0,K,te)},Ve.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},Ve.createElement=function(U,Q,J){var te,oe={},K=null;if(Q!=null)for(te in Q.key!==void 0&&(K=""+Q.key),Q)z.call(Q,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(oe[te]=Q[te]);var de=arguments.length-2;if(de===1)oe.children=J;else if(1<de){for(var Te=Array(de),be=0;be<de;be++)Te[be]=arguments[be+2];oe.children=Te}if(U&&U.defaultProps)for(te in de=U.defaultProps,de)oe[te]===void 0&&(oe[te]=de[te]);return M(U,K,void 0,void 0,null,oe)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(U){return{$$typeof:f,render:U}},Ve.isValidElement=b,Ve.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:O}},Ve.memo=function(U,Q){return{$$typeof:p,type:U,compare:Q===void 0?null:Q}},Ve.startTransition=function(U){var Q=$.T,J={};$.T=J;try{var te=U(),oe=$.S;oe!==null&&oe(J,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(Z,ie)}catch(K){ie(K)}finally{$.T=Q}},Ve.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Ve.use=function(U){return $.H.use(U)},Ve.useActionState=function(U,Q,J){return $.H.useActionState(U,Q,J)},Ve.useCallback=function(U,Q){return $.H.useCallback(U,Q)},Ve.useContext=function(U){return $.H.useContext(U)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(U,Q){return $.H.useDeferredValue(U,Q)},Ve.useEffect=function(U,Q,J){var te=$.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(U,Q)},Ve.useId=function(){return $.H.useId()},Ve.useImperativeHandle=function(U,Q,J){return $.H.useImperativeHandle(U,Q,J)},Ve.useInsertionEffect=function(U,Q){return $.H.useInsertionEffect(U,Q)},Ve.useLayoutEffect=function(U,Q){return $.H.useLayoutEffect(U,Q)},Ve.useMemo=function(U,Q){return $.H.useMemo(U,Q)},Ve.useOptimistic=function(U,Q){return $.H.useOptimistic(U,Q)},Ve.useReducer=function(U,Q,J){return $.H.useReducer(U,Q,J)},Ve.useRef=function(U){return $.H.useRef(U)},Ve.useState=function(U){return $.H.useState(U)},Ve.useSyncExternalStore=function(U,Q,J){return $.H.useSyncExternalStore(U,Q,J)},Ve.useTransition=function(){return $.H.useTransition()},Ve.version="19.1.0",Ve}var u0;function Op(){return u0||(u0=1,Mm.exports=i2()),Mm.exports}var W=Op();const r2=uE(W);var Pm={exports:{}},Xl={},Vm={exports:{}},Um={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function s2(){return c0||(c0=1,function(i){function e(N,O){var ie=N.length;N.push(O);e:for(;0<ie;){var Z=ie-1>>>1,U=N[Z];if(0<a(U,O))N[Z]=O,N[ie]=U,ie=Z;else break e}}function t(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var O=N[0],ie=N.pop();if(ie!==O){N[0]=ie;e:for(var Z=0,U=N.length,Q=U>>>1;Z<Q;){var J=2*(Z+1)-1,te=N[J],oe=J+1,K=N[oe];if(0>a(te,ie))oe<U&&0>a(K,te)?(N[Z]=K,N[oe]=ie,Z=oe):(N[Z]=te,N[J]=ie,Z=J);else if(oe<U&&0>a(K,ie))N[Z]=K,N[oe]=ie,Z=oe;else break e}}return O}function a(N,O){var ie=N.sortIndex-O.sortIndex;return ie!==0?ie:N.id-O.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var m=[],p=[],y=1,_=null,v=3,A=!1,C=!1,V=!1,j=!1,B=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function q(N){for(var O=t(p);O!==null;){if(O.callback===null)s(p);else if(O.startTime<=N)s(p),O.sortIndex=O.expirationTime,e(m,O);else break;O=t(p)}}function $(N){if(V=!1,q(N),!C)if(t(m)!==null)C=!0,z||(z=!0,k());else{var O=t(p);O!==null&&ne($,O.startTime-N)}}var z=!1,M=-1,w=5,b=-1;function I(){return j?!0:!(i.unstable_now()-b<w)}function D(){if(j=!1,z){var N=i.unstable_now();b=N;var O=!0;try{e:{C=!1,V&&(V=!1,H(M),M=-1),A=!0;var ie=v;try{t:{for(q(N),_=t(m);_!==null&&!(_.expirationTime>N&&I());){var Z=_.callback;if(typeof Z=="function"){_.callback=null,v=_.priorityLevel;var U=Z(_.expirationTime<=N);if(N=i.unstable_now(),typeof U=="function"){_.callback=U,q(N),O=!0;break t}_===t(m)&&s(m),q(N)}else s(m);_=t(m)}if(_!==null)O=!0;else{var Q=t(p);Q!==null&&ne($,Q.startTime-N),O=!1}}break e}finally{_=null,v=ie,A=!1}O=void 0}}finally{O?k():z=!1}}}var k;if(typeof F=="function")k=function(){F(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Y=x.port2;x.port1.onmessage=D,k=function(){Y.postMessage(null)}}else k=function(){B(D,0)};function ne(N,O){M=B(function(){N(i.unstable_now())},O)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(N){N.callback=null},i.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<N?Math.floor(1e3/N):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(N){switch(v){case 1:case 2:case 3:var O=3;break;default:O=v}var ie=v;v=O;try{return N()}finally{v=ie}},i.unstable_requestPaint=function(){j=!0},i.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var ie=v;v=N;try{return O()}finally{v=ie}},i.unstable_scheduleCallback=function(N,O,ie){var Z=i.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Z+ie:Z):ie=Z,N){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ie+U,N={id:y++,callback:O,priorityLevel:N,startTime:ie,expirationTime:U,sortIndex:-1},ie>Z?(N.sortIndex=ie,e(p,N),t(m)===null&&N===t(p)&&(V?(H(M),M=-1):V=!0,ne($,ie-Z))):(N.sortIndex=U,e(m,N),C||A||(C=!0,z||(z=!0,k()))),N},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(N){var O=v;return function(){var ie=v;v=O;try{return N.apply(this,arguments)}finally{v=ie}}}}(Um)),Um}var h0;function a2(){return h0||(h0=1,Vm.exports=s2()),Vm.exports}var Lm={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function o2(){if(f0)return kn;f0=1;var i=Op();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:m,containerInfo:p,implementation:y}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,kn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},kn.flushSync=function(m){var p=c.T,y=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=p,s.p=y,s.d.f()}},kn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},kn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},kn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:v,fetchPriority:A}):y==="script"&&s.d.X(m,{crossOrigin:_,integrity:v,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},kn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},kn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin);s.d.L(m,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},kn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},kn.requestFormReset=function(m){s.d.r(m)},kn.unstable_batchedUpdates=function(m,p){return m(p)},kn.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},kn.useFormStatus=function(){return c.H.useHostTransitionStatus()},kn.version="19.1.0",kn}var d0;function l2(){if(d0)return Lm.exports;d0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Lm.exports=o2(),Lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function u2(){if(m0)return Xl;m0=1;var i=a2(),e=Op(),t=l2();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(s(188))}function m(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(s(188));return r!==n?null:n}for(var o=n,u=r;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return f(d),n;if(g===u)return f(d),r;g=g.sibling}throw Error(s(188))}if(o.return!==u.return)o=d,u=g;else{for(var R=!1,P=d.child;P;){if(P===o){R=!0,o=d,u=g;break}if(P===u){R=!0,u=d,o=g;break}P=P.sibling}if(!R){for(P=g.child;P;){if(P===o){R=!0,o=g,u=d;break}if(P===u){R=!0,u=g,o=d;break}P=P.sibling}if(!R)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:r}function p(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=p(n),r!==null)return r;n=n.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),F=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function Y(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case j:return"Profiler";case V:return"StrictMode";case $:return"Suspense";case z:return"SuspenseList";case b:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case F:return(n.displayName||"Context")+".Provider";case H:return(n._context.displayName||"Context")+".Consumer";case q:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case M:return r=n.displayName||null,r!==null?r:Y(n.type)||"Memo";case w:r=n._payload,n=n._init;try{return Y(n(r))}catch{}}return null}var ne=Array.isArray,N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Z=[],U=-1;function Q(n){return{current:n}}function J(n){0>U||(n.current=Z[U],Z[U]=null,U--)}function te(n,r){U++,Z[U]=n.current,n.current=r}var oe=Q(null),K=Q(null),de=Q(null),Te=Q(null);function be(n,r){switch(te(de,r),te(K,n),te(oe,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?M_(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=M_(r),n=P_(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(oe),te(oe,n)}function Re(){J(oe),J(K),J(de)}function ze(n){n.memoizedState!==null&&te(Te,n);var r=oe.current,o=P_(r,n.type);r!==o&&(te(K,n),te(oe,o))}function Le(n){K.current===n&&(J(oe),J(K)),Te.current===n&&(J(Te),Hl._currentValue=ie)}var rt=Object.prototype.hasOwnProperty,en=i.unstable_scheduleCallback,qt=i.unstable_cancelCallback,ot=i.unstable_shouldYield,Pt=i.unstable_requestPaint,Ue=i.unstable_now,ut=i.unstable_getCurrentPriorityLevel,Tt=i.unstable_ImmediatePriority,Ct=i.unstable_UserBlockingPriority,Ze=i.unstable_NormalPriority,tn=i.unstable_LowPriority,ht=i.unstable_IdlePriority,st=i.log,Qt=i.unstable_setDisableYieldValue,Ke=null,qe=null;function at(n){if(typeof st=="function"&&Qt(n),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Ke,n)}catch{}}var St=Math.clz32?Math.clz32:Ut,Dt=Math.log,Vt=Math.LN2;function Ut(n){return n>>>=0,n===0?32:31-(Dt(n)/Vt|0)|0}var nn=256,he=4194304;function Me(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ge(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,g=n.suspendedLanes,R=n.pingedLanes;n=n.warmLanes;var P=u&134217727;return P!==0?(u=P&~g,u!==0?d=Me(u):(R&=P,R!==0?d=Me(R):o||(o=P&~n,o!==0&&(d=Me(o))))):(P=u&~g,P!==0?d=Me(P):R!==0?d=Me(R):o||(o=u&~n,o!==0&&(d=Me(o)))),d===0?0:r!==0&&r!==d&&(r&g)===0&&(g=d&-d,o=r&-r,g>=o||g===32&&(o&4194048)!==0)?r:d}function Fe(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Ye(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var n=nn;return nn<<=1,(nn&4194048)===0&&(nn=256),n}function dt(){var n=he;return he<<=1,(he&62914560)===0&&(he=4194304),n}function hn(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Ot(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Gn(n,r,o,u,d,g){var R=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var P=n.entanglements,G=n.expirationTimes,ae=n.hiddenUpdates;for(o=R&~o;0<o;){var fe=31-St(o),ge=1<<fe;P[fe]=0,G[fe]=-1;var le=ae[fe];if(le!==null)for(ae[fe]=null,fe=0;fe<le.length;fe++){var ue=le[fe];ue!==null&&(ue.lane&=-536870913)}o&=~ge}u!==0&&_n(n,u,0),g!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=g&~(R&~r))}function _n(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-St(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function bi(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-St(o),d=1<<u;d&r|n[u]&r&&(n[u]|=r),o&=~d}}function Ai(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function $n(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Dn(){var n=O.p;return n!==0?n:(n=window.event,n===void 0?32:e0(n.type))}function Fu(n,r){var o=O.p;try{return O.p=n,r()}finally{O.p=o}}var It=Math.random().toString(36).slice(2),rn="__reactFiber$"+It,Kt="__reactProps$"+It,ci="__reactContainer$"+It,Yo="__reactEvents$"+It,Vf="__reactListeners$"+It,Gr="__reactHandles$"+It,Hu="__reactResources$"+It,Bs="__reactMarker$"+It;function $r(n){delete n[rn],delete n[Kt],delete n[Yo],delete n[Vf],delete n[Gr]}function ur(n){var r=n[rn];if(r)return r;for(var o=n.parentNode;o;){if(r=o[ci]||o[rn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=j_(n);n!==null;){if(o=n[rn])return o;n=j_(n)}return r}n=o,o=n.parentNode}return null}function Pi(n){if(n=n[rn]||n[ci]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Vi(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function Ln(n){var r=n[Hu];return r||(r=n[Hu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ft(n){n[Bs]=!0}var Xo=new Set,Pa={};function Si(n,r){cr(n,r),cr(n+"Capture",r)}function cr(n,r){for(Pa[n]=r,n=0;n<r.length;n++)Xo.add(r[n])}var Gu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$u={},zs={};function Qu(n){return rt.call(zs,n)?!0:rt.call($u,n)?!1:Gu.test(n)?zs[n]=!0:($u[n]=!0,!1)}function Qr(n,r,o){if(Qu(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function Ui(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function En(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}var qs,Ku;function hr(n){if(qs===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);qs=r&&r[1]||"",Ku=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qs+n+Ku}var Va=!1;function Ua(n,r){if(!n||Va)return"";Va=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ue){var le=ue}Reflect.construct(n,[],ge)}else{try{ge.call()}catch(ue){le=ue}n.call(ge.prototype)}}else{try{throw Error()}catch(ue){le=ue}(ge=n())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ue){if(ue&&le&&typeof ue.stack=="string")return[ue.stack,le.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),R=g[0],P=g[1];if(R&&P){var G=R.split(`
`),ae=P.split(`
`);for(d=u=0;u<G.length&&!G[u].includes("DetermineComponentFrameRoot");)u++;for(;d<ae.length&&!ae[d].includes("DetermineComponentFrameRoot");)d++;if(u===G.length||d===ae.length)for(u=G.length-1,d=ae.length-1;1<=u&&0<=d&&G[u]!==ae[d];)d--;for(;1<=u&&0<=d;u--,d--)if(G[u]!==ae[d]){if(u!==1||d!==1)do if(u--,d--,0>d||G[u]!==ae[d]){var fe=`
`+G[u].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=u&&0<=d);break}}}finally{Va=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?hr(o):""}function Wo(n){switch(n.tag){case 26:case 27:case 5:return hr(n.type);case 16:return hr("Lazy");case 13:return hr("Suspense");case 19:return hr("SuspenseList");case 0:case 15:return Ua(n.type,!1);case 11:return Ua(n.type.render,!1);case 1:return Ua(n.type,!0);case 31:return hr("Activity");default:return""}}function La(n){try{var r="";do r+=Wo(n),n=n.return;while(n);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function jn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Zo(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Uf(n){var r=Zo(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),u=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,g=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(R){u=""+R,g.call(this,R)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(R){u=""+R},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function ja(n){n._valueTracker||(n._valueTracker=Uf(n))}function Jo(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=Zo(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function Fs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Lf=/[\n"\\]/g;function Yt(n){return n.replace(Lf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Zn(n,r,o,u,d,g,R,P){n.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?n.type=R:n.removeAttribute("type"),r!=null?R==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+jn(r)):n.value!==""+jn(r)&&(n.value=""+jn(r)):R!=="submit"&&R!=="reset"||n.removeAttribute("value"),r!=null?Kr(n,R,jn(r)):o!=null?Kr(n,R,jn(o)):u!=null&&n.removeAttribute("value"),d==null&&g!=null&&(n.defaultChecked=!!g),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?n.name=""+jn(P):n.removeAttribute("name")}function Hs(n,r,o,u,d,g,R,P){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;o=o!=null?""+jn(o):"",r=r!=null?""+jn(r):o,P||r===n.value||(n.value=r),n.defaultValue=r}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=P?n.checked:!!u,n.defaultChecked=!!u,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(n.name=R)}function Kr(n,r,o){r==="number"&&Fs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function fr(n,r,o,u){if(n=n.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=r.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+jn(o),r=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function gt(n,r,o){if(r!=null&&(r=""+jn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+jn(o):""}function Gs(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(ne(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=jn(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function hi(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var $s=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yu(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||$s.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function el(n,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in r)u=r[d],r.hasOwnProperty(d)&&o[d]!==u&&Yu(n,d,u)}else for(var g in r)r.hasOwnProperty(g)&&Yu(n,g,r[g])}function tl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(n){return Bf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var dr=null;function fi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mr=null,pr=null;function nl(n){var r=Pi(n);if(r&&(n=r.stateNode)){var o=n[Kt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Zn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Yt(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var d=u[Kt]||null;if(!d)throw Error(s(90));Zn(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&Jo(u)}break e;case"textarea":gt(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&fr(n,!!o.multiple,r,!1)}}}var Li=!1;function Xu(n,r,o){if(Li)return n(r,o);Li=!0;try{var u=n(r);return u}finally{if(Li=!1,(mr!==null||pr!==null)&&(Fc(),mr&&(r=mr,n=pr,pr=mr=null,nl(r),n)))for(r=0;r<n.length;r++)nl(n[r])}}function Qs(n,r){var o=n.stateNode;if(o===null)return null;var u=o[Kt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),di=!1;if(Ri)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){di=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{di=!1}var ji=null,Yr=null,gr=null;function il(){if(gr)return gr;var n,r=Yr,o=r.length,u,d="value"in ji?ji.value:ji.textContent,g=d.length;for(n=0;n<o&&r[n]===d[n];n++);var R=o-n;for(u=1;u<=R&&r[o-u]===d[g-u];u++);return gr=d.slice(n,1<u?1-u:void 0)}function Bi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function zi(){return!0}function rl(){return!1}function fn(n){function r(o,u,d,g,R){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=g,this.target=R,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(o=n[P],this[P]=o?o(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?zi:rl,this.isPropagationStopped=rl,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),r}var ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=fn(ft),Ys=y({},ft,{view:0,detail:0}),Wu=fn(Ys),qa,Fa,qi,Xs=y({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Js,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qi&&(qi&&n.type==="mousemove"?(qa=n.screenX-qi.screenX,Fa=n.screenY-qi.screenY):Fa=qa=0,qi=n),qa)},movementY:function(n){return"movementY"in n?n.movementY:Fa}}),mi=fn(Xs),Zu=y({},Xs,{dataTransfer:0}),zf=fn(Zu),Ws=y({},Ys,{relatedTarget:0}),Ha=fn(Ws),sl=y({},ft,{animationName:0,elapsedTime:0,pseudoElement:0}),Ga=fn(sl),Ju=y({},ft,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$a=fn(Ju),qf=y({},ft,{data:0}),al=fn(qf),Zs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=tc[n])?!!r[n]:!1}function Js(){return ol}var nc=y({},Ys,{key:function(n){if(n.key){var r=Zs[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Bi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ec[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Js,charCode:function(n){return n.type==="keypress"?Bi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qa=fn(nc),ic=y({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=fn(ic),yr=y({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Js}),rc=fn(yr),sc=y({},ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),ac=fn(sc),oc=y({},Xs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=fn(oc),Bn=y({},ft,{newState:0,oldState:0}),lc=fn(Bn),uc=[9,13,27,32],Fi=Ri&&"CompositionEvent"in window,h=null;Ri&&"documentMode"in document&&(h=document.documentMode);var T=Ri&&"TextEvent"in window&&!h,S=Ri&&(!Fi||h&&8<h&&11>=h),L=" ",re=!1;function ce(n,r){switch(n){case"keyup":return uc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ve(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Je=!1;function sn(n,r){switch(n){case"compositionend":return ve(r);case"keypress":return r.which!==32?null:(re=!0,L);case"textInput":return n=r.data,n===L&&re?null:n;default:return null}}function et(n,r){if(Je)return n==="compositionend"||!Fi&&ce(n,r)?(n=il(),gr=Yr=ji=null,Je=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return S&&r.locale!=="ko"?null:r.data;default:return null}}var dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function an(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!dn[n.type]:r==="textarea"}function vr(n,r,o,u){mr?pr?pr.push(u):pr=[u]:mr=u,r=Yc(r,"onChange"),0<r.length&&(o=new za("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var Tn=null,Hi=null;function ul(n){x_(n,0)}function cc(n){var r=Vi(n);if(Jo(r))return n}function Xg(n,r){if(n==="change")return r}var Wg=!1;if(Ri){var Ff;if(Ri){var Hf="oninput"in document;if(!Hf){var Zg=document.createElement("div");Zg.setAttribute("oninput","return;"),Hf=typeof Zg.oninput=="function"}Ff=Hf}else Ff=!1;Wg=Ff&&(!document.documentMode||9<document.documentMode)}function Jg(){Tn&&(Tn.detachEvent("onpropertychange",ey),Hi=Tn=null)}function ey(n){if(n.propertyName==="value"&&cc(Hi)){var r=[];vr(r,Hi,n,fi(n)),Xu(ul,r)}}function Db(n,r,o){n==="focusin"?(Jg(),Tn=r,Hi=o,Tn.attachEvent("onpropertychange",ey)):n==="focusout"&&Jg()}function Ob(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cc(Hi)}function kb(n,r){if(n==="click")return cc(r)}function Mb(n,r){if(n==="input"||n==="change")return cc(r)}function Pb(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Jn=typeof Object.is=="function"?Object.is:Pb;function cl(n,r){if(Jn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!rt.call(r,d)||!Jn(n[d],r[d]))return!1}return!0}function ty(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ny(n,r){var o=ty(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ty(o)}}function iy(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?iy(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function ry(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Fs(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Fs(n.document)}return r}function Gf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Vb=Ri&&"documentMode"in document&&11>=document.documentMode,Ya=null,$f=null,hl=null,Qf=!1;function sy(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Qf||Ya==null||Ya!==Fs(u)||(u=Ya,"selectionStart"in u&&Gf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),hl&&cl(hl,u)||(hl=u,u=Yc($f,"onSelect"),0<u.length&&(r=new za("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Ya)))}function ea(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Xa={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionrun:ea("Transition","TransitionRun"),transitionstart:ea("Transition","TransitionStart"),transitioncancel:ea("Transition","TransitionCancel"),transitionend:ea("Transition","TransitionEnd")},Kf={},ay={};Ri&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function ta(n){if(Kf[n])return Kf[n];if(!Xa[n])return n;var r=Xa[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in ay)return Kf[n]=r[o];return n}var oy=ta("animationend"),ly=ta("animationiteration"),uy=ta("animationstart"),Ub=ta("transitionrun"),Lb=ta("transitionstart"),jb=ta("transitioncancel"),cy=ta("transitionend"),hy=new Map,Yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yf.push("scrollEnd");function Ci(n,r){hy.set(n,r),Si(r,[n])}var fy=new WeakMap;function pi(n,r){if(typeof n=="object"&&n!==null){var o=fy.get(n);return o!==void 0?o:(r={value:n,source:r,stack:La(r)},fy.set(n,r),r)}return{value:n,source:r,stack:La(r)}}var gi=[],Wa=0,Xf=0;function hc(){for(var n=Wa,r=Xf=Wa=0;r<n;){var o=gi[r];gi[r++]=null;var u=gi[r];gi[r++]=null;var d=gi[r];gi[r++]=null;var g=gi[r];if(gi[r++]=null,u!==null&&d!==null){var R=u.pending;R===null?d.next=d:(d.next=R.next,R.next=d),u.pending=d}g!==0&&dy(o,d,g)}}function fc(n,r,o,u){gi[Wa++]=n,gi[Wa++]=r,gi[Wa++]=o,gi[Wa++]=u,Xf|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Wf(n,r,o,u){return fc(n,r,o,u),dc(n)}function Za(n,r){return fc(n,null,null,r),dc(n)}function dy(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(d=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,d&&r!==null&&(d=31-St(o),n=g.hiddenUpdates,u=n[d],u===null?n[d]=[r]:u.push(r),r.lane=o|536870912),g):null}function dc(n){if(50<Vl)throw Vl=0,im=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Ja={};function Bb(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(n,r,o,u){return new Bb(n,r,o,u)}function Zf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _r(n,r){var o=n.alternate;return o===null?(o=ei(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function my(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function mc(n,r,o,u,d,g){var R=0;if(u=n,typeof n=="function")Zf(n)&&(R=1);else if(typeof n=="string")R=qA(n,o,oe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case b:return n=ei(31,o,r,d),n.elementType=b,n.lanes=g,n;case C:return na(o.children,d,g,r);case V:R=8,d|=24;break;case j:return n=ei(12,o,r,d|2),n.elementType=j,n.lanes=g,n;case $:return n=ei(13,o,r,d),n.elementType=$,n.lanes=g,n;case z:return n=ei(19,o,r,d),n.elementType=z,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:case F:R=10;break e;case H:R=9;break e;case q:R=11;break e;case M:R=14;break e;case w:R=16,u=null;break e}R=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return r=ei(R,o,r,d),r.elementType=n,r.type=u,r.lanes=g,r}function na(n,r,o,u){return n=ei(7,n,u,r),n.lanes=o,n}function Jf(n,r,o){return n=ei(6,n,null,r),n.lanes=o,n}function ed(n,r,o){return r=ei(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var eo=[],to=0,pc=null,gc=0,yi=[],vi=0,ia=null,Er=1,Tr="";function ra(n,r){eo[to++]=gc,eo[to++]=pc,pc=n,gc=r}function py(n,r,o){yi[vi++]=Er,yi[vi++]=Tr,yi[vi++]=ia,ia=n;var u=Er;n=Tr;var d=32-St(u)-1;u&=~(1<<d),o+=1;var g=32-St(r)+d;if(30<g){var R=d-d%5;g=(u&(1<<R)-1).toString(32),u>>=R,d-=R,Er=1<<32-St(r)+d|o<<d|u,Tr=g+n}else Er=1<<g|o<<d|u,Tr=n}function td(n){n.return!==null&&(ra(n,1),py(n,1,0))}function nd(n){for(;n===pc;)pc=eo[--to],eo[to]=null,gc=eo[--to],eo[to]=null;for(;n===ia;)ia=yi[--vi],yi[vi]=null,Tr=yi[--vi],yi[vi]=null,Er=yi[--vi],yi[vi]=null}var zn=null,Lt=null,ct=!1,sa=null,Gi=!1,id=Error(s(519));function aa(n){var r=Error(s(418,""));throw ml(pi(r,n)),id}function gy(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[rn]=n,r[Kt]=u,o){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(o=0;o<Ll.length;o++)Qe(Ll[o],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Qe("invalid",r),Hs(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ja(r);break;case"select":Qe("invalid",r);break;case"textarea":Qe("invalid",r),Gs(r,u.value,u.defaultValue,u.children),ja(r)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||k_(r.textContent,o)?(u.popover!=null&&(Qe("beforetoggle",r),Qe("toggle",r)),u.onScroll!=null&&Qe("scroll",r),u.onScrollEnd!=null&&Qe("scrollend",r),u.onClick!=null&&(r.onclick=Xc),r=!0):r=!1,r||aa(n)}function yy(n){for(zn=n.return;zn;)switch(zn.tag){case 5:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:zn=zn.return}}function fl(n){if(n!==zn)return!1;if(!ct)return yy(n),ct=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||_m(n.type,n.memoizedProps)),o=!o),o&&Lt&&aa(n),yy(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(r===0){Lt=xi(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;n=n.nextSibling}Lt=null}}else r===27?(r=Lt,hs(n.type)?(n=bm,bm=null,Lt=n):Lt=r):Lt=zn?xi(n.stateNode.nextSibling):null;return!0}function dl(){Lt=zn=null,ct=!1}function vy(){var n=sa;return n!==null&&(Yn===null?Yn=n:Yn.push.apply(Yn,n),sa=null),n}function ml(n){sa===null?sa=[n]:sa.push(n)}var rd=Q(null),oa=null,wr=null;function Xr(n,r,o){te(rd,r._currentValue),r._currentValue=o}function br(n){n._currentValue=rd.current,J(rd)}function sd(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function ad(n,r,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var g=d.dependencies;if(g!==null){var R=d.child;g=g.firstContext;e:for(;g!==null;){var P=g;g=d;for(var G=0;G<r.length;G++)if(P.context===r[G]){g.lanes|=o,P=g.alternate,P!==null&&(P.lanes|=o),sd(g.return,o,n),u||(R=null);break e}g=P.next}}else if(d.tag===18){if(R=d.return,R===null)throw Error(s(341));R.lanes|=o,g=R.alternate,g!==null&&(g.lanes|=o),sd(R,o,n),R=null}else R=d.child;if(R!==null)R.return=d;else for(R=d;R!==null;){if(R===n){R=null;break}if(d=R.sibling,d!==null){d.return=R.return,R=d;break}R=R.return}d=R}}function pl(n,r,o,u){n=null;for(var d=r,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var R=d.alternate;if(R===null)throw Error(s(387));if(R=R.memoizedProps,R!==null){var P=d.type;Jn(d.pendingProps.value,R.value)||(n!==null?n.push(P):n=[P])}}else if(d===Te.current){if(R=d.alternate,R===null)throw Error(s(387));R.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Hl):n=[Hl])}d=d.return}n!==null&&ad(r,n,o,u),r.flags|=262144}function yc(n){for(n=n.firstContext;n!==null;){if(!Jn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function la(n){oa=n,wr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function On(n){return _y(oa,n)}function vc(n,r){return oa===null&&la(n),_y(n,r)}function _y(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},wr===null){if(n===null)throw Error(s(308));wr=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else wr=wr.next=r;return o}var zb=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},qb=i.unstable_scheduleCallback,Fb=i.unstable_NormalPriority,on={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function od(){return{controller:new zb,data:new Map,refCount:0}}function gl(n){n.refCount--,n.refCount===0&&qb(Fb,function(){n.controller.abort()})}var yl=null,ld=0,no=0,io=null;function Hb(n,r){if(yl===null){var o=yl=[];ld=0,no=cm(),io={status:"pending",value:void 0,then:function(u){o.push(u)}}}return ld++,r.then(Ey,Ey),r}function Ey(){if(--ld===0&&yl!==null){io!==null&&(io.status="fulfilled");var n=yl;yl=null,no=0,io=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Gb(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var d=0;d<o.length;d++)(0,o[d])(r)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Ty=N.S;N.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Hb(n,r),Ty!==null&&Ty(n,r)};var ua=Q(null);function ud(){var n=ua.current;return n!==null?n:Rt.pooledCache}function _c(n,r){r===null?te(ua,ua.current):te(ua,r.pool)}function wy(){var n=ud();return n===null?null:{parent:on._currentValue,pool:n}}var vl=Error(s(460)),by=Error(s(474)),Ec=Error(s(542)),cd={then:function(){}};function Ay(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Tc(){}function Sy(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Tc,Tc),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Cy(n),n;default:if(typeof r.status=="string")r.then(Tc,Tc);else{if(n=Rt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=u}},function(u){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Cy(n),n}throw _l=r,vl}}var _l=null;function Ry(){if(_l===null)throw Error(s(459));var n=_l;return _l=null,n}function Cy(n){if(n===vl||n===Ec)throw Error(s(483))}var Wr=!1;function hd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Zr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Jr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(mt&2)!==0){var d=u.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),u.pending=r,r=dc(n),dy(n,null,o),r}return fc(n,u,r,o),dc(n)}function El(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,bi(n,o)}}function dd(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var R={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=R:g=g.next=R,o=o.next}while(o!==null);g===null?d=g=r:g=g.next=r}else d=g=r;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var md=!1;function Tl(){if(md){var n=io;if(n!==null)throw n}}function wl(n,r,o,u){md=!1;var d=n.updateQueue;Wr=!1;var g=d.firstBaseUpdate,R=d.lastBaseUpdate,P=d.shared.pending;if(P!==null){d.shared.pending=null;var G=P,ae=G.next;G.next=null,R===null?g=ae:R.next=ae,R=G;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,P=fe.lastBaseUpdate,P!==R&&(P===null?fe.firstBaseUpdate=ae:P.next=ae,fe.lastBaseUpdate=G))}if(g!==null){var ge=d.baseState;R=0,fe=ae=G=null,P=g;do{var le=P.lane&-536870913,ue=le!==P.lane;if(ue?(tt&le)===le:(u&le)===le){le!==0&&le===no&&(md=!0),fe!==null&&(fe=fe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Oe=n,Ie=P;le=r;var _t=o;switch(Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){ge=Oe.call(_t,ge,le);break e}ge=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,le=typeof Oe=="function"?Oe.call(_t,ge,le):Oe,le==null)break e;ge=y({},ge,le);break e;case 2:Wr=!0}}le=P.callback,le!==null&&(n.flags|=64,ue&&(n.flags|=8192),ue=d.callbacks,ue===null?d.callbacks=[le]:ue.push(le))}else ue={lane:le,tag:P.tag,payload:P.payload,callback:P.callback,next:null},fe===null?(ae=fe=ue,G=ge):fe=fe.next=ue,R|=le;if(P=P.next,P===null){if(P=d.shared.pending,P===null)break;ue=P,P=ue.next,ue.next=null,d.lastBaseUpdate=ue,d.shared.pending=null}}while(!0);fe===null&&(G=ge),d.baseState=G,d.firstBaseUpdate=ae,d.lastBaseUpdate=fe,g===null&&(d.shared.lanes=0),os|=R,n.lanes=R,n.memoizedState=ge}}function Iy(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function xy(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Iy(o[n],r)}var ro=Q(null),wc=Q(0);function Ny(n,r){n=Nr,te(wc,n),te(ro,r),Nr=n|r.baseLanes}function pd(){te(wc,Nr),te(ro,ro.current)}function gd(){Nr=wc.current,J(ro),J(wc)}var es=0,je=null,yt=null,Xt=null,bc=!1,so=!1,ca=!1,Ac=0,bl=0,ao=null,$b=0;function Ht(){throw Error(s(321))}function yd(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Jn(n[o],r[o]))return!1;return!0}function vd(n,r,o,u,d,g){return es=g,je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,N.H=n===null||n.memoizedState===null?dv:mv,ca=!1,g=o(u,d),ca=!1,so&&(g=Oy(r,o,u,d)),Dy(n),g}function Dy(n){N.H=Nc;var r=yt!==null&&yt.next!==null;if(es=0,Xt=yt=je=null,bc=!1,bl=0,ao=null,r)throw Error(s(300));n===null||mn||(n=n.dependencies,n!==null&&yc(n)&&(mn=!0))}function Oy(n,r,o,u){je=n;var d=0;do{if(so&&(ao=null),bl=0,so=!1,25<=d)throw Error(s(301));if(d+=1,Xt=yt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}N.H=Jb,g=r(o,u)}while(so);return g}function Qb(){var n=N.H,r=n.useState()[0];return r=typeof r.then=="function"?Al(r):r,n=n.useState()[0],(yt!==null?yt.memoizedState:null)!==n&&(je.flags|=1024),r}function _d(){var n=Ac!==0;return Ac=0,n}function Ed(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function Td(n){if(bc){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}bc=!1}es=0,Xt=yt=je=null,so=!1,bl=Ac=0,ao=null}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?je.memoizedState=Xt=n:Xt=Xt.next=n,Xt}function Wt(){if(yt===null){var n=je.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var r=Xt===null?je.memoizedState:Xt.next;if(r!==null)Xt=r,yt=n;else{if(n===null)throw je.alternate===null?Error(s(467)):Error(s(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Xt===null?je.memoizedState=Xt=n:Xt=Xt.next=n}return Xt}function wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(n){var r=bl;return bl+=1,ao===null&&(ao=[]),n=Sy(ao,n,r),r=je,(Xt===null?r.memoizedState:Xt.next)===null&&(r=r.alternate,N.H=r===null||r.memoizedState===null?dv:mv),n}function Sc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Al(n);if(n.$$typeof===F)return On(n)}throw Error(s(438,String(n)))}function bd(n){var r=null,o=je.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=je.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=wd(),je.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=I;return r.index++,o}function Ar(n,r){return typeof r=="function"?r(n):r}function Rc(n){var r=Wt();return Ad(r,yt,n)}function Ad(n,r,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var d=n.baseQueue,g=u.pending;if(g!==null){if(d!==null){var R=d.next;d.next=g.next,g.next=R}r.baseQueue=d=g,u.pending=null}if(g=n.baseState,d===null)n.memoizedState=g;else{r=d.next;var P=R=null,G=null,ae=r,fe=!1;do{var ge=ae.lane&-536870913;if(ge!==ae.lane?(tt&ge)===ge:(es&ge)===ge){var le=ae.revertLane;if(le===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),ge===no&&(fe=!0);else if((es&le)===le){ae=ae.next,le===no&&(fe=!0);continue}else ge={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},G===null?(P=G=ge,R=g):G=G.next=ge,je.lanes|=le,os|=le;ge=ae.action,ca&&o(g,ge),g=ae.hasEagerState?ae.eagerState:o(g,ge)}else le={lane:ge,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},G===null?(P=G=le,R=g):G=G.next=le,je.lanes|=ge,os|=ge;ae=ae.next}while(ae!==null&&ae!==r);if(G===null?R=g:G.next=P,!Jn(g,n.memoizedState)&&(mn=!0,fe&&(o=io,o!==null)))throw o;n.memoizedState=g,n.baseState=R,n.baseQueue=G,u.lastRenderedState=g}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Sd(n){var r=Wt(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,g=r.memoizedState;if(d!==null){o.pending=null;var R=d=d.next;do g=n(g,R.action),R=R.next;while(R!==d);Jn(g,r.memoizedState)||(mn=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,u]}function ky(n,r,o){var u=je,d=Wt(),g=ct;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=r();var R=!Jn((yt||d).memoizedState,o);R&&(d.memoizedState=o,mn=!0),d=d.queue;var P=Vy.bind(null,u,d,n);if(Sl(2048,8,P,[n]),d.getSnapshot!==r||R||Xt!==null&&Xt.memoizedState.tag&1){if(u.flags|=2048,oo(9,Cc(),Py.bind(null,u,d,o,r),null),Rt===null)throw Error(s(349));g||(es&124)!==0||My(u,r,o)}return o}function My(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=je.updateQueue,r===null?(r=wd(),je.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Py(n,r,o,u){r.value=o,r.getSnapshot=u,Uy(r)&&Ly(n)}function Vy(n,r,o){return o(function(){Uy(r)&&Ly(n)})}function Uy(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Jn(n,o)}catch{return!0}}function Ly(n){var r=Za(n,2);r!==null&&si(r,n,2)}function Rd(n){var r=Qn();if(typeof n=="function"){var o=n;if(n=o(),ca){at(!0);try{o()}finally{at(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:n},r}function jy(n,r,o,u){return n.baseState=o,Ad(n,yt,typeof u=="function"?u:Ar)}function Kb(n,r,o,u,d){if(xc(n))throw Error(s(485));if(n=r.action,n!==null){var g={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){g.listeners.push(R)}};N.T!==null?o(!0):g.isTransition=!1,u(g),o=r.pending,o===null?(g.next=r.pending=g,By(r,g)):(g.next=o.next,r.pending=o.next=g)}}function By(n,r){var o=r.action,u=r.payload,d=n.state;if(r.isTransition){var g=N.T,R={};N.T=R;try{var P=o(d,u),G=N.S;G!==null&&G(R,P),zy(n,r,P)}catch(ae){Cd(n,r,ae)}finally{N.T=g}}else try{g=o(d,u),zy(n,r,g)}catch(ae){Cd(n,r,ae)}}function zy(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){qy(n,r,u)},function(u){return Cd(n,r,u)}):qy(n,r,o)}function qy(n,r,o){r.status="fulfilled",r.value=o,Fy(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,By(n,o)))}function Cd(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,Fy(r),r=r.next;while(r!==u)}n.action=null}function Fy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Hy(n,r){return r}function Gy(n,r){if(ct){var o=Rt.formState;if(o!==null){e:{var u=je;if(ct){if(Lt){t:{for(var d=Lt,g=Gi;d.nodeType!==8;){if(!g){d=null;break t}if(d=xi(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Lt=xi(d.nextSibling),u=d.data==="F!";break e}}aa(u)}u=!1}u&&(r=o[0])}}return o=Qn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hy,lastRenderedState:r},o.queue=u,o=cv.bind(null,je,u),u.dispatch=o,u=Rd(!1),g=Od.bind(null,je,!1,u.queue),u=Qn(),d={state:r,dispatch:null,action:n,pending:null},u.queue=d,o=Kb.bind(null,je,d,g,o),d.dispatch=o,u.memoizedState=n,[r,o,!1]}function $y(n){var r=Wt();return Qy(r,yt,n)}function Qy(n,r,o){if(r=Ad(n,r,Hy)[0],n=Rc(Ar)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Al(r)}catch(R){throw R===vl?Ec:R}else u=r;r=Wt();var d=r.queue,g=d.dispatch;return o!==r.memoizedState&&(je.flags|=2048,oo(9,Cc(),Yb.bind(null,d,o),null)),[u,g,n]}function Yb(n,r){n.action=r}function Ky(n){var r=Wt(),o=yt;if(o!==null)return Qy(r,o,n);Wt(),r=r.memoizedState,o=Wt();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function oo(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=je.updateQueue,r===null&&(r=wd(),je.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function Cc(){return{destroy:void 0,resource:void 0}}function Yy(){return Wt().memoizedState}function Ic(n,r,o,u){var d=Qn();u=u===void 0?null:u,je.flags|=n,d.memoizedState=oo(1|r,Cc(),o,u)}function Sl(n,r,o,u){var d=Wt();u=u===void 0?null:u;var g=d.memoizedState.inst;yt!==null&&u!==null&&yd(u,yt.memoizedState.deps)?d.memoizedState=oo(r,g,o,u):(je.flags|=n,d.memoizedState=oo(1|r,g,o,u))}function Xy(n,r){Ic(8390656,8,n,r)}function Wy(n,r){Sl(2048,8,n,r)}function Zy(n,r){return Sl(4,2,n,r)}function Jy(n,r){return Sl(4,4,n,r)}function ev(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function tv(n,r,o){o=o!=null?o.concat([n]):null,Sl(4,4,ev.bind(null,r,n),o)}function Id(){}function nv(n,r){var o=Wt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&yd(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function iv(n,r){var o=Wt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&yd(r,u[1]))return u[0];if(u=n(),ca){at(!0);try{n()}finally{at(!1)}}return o.memoizedState=[u,r],u}function xd(n,r,o){return o===void 0||(es&1073741824)!==0?n.memoizedState=r:(n.memoizedState=o,n=a_(),je.lanes|=n,os|=n,o)}function rv(n,r,o,u){return Jn(o,r)?o:ro.current!==null?(n=xd(n,o,u),Jn(n,r)||(mn=!0),n):(es&42)===0?(mn=!0,n.memoizedState=o):(n=a_(),je.lanes|=n,os|=n,r)}function sv(n,r,o,u,d){var g=O.p;O.p=g!==0&&8>g?g:8;var R=N.T,P={};N.T=P,Od(n,!1,r,o);try{var G=d(),ae=N.S;if(ae!==null&&ae(P,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var fe=Gb(G,u);Rl(n,r,fe,ri(n))}else Rl(n,r,u,ri(n))}catch(ge){Rl(n,r,{then:function(){},status:"rejected",reason:ge},ri())}finally{O.p=g,N.T=R}}function Xb(){}function Nd(n,r,o,u){if(n.tag!==5)throw Error(s(476));var d=av(n).queue;sv(n,d,r,ie,o===null?Xb:function(){return ov(n),o(u)})}function av(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:ie},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function ov(n){var r=av(n).next.queue;Rl(n,r,{},ri())}function Dd(){return On(Hl)}function lv(){return Wt().memoizedState}function uv(){return Wt().memoizedState}function Wb(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=ri();n=Zr(o);var u=Jr(r,n,o);u!==null&&(si(u,r,o),El(u,r,o)),r={cache:od()},n.payload=r;return}r=r.return}}function Zb(n,r,o){var u=ri();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},xc(n)?hv(r,o):(o=Wf(n,r,o,u),o!==null&&(si(o,n,u),fv(o,r,u)))}function cv(n,r,o){var u=ri();Rl(n,r,o,u)}function Rl(n,r,o,u){var d={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(xc(n))hv(r,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var R=r.lastRenderedState,P=g(R,o);if(d.hasEagerState=!0,d.eagerState=P,Jn(P,R))return fc(n,r,d,0),Rt===null&&hc(),!1}catch{}finally{}if(o=Wf(n,r,d,u),o!==null)return si(o,n,u),fv(o,r,u),!0}return!1}function Od(n,r,o,u){if(u={lane:2,revertLane:cm(),action:u,hasEagerState:!1,eagerState:null,next:null},xc(n)){if(r)throw Error(s(479))}else r=Wf(n,o,u,2),r!==null&&si(r,n,2)}function xc(n){var r=n.alternate;return n===je||r!==null&&r===je}function hv(n,r){so=bc=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function fv(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,bi(n,o)}}var Nc={readContext:On,use:Sc,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht},dv={readContext:On,use:Sc,useCallback:function(n,r){return Qn().memoizedState=[n,r===void 0?null:r],n},useContext:On,useEffect:Xy,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Ic(4194308,4,ev.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Ic(4194308,4,n,r)},useInsertionEffect:function(n,r){Ic(4,2,n,r)},useMemo:function(n,r){var o=Qn();r=r===void 0?null:r;var u=n();if(ca){at(!0);try{n()}finally{at(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=Qn();if(o!==void 0){var d=o(r);if(ca){at(!0);try{o(r)}finally{at(!1)}}}else d=r;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=Zb.bind(null,je,n),[u.memoizedState,n]},useRef:function(n){var r=Qn();return n={current:n},r.memoizedState=n},useState:function(n){n=Rd(n);var r=n.queue,o=cv.bind(null,je,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:Id,useDeferredValue:function(n,r){var o=Qn();return xd(o,n,r)},useTransition:function(){var n=Rd(!1);return n=sv.bind(null,je,n.queue,!0,!1),Qn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=je,d=Qn();if(ct){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),Rt===null)throw Error(s(349));(tt&124)!==0||My(u,r,o)}d.memoizedState=o;var g={value:o,getSnapshot:r};return d.queue=g,Xy(Vy.bind(null,u,g,n),[n]),u.flags|=2048,oo(9,Cc(),Py.bind(null,u,g,o,r),null),o},useId:function(){var n=Qn(),r=Rt.identifierPrefix;if(ct){var o=Tr,u=Er;o=(u&~(1<<32-St(u)-1)).toString(32)+o,r="«"+r+"R"+o,o=Ac++,0<o&&(r+="H"+o.toString(32)),r+="»"}else o=$b++,r="«"+r+"r"+o.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:Dd,useFormState:Gy,useActionState:Gy,useOptimistic:function(n){var r=Qn();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Od.bind(null,je,!0,o),o.dispatch=r,[n,r]},useMemoCache:bd,useCacheRefresh:function(){return Qn().memoizedState=Wb.bind(null,je)}},mv={readContext:On,use:Sc,useCallback:nv,useContext:On,useEffect:Wy,useImperativeHandle:tv,useInsertionEffect:Zy,useLayoutEffect:Jy,useMemo:iv,useReducer:Rc,useRef:Yy,useState:function(){return Rc(Ar)},useDebugValue:Id,useDeferredValue:function(n,r){var o=Wt();return rv(o,yt.memoizedState,n,r)},useTransition:function(){var n=Rc(Ar)[0],r=Wt().memoizedState;return[typeof n=="boolean"?n:Al(n),r]},useSyncExternalStore:ky,useId:lv,useHostTransitionStatus:Dd,useFormState:$y,useActionState:$y,useOptimistic:function(n,r){var o=Wt();return jy(o,yt,n,r)},useMemoCache:bd,useCacheRefresh:uv},Jb={readContext:On,use:Sc,useCallback:nv,useContext:On,useEffect:Wy,useImperativeHandle:tv,useInsertionEffect:Zy,useLayoutEffect:Jy,useMemo:iv,useReducer:Sd,useRef:Yy,useState:function(){return Sd(Ar)},useDebugValue:Id,useDeferredValue:function(n,r){var o=Wt();return yt===null?xd(o,n,r):rv(o,yt.memoizedState,n,r)},useTransition:function(){var n=Sd(Ar)[0],r=Wt().memoizedState;return[typeof n=="boolean"?n:Al(n),r]},useSyncExternalStore:ky,useId:lv,useHostTransitionStatus:Dd,useFormState:Ky,useActionState:Ky,useOptimistic:function(n,r){var o=Wt();return yt!==null?jy(o,yt,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:bd,useCacheRefresh:uv},lo=null,Cl=0;function Dc(n){var r=Cl;return Cl+=1,lo===null&&(lo=[]),Sy(lo,n,r)}function Il(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Oc(n,r){throw r.$$typeof===_?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function pv(n){var r=n._init;return r(n._payload)}function gv(n){function r(ee,X){if(n){var se=ee.deletions;se===null?(ee.deletions=[X],ee.flags|=16):se.push(X)}}function o(ee,X){if(!n)return null;for(;X!==null;)r(ee,X),X=X.sibling;return null}function u(ee){for(var X=new Map;ee!==null;)ee.key!==null?X.set(ee.key,ee):X.set(ee.index,ee),ee=ee.sibling;return X}function d(ee,X){return ee=_r(ee,X),ee.index=0,ee.sibling=null,ee}function g(ee,X,se){return ee.index=se,n?(se=ee.alternate,se!==null?(se=se.index,se<X?(ee.flags|=67108866,X):se):(ee.flags|=67108866,X)):(ee.flags|=1048576,X)}function R(ee){return n&&ee.alternate===null&&(ee.flags|=67108866),ee}function P(ee,X,se,me){return X===null||X.tag!==6?(X=Jf(se,ee.mode,me),X.return=ee,X):(X=d(X,se),X.return=ee,X)}function G(ee,X,se,me){var we=se.type;return we===C?fe(ee,X,se.props.children,me,se.key):X!==null&&(X.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===w&&pv(we)===X.type)?(X=d(X,se.props),Il(X,se),X.return=ee,X):(X=mc(se.type,se.key,se.props,null,ee.mode,me),Il(X,se),X.return=ee,X)}function ae(ee,X,se,me){return X===null||X.tag!==4||X.stateNode.containerInfo!==se.containerInfo||X.stateNode.implementation!==se.implementation?(X=ed(se,ee.mode,me),X.return=ee,X):(X=d(X,se.children||[]),X.return=ee,X)}function fe(ee,X,se,me,we){return X===null||X.tag!==7?(X=na(se,ee.mode,me,we),X.return=ee,X):(X=d(X,se),X.return=ee,X)}function ge(ee,X,se){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Jf(""+X,ee.mode,se),X.return=ee,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case v:return se=mc(X.type,X.key,X.props,null,ee.mode,se),Il(se,X),se.return=ee,se;case A:return X=ed(X,ee.mode,se),X.return=ee,X;case w:var me=X._init;return X=me(X._payload),ge(ee,X,se)}if(ne(X)||k(X))return X=na(X,ee.mode,se,null),X.return=ee,X;if(typeof X.then=="function")return ge(ee,Dc(X),se);if(X.$$typeof===F)return ge(ee,vc(ee,X),se);Oc(ee,X)}return null}function le(ee,X,se,me){var we=X!==null?X.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return we!==null?null:P(ee,X,""+se,me);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case v:return se.key===we?G(ee,X,se,me):null;case A:return se.key===we?ae(ee,X,se,me):null;case w:return we=se._init,se=we(se._payload),le(ee,X,se,me)}if(ne(se)||k(se))return we!==null?null:fe(ee,X,se,me,null);if(typeof se.then=="function")return le(ee,X,Dc(se),me);if(se.$$typeof===F)return le(ee,X,vc(ee,se),me);Oc(ee,se)}return null}function ue(ee,X,se,me,we){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ee=ee.get(se)||null,P(X,ee,""+me,we);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case v:return ee=ee.get(me.key===null?se:me.key)||null,G(X,ee,me,we);case A:return ee=ee.get(me.key===null?se:me.key)||null,ae(X,ee,me,we);case w:var He=me._init;return me=He(me._payload),ue(ee,X,se,me,we)}if(ne(me)||k(me))return ee=ee.get(se)||null,fe(X,ee,me,we,null);if(typeof me.then=="function")return ue(ee,X,se,Dc(me),we);if(me.$$typeof===F)return ue(ee,X,se,vc(X,me),we);Oc(X,me)}return null}function Oe(ee,X,se,me){for(var we=null,He=null,Ae=X,xe=X=0,gn=null;Ae!==null&&xe<se.length;xe++){Ae.index>xe?(gn=Ae,Ae=null):gn=Ae.sibling;var lt=le(ee,Ae,se[xe],me);if(lt===null){Ae===null&&(Ae=gn);break}n&&Ae&&lt.alternate===null&&r(ee,Ae),X=g(lt,X,xe),He===null?we=lt:He.sibling=lt,He=lt,Ae=gn}if(xe===se.length)return o(ee,Ae),ct&&ra(ee,xe),we;if(Ae===null){for(;xe<se.length;xe++)Ae=ge(ee,se[xe],me),Ae!==null&&(X=g(Ae,X,xe),He===null?we=Ae:He.sibling=Ae,He=Ae);return ct&&ra(ee,xe),we}for(Ae=u(Ae);xe<se.length;xe++)gn=ue(Ae,ee,xe,se[xe],me),gn!==null&&(n&&gn.alternate!==null&&Ae.delete(gn.key===null?xe:gn.key),X=g(gn,X,xe),He===null?we=gn:He.sibling=gn,He=gn);return n&&Ae.forEach(function(gs){return r(ee,gs)}),ct&&ra(ee,xe),we}function Ie(ee,X,se,me){if(se==null)throw Error(s(151));for(var we=null,He=null,Ae=X,xe=X=0,gn=null,lt=se.next();Ae!==null&&!lt.done;xe++,lt=se.next()){Ae.index>xe?(gn=Ae,Ae=null):gn=Ae.sibling;var gs=le(ee,Ae,lt.value,me);if(gs===null){Ae===null&&(Ae=gn);break}n&&Ae&&gs.alternate===null&&r(ee,Ae),X=g(gs,X,xe),He===null?we=gs:He.sibling=gs,He=gs,Ae=gn}if(lt.done)return o(ee,Ae),ct&&ra(ee,xe),we;if(Ae===null){for(;!lt.done;xe++,lt=se.next())lt=ge(ee,lt.value,me),lt!==null&&(X=g(lt,X,xe),He===null?we=lt:He.sibling=lt,He=lt);return ct&&ra(ee,xe),we}for(Ae=u(Ae);!lt.done;xe++,lt=se.next())lt=ue(Ae,ee,xe,lt.value,me),lt!==null&&(n&&lt.alternate!==null&&Ae.delete(lt.key===null?xe:lt.key),X=g(lt,X,xe),He===null?we=lt:He.sibling=lt,He=lt);return n&&Ae.forEach(function(e2){return r(ee,e2)}),ct&&ra(ee,xe),we}function _t(ee,X,se,me){if(typeof se=="object"&&se!==null&&se.type===C&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case v:e:{for(var we=se.key;X!==null;){if(X.key===we){if(we=se.type,we===C){if(X.tag===7){o(ee,X.sibling),me=d(X,se.props.children),me.return=ee,ee=me;break e}}else if(X.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===w&&pv(we)===X.type){o(ee,X.sibling),me=d(X,se.props),Il(me,se),me.return=ee,ee=me;break e}o(ee,X);break}else r(ee,X);X=X.sibling}se.type===C?(me=na(se.props.children,ee.mode,me,se.key),me.return=ee,ee=me):(me=mc(se.type,se.key,se.props,null,ee.mode,me),Il(me,se),me.return=ee,ee=me)}return R(ee);case A:e:{for(we=se.key;X!==null;){if(X.key===we)if(X.tag===4&&X.stateNode.containerInfo===se.containerInfo&&X.stateNode.implementation===se.implementation){o(ee,X.sibling),me=d(X,se.children||[]),me.return=ee,ee=me;break e}else{o(ee,X);break}else r(ee,X);X=X.sibling}me=ed(se,ee.mode,me),me.return=ee,ee=me}return R(ee);case w:return we=se._init,se=we(se._payload),_t(ee,X,se,me)}if(ne(se))return Oe(ee,X,se,me);if(k(se)){if(we=k(se),typeof we!="function")throw Error(s(150));return se=we.call(se),Ie(ee,X,se,me)}if(typeof se.then=="function")return _t(ee,X,Dc(se),me);if(se.$$typeof===F)return _t(ee,X,vc(ee,se),me);Oc(ee,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,X!==null&&X.tag===6?(o(ee,X.sibling),me=d(X,se),me.return=ee,ee=me):(o(ee,X),me=Jf(se,ee.mode,me),me.return=ee,ee=me),R(ee)):o(ee,X)}return function(ee,X,se,me){try{Cl=0;var we=_t(ee,X,se,me);return lo=null,we}catch(Ae){if(Ae===vl||Ae===Ec)throw Ae;var He=ei(29,Ae,null,ee.mode);return He.lanes=me,He.return=ee,He}finally{}}}var uo=gv(!0),yv=gv(!1),_i=Q(null),$i=null;function ts(n){var r=n.alternate;te(ln,ln.current&1),te(_i,n),$i===null&&(r===null||ro.current!==null||r.memoizedState!==null)&&($i=n)}function vv(n){if(n.tag===22){if(te(ln,ln.current),te(_i,n),$i===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&($i=n)}}else ns()}function ns(){te(ln,ln.current),te(_i,_i.current)}function Sr(n){J(_i),$i===n&&($i=null),J(ln)}var ln=Q(0);function kc(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||wm(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function kd(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:y({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Md={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=ri(),d=Zr(u);d.payload=r,o!=null&&(d.callback=o),r=Jr(n,d,u),r!==null&&(si(r,n,u),El(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=ri(),d=Zr(u);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=Jr(n,d,u),r!==null&&(si(r,n,u),El(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=ri(),u=Zr(o);u.tag=2,r!=null&&(u.callback=r),r=Jr(n,u,o),r!==null&&(si(r,n,o),El(r,n,o))}};function _v(n,r,o,u,d,g,R){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,R):r.prototype&&r.prototype.isPureReactComponent?!cl(o,u)||!cl(d,g):!0}function Ev(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&Md.enqueueReplaceState(r,r.state,null)}function ha(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=y({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}var Mc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Tv(n){Mc(n)}function wv(n){console.error(n)}function bv(n){Mc(n)}function Pc(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function Av(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Pd(n,r,o){return o=Zr(o),o.tag=3,o.payload={element:null},o.callback=function(){Pc(n,r)},o}function Sv(n){return n=Zr(n),n.tag=3,n}function Rv(n,r,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=u.value;n.payload=function(){return d(g)},n.callback=function(){Av(r,o,u)}}var R=o.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(n.callback=function(){Av(r,o,u),typeof d!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var P=u.stack;this.componentDidCatch(u.value,{componentStack:P!==null?P:""})})}function eA(n,r,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&pl(r,o,d,!0),o=_i.current,o!==null){switch(o.tag){case 13:return $i===null?sm():o.alternate===null&&jt===0&&(jt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===cd?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),om(n,u,d)),!1;case 22:return o.flags|=65536,u===cd?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),om(n,u,d)),!1}throw Error(s(435,o.tag))}return om(n,u,d),sm(),!1}if(ct)return r=_i.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,u!==id&&(n=Error(s(422),{cause:u}),ml(pi(n,o)))):(u!==id&&(r=Error(s(423),{cause:u}),ml(pi(r,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=pi(u,o),d=Pd(n.stateNode,u,d),dd(n,d),jt!==4&&(jt=2)),!1;var g=Error(s(520),{cause:u});if(g=pi(g,o),Pl===null?Pl=[g]:Pl.push(g),jt!==4&&(jt=2),r===null)return!0;u=pi(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=Pd(o.stateNode,u,n),dd(o,n),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ls===null||!ls.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=Sv(d),Rv(d,n,o,u),dd(o,d),!1}o=o.return}while(o!==null);return!1}var Cv=Error(s(461)),mn=!1;function wn(n,r,o,u){r.child=n===null?yv(r,null,o,u):uo(r,n.child,o,u)}function Iv(n,r,o,u,d){o=o.render;var g=r.ref;if("ref"in u){var R={};for(var P in u)P!=="ref"&&(R[P]=u[P])}else R=u;return la(r),u=vd(n,r,o,R,g,d),P=_d(),n!==null&&!mn?(Ed(n,r,d),Rr(n,r,d)):(ct&&P&&td(r),r.flags|=1,wn(n,r,u,d),r.child)}function xv(n,r,o,u,d){if(n===null){var g=o.type;return typeof g=="function"&&!Zf(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,Nv(n,r,g,u,d)):(n=mc(o.type,null,u,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!Fd(n,d)){var R=g.memoizedProps;if(o=o.compare,o=o!==null?o:cl,o(R,u)&&n.ref===r.ref)return Rr(n,r,d)}return r.flags|=1,n=_r(g,u),n.ref=r.ref,n.return=r,r.child=n}function Nv(n,r,o,u,d){if(n!==null){var g=n.memoizedProps;if(cl(g,u)&&n.ref===r.ref)if(mn=!1,r.pendingProps=u=g,Fd(n,d))(n.flags&131072)!==0&&(mn=!0);else return r.lanes=n.lanes,Rr(n,r,d)}return Vd(n,r,o,u,d)}function Dv(n,r,o){var u=r.pendingProps,d=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(d=r.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;r.childLanes=g&~u}else r.childLanes=0,r.child=null;return Ov(n,r,u,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&_c(r,g!==null?g.cachePool:null),g!==null?Ny(r,g):pd(),vv(r);else return r.lanes=r.childLanes=536870912,Ov(n,r,g!==null?g.baseLanes|o:o,o)}else g!==null?(_c(r,g.cachePool),Ny(r,g),ns(),r.memoizedState=null):(n!==null&&_c(r,null),pd(),ns());return wn(n,r,d,o),r.child}function Ov(n,r,o,u){var d=ud();return d=d===null?null:{parent:on._currentValue,pool:d},r.memoizedState={baseLanes:o,cachePool:d},n!==null&&_c(r,null),pd(),vv(r),n!==null&&pl(n,r,u,!0),null}function Vc(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Vd(n,r,o,u,d){return la(r),o=vd(n,r,o,u,void 0,d),u=_d(),n!==null&&!mn?(Ed(n,r,d),Rr(n,r,d)):(ct&&u&&td(r),r.flags|=1,wn(n,r,o,d),r.child)}function kv(n,r,o,u,d,g){return la(r),r.updateQueue=null,o=Oy(r,u,o,d),Dy(n),u=_d(),n!==null&&!mn?(Ed(n,r,g),Rr(n,r,g)):(ct&&u&&td(r),r.flags|=1,wn(n,r,o,g),r.child)}function Mv(n,r,o,u,d){if(la(r),r.stateNode===null){var g=Ja,R=o.contextType;typeof R=="object"&&R!==null&&(g=On(R)),g=new o(u,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Md,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=u,g.state=r.memoizedState,g.refs={},hd(r),R=o.contextType,g.context=typeof R=="object"&&R!==null?On(R):Ja,g.state=r.memoizedState,R=o.getDerivedStateFromProps,typeof R=="function"&&(kd(r,o,R,u),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(R=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),R!==g.state&&Md.enqueueReplaceState(g,g.state,null),wl(r,u,g,d),Tl(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){g=r.stateNode;var P=r.memoizedProps,G=ha(o,P);g.props=G;var ae=g.context,fe=o.contextType;R=Ja,typeof fe=="object"&&fe!==null&&(R=On(fe));var ge=o.getDerivedStateFromProps;fe=typeof ge=="function"||typeof g.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,fe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(P||ae!==R)&&Ev(r,g,u,R),Wr=!1;var le=r.memoizedState;g.state=le,wl(r,u,g,d),Tl(),ae=r.memoizedState,P||le!==ae||Wr?(typeof ge=="function"&&(kd(r,o,ge,u),ae=r.memoizedState),(G=Wr||_v(r,o,G,u,le,ae,R))?(fe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=ae),g.props=u,g.state=ae,g.context=R,u=G):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{g=r.stateNode,fd(n,r),R=r.memoizedProps,fe=ha(o,R),g.props=fe,ge=r.pendingProps,le=g.context,ae=o.contextType,G=Ja,typeof ae=="object"&&ae!==null&&(G=On(ae)),P=o.getDerivedStateFromProps,(ae=typeof P=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R!==ge||le!==G)&&Ev(r,g,u,G),Wr=!1,le=r.memoizedState,g.state=le,wl(r,u,g,d),Tl();var ue=r.memoizedState;R!==ge||le!==ue||Wr||n!==null&&n.dependencies!==null&&yc(n.dependencies)?(typeof P=="function"&&(kd(r,o,P,u),ue=r.memoizedState),(fe=Wr||_v(r,o,fe,u,le,ue,G)||n!==null&&n.dependencies!==null&&yc(n.dependencies))?(ae||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ue,G),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ue,G)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||R===n.memoizedProps&&le===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&le===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ue),g.props=u,g.state=ue,g.context=G,u=fe):(typeof g.componentDidUpdate!="function"||R===n.memoizedProps&&le===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&le===n.memoizedState||(r.flags|=1024),u=!1)}return g=u,Vc(n,r),u=(r.flags&128)!==0,g||u?(g=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,n!==null&&u?(r.child=uo(r,n.child,null,d),r.child=uo(r,null,o,d)):wn(n,r,o,d),r.memoizedState=g.state,n=r.child):n=Rr(n,r,d),n}function Pv(n,r,o,u){return dl(),r.flags|=256,wn(n,r,o,u),r.child}var Ud={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(n){return{baseLanes:n,cachePool:wy()}}function jd(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Ei),n}function Vv(n,r,o){var u=r.pendingProps,d=!1,g=(r.flags&128)!==0,R;if((R=g)||(R=n!==null&&n.memoizedState===null?!1:(ln.current&2)!==0),R&&(d=!0,r.flags&=-129),R=(r.flags&32)!==0,r.flags&=-33,n===null){if(ct){if(d?ts(r):ns(),ct){var P=Lt,G;if(G=P){e:{for(G=P,P=Gi;G.nodeType!==8;){if(!P){P=null;break e}if(G=xi(G.nextSibling),G===null){P=null;break e}}P=G}P!==null?(r.memoizedState={dehydrated:P,treeContext:ia!==null?{id:Er,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},G=ei(18,null,null,0),G.stateNode=P,G.return=r,r.child=G,zn=r,Lt=null,G=!0):G=!1}G||aa(r)}if(P=r.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return wm(P)?r.lanes=32:r.lanes=536870912,null;Sr(r)}return P=u.children,u=u.fallback,d?(ns(),d=r.mode,P=Uc({mode:"hidden",children:P},d),u=na(u,d,o,null),P.return=r,u.return=r,P.sibling=u,r.child=P,d=r.child,d.memoizedState=Ld(o),d.childLanes=jd(n,R,o),r.memoizedState=Ud,u):(ts(r),Bd(r,P))}if(G=n.memoizedState,G!==null&&(P=G.dehydrated,P!==null)){if(g)r.flags&256?(ts(r),r.flags&=-257,r=zd(n,r,o)):r.memoizedState!==null?(ns(),r.child=n.child,r.flags|=128,r=null):(ns(),d=u.fallback,P=r.mode,u=Uc({mode:"visible",children:u.children},P),d=na(d,P,o,null),d.flags|=2,u.return=r,d.return=r,u.sibling=d,r.child=u,uo(r,n.child,null,o),u=r.child,u.memoizedState=Ld(o),u.childLanes=jd(n,R,o),r.memoizedState=Ud,r=d);else if(ts(r),wm(P)){if(R=P.nextSibling&&P.nextSibling.dataset,R)var ae=R.dgst;R=ae,u=Error(s(419)),u.stack="",u.digest=R,ml({value:u,source:null,stack:null}),r=zd(n,r,o)}else if(mn||pl(n,r,o,!1),R=(o&n.childLanes)!==0,mn||R){if(R=Rt,R!==null&&(u=o&-o,u=(u&42)!==0?1:Ai(u),u=(u&(R.suspendedLanes|o))!==0?0:u,u!==0&&u!==G.retryLane))throw G.retryLane=u,Za(n,u),si(R,n,u),Cv;P.data==="$?"||sm(),r=zd(n,r,o)}else P.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=G.treeContext,Lt=xi(P.nextSibling),zn=r,ct=!0,sa=null,Gi=!1,n!==null&&(yi[vi++]=Er,yi[vi++]=Tr,yi[vi++]=ia,Er=n.id,Tr=n.overflow,ia=r),r=Bd(r,u.children),r.flags|=4096);return r}return d?(ns(),d=u.fallback,P=r.mode,G=n.child,ae=G.sibling,u=_r(G,{mode:"hidden",children:u.children}),u.subtreeFlags=G.subtreeFlags&65011712,ae!==null?d=_r(ae,d):(d=na(d,P,o,null),d.flags|=2),d.return=r,u.return=r,u.sibling=d,r.child=u,u=d,d=r.child,P=n.child.memoizedState,P===null?P=Ld(o):(G=P.cachePool,G!==null?(ae=on._currentValue,G=G.parent!==ae?{parent:ae,pool:ae}:G):G=wy(),P={baseLanes:P.baseLanes|o,cachePool:G}),d.memoizedState=P,d.childLanes=jd(n,R,o),r.memoizedState=Ud,u):(ts(r),o=n.child,n=o.sibling,o=_r(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(R=r.deletions,R===null?(r.deletions=[n],r.flags|=16):R.push(n)),r.child=o,r.memoizedState=null,o)}function Bd(n,r){return r=Uc({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Uc(n,r){return n=ei(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function zd(n,r,o){return uo(r,n.child,null,o),n=Bd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Uv(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),sd(n.return,r,o)}function qd(n,r,o,u,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=d)}function Lv(n,r,o){var u=r.pendingProps,d=u.revealOrder,g=u.tail;if(wn(n,r,u.children,o),u=ln.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Uv(n,o,r);else if(n.tag===19)Uv(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(te(ln,u),d){case"forwards":for(o=r.child,d=null;o!==null;)n=o.alternate,n!==null&&kc(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),qd(r,!1,d,o,g);break;case"backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&kc(n)===null){r.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}qd(r,!0,o,null,g);break;case"together":qd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Rr(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),os|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(pl(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,o=_r(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=_r(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Fd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&yc(n)))}function tA(n,r,o){switch(r.tag){case 3:be(r,r.stateNode.containerInfo),Xr(r,on,n.memoizedState.cache),dl();break;case 27:case 5:ze(r);break;case 4:be(r,r.stateNode.containerInfo);break;case 10:Xr(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(ts(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Vv(n,r,o):(ts(r),n=Rr(n,r,o),n!==null?n.sibling:null);ts(r);break;case 19:var d=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(pl(n,r,o,!1),u=(o&r.childLanes)!==0),d){if(u)return Lv(n,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),te(ln,ln.current),u)break;return null;case 22:case 23:return r.lanes=0,Dv(n,r,o);case 24:Xr(r,on,n.memoizedState.cache)}return Rr(n,r,o)}function jv(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)mn=!0;else{if(!Fd(n,o)&&(r.flags&128)===0)return mn=!1,tA(n,r,o);mn=(n.flags&131072)!==0}else mn=!1,ct&&(r.flags&1048576)!==0&&py(r,gc,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var u=r.elementType,d=u._init;if(u=d(u._payload),r.type=u,typeof u=="function")Zf(u)?(n=ha(u,n),r.tag=1,r=Mv(null,r,u,n,o)):(r.tag=0,r=Vd(null,r,u,n,o));else{if(u!=null){if(d=u.$$typeof,d===q){r.tag=11,r=Iv(null,r,u,n,o);break e}else if(d===M){r.tag=14,r=xv(null,r,u,n,o);break e}}throw r=Y(u)||u,Error(s(306,r,""))}}return r;case 0:return Vd(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,d=ha(u,r.pendingProps),Mv(n,r,u,d,o);case 3:e:{if(be(r,r.stateNode.containerInfo),n===null)throw Error(s(387));u=r.pendingProps;var g=r.memoizedState;d=g.element,fd(n,r),wl(r,u,null,o);var R=r.memoizedState;if(u=R.cache,Xr(r,on,u),u!==g.cache&&ad(r,[on],o,!0),Tl(),u=R.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:R.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=Pv(n,r,u,o);break e}else if(u!==d){d=pi(Error(s(424)),r),ml(d),r=Pv(n,r,u,o);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Lt=xi(n.firstChild),zn=r,ct=!0,sa=null,Gi=!0,o=yv(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(dl(),u===d){r=Rr(n,r,o);break e}wn(n,r,u,o)}r=r.child}return r;case 26:return Vc(n,r),n===null?(o=F_(r.type,null,r.pendingProps,null))?r.memoizedState=o:ct||(o=r.type,n=r.pendingProps,u=Wc(de.current).createElement(o),u[rn]=r,u[Kt]=n,An(u,o,n),Ft(u),r.stateNode=u):r.memoizedState=F_(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return ze(r),n===null&&ct&&(u=r.stateNode=B_(r.type,r.pendingProps,de.current),zn=r,Gi=!0,d=Lt,hs(r.type)?(bm=d,Lt=xi(u.firstChild)):Lt=d),wn(n,r,r.pendingProps.children,o),Vc(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&ct&&((d=u=Lt)&&(u=xA(u,r.type,r.pendingProps,Gi),u!==null?(r.stateNode=u,zn=r,Lt=xi(u.firstChild),Gi=!1,d=!0):d=!1),d||aa(r)),ze(r),d=r.type,g=r.pendingProps,R=n!==null?n.memoizedProps:null,u=g.children,_m(d,g)?u=null:R!==null&&_m(d,R)&&(r.flags|=32),r.memoizedState!==null&&(d=vd(n,r,Qb,null,null,o),Hl._currentValue=d),Vc(n,r),wn(n,r,u,o),r.child;case 6:return n===null&&ct&&((n=o=Lt)&&(o=NA(o,r.pendingProps,Gi),o!==null?(r.stateNode=o,zn=r,Lt=null,n=!0):n=!1),n||aa(r)),null;case 13:return Vv(n,r,o);case 4:return be(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=uo(r,null,u,o):wn(n,r,u,o),r.child;case 11:return Iv(n,r,r.type,r.pendingProps,o);case 7:return wn(n,r,r.pendingProps,o),r.child;case 8:return wn(n,r,r.pendingProps.children,o),r.child;case 12:return wn(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Xr(r,r.type,u.value),wn(n,r,u.children,o),r.child;case 9:return d=r.type._context,u=r.pendingProps.children,la(r),d=On(d),u=u(d),r.flags|=1,wn(n,r,u,o),r.child;case 14:return xv(n,r,r.type,r.pendingProps,o);case 15:return Nv(n,r,r.type,r.pendingProps,o);case 19:return Lv(n,r,o);case 31:return u=r.pendingProps,o=r.mode,u={mode:u.mode,children:u.children},n===null?(o=Uc(u,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=_r(n.child,u),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return Dv(n,r,o);case 24:return la(r),u=On(on),n===null?(d=ud(),d===null&&(d=Rt,g=od(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),r.memoizedState={parent:u,cache:d},hd(r),Xr(r,on,d)):((n.lanes&o)!==0&&(fd(n,r),wl(r,null,null,o),Tl()),d=n.memoizedState,g=r.memoizedState,d.parent!==u?(d={parent:u,cache:u},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Xr(r,on,u)):(u=g.cache,Xr(r,on,u),u!==d.cache&&ad(r,[on],o,!0))),wn(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Cr(n){n.flags|=4}function Bv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!K_(r)){if(r=_i.current,r!==null&&((tt&4194048)===tt?$i!==null:(tt&62914560)!==tt&&(tt&536870912)===0||r!==$i))throw _l=cd,by;n.flags|=8192}}function Lc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?dt():536870912,n.lanes|=r,mo|=r)}function xl(n,r){if(!ct)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function kt(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function nA(n,r,o){var u=r.pendingProps;switch(nd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(r),null;case 1:return kt(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),br(on),Re(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(fl(r)?Cr(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,vy())),kt(r),null;case 26:return o=r.memoizedState,n===null?(Cr(r),o!==null?(kt(r),Bv(r,o)):(kt(r),r.flags&=-16777217)):o?o!==n.memoizedState?(Cr(r),kt(r),Bv(r,o)):(kt(r),r.flags&=-16777217):(n.memoizedProps!==u&&Cr(r),kt(r),r.flags&=-16777217),null;case 27:Le(r),o=de.current;var d=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Cr(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return kt(r),null}n=oe.current,fl(r)?gy(r):(n=B_(d,u,o),r.stateNode=n,Cr(r))}return kt(r),null;case 5:if(Le(r),o=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Cr(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return kt(r),null}if(n=oe.current,fl(r))gy(r);else{switch(d=Wc(de.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?d.createElement("select",{is:u.is}):d.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?d.createElement(o,{is:u.is}):d.createElement(o)}}n[rn]=r,n[Kt]=u;e:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=n;e:switch(An(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Cr(r)}}return kt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&Cr(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(n=de.current,fl(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,d=zn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[rn]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||k_(n.nodeValue,o)),n||aa(r)}else n=Wc(n).createTextNode(u),n[rn]=r,r.stateNode=n}return kt(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=fl(r),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(s(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[rn]=r}else dl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;kt(r),d=!1}else d=vy(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Sr(r),r):(Sr(r),null)}if(Sr(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=r.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048)}return o!==n&&o&&(r.child.flags|=8192),Lc(r,r.updateQueue),kt(r),null;case 4:return Re(),n===null&&mm(r.stateNode.containerInfo),kt(r),null;case 10:return br(r.type),kt(r),null;case 19:if(J(ln),d=r.memoizedState,d===null)return kt(r),null;if(u=(r.flags&128)!==0,g=d.rendering,g===null)if(u)xl(d,!1);else{if(jt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(g=kc(n),g!==null){for(r.flags|=128,xl(d,!1),n=g.updateQueue,r.updateQueue=n,Lc(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)my(o,n),o=o.sibling;return te(ln,ln.current&1|2),r.child}n=n.sibling}d.tail!==null&&Ue()>zc&&(r.flags|=128,u=!0,xl(d,!1),r.lanes=4194304)}else{if(!u)if(n=kc(g),n!==null){if(r.flags|=128,u=!0,n=n.updateQueue,r.updateQueue=n,Lc(r,n),xl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!ct)return kt(r),null}else 2*Ue()-d.renderingStartTime>zc&&o!==536870912&&(r.flags|=128,u=!0,xl(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(n=d.last,n!==null?n.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Ue(),r.sibling=null,n=ln.current,te(ln,u?n&1|2:n&1),r):(kt(r),null);case 22:case 23:return Sr(r),gd(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(kt(r),r.subtreeFlags&6&&(r.flags|=8192)):kt(r),o=r.updateQueue,o!==null&&Lc(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&J(ua),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),br(on),kt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function iA(n,r){switch(nd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return br(on),Re(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Le(r),null;case 13:if(Sr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));dl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return J(ln),null;case 4:return Re(),null;case 10:return br(r.type),null;case 22:case 23:return Sr(r),gd(),n!==null&&J(ua),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return br(on),null;case 25:return null;default:return null}}function zv(n,r){switch(nd(r),r.tag){case 3:br(on),Re();break;case 26:case 27:case 5:Le(r);break;case 4:Re();break;case 13:Sr(r);break;case 19:J(ln);break;case 10:br(r.type);break;case 22:case 23:Sr(r),gd(),n!==null&&J(ua);break;case 24:br(on)}}function Nl(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var g=o.create,R=o.inst;u=g(),R.destroy=u}o=o.next}while(o!==d)}}catch(P){wt(r,r.return,P)}}function is(n,r,o){try{var u=r.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&n)===n){var R=u.inst,P=R.destroy;if(P!==void 0){R.destroy=void 0,d=r;var G=o,ae=P;try{ae()}catch(fe){wt(d,G,fe)}}}u=u.next}while(u!==g)}}catch(fe){wt(r,r.return,fe)}}function qv(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{xy(r,o)}catch(u){wt(n,n.return,u)}}}function Fv(n,r,o){o.props=ha(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){wt(n,r,u)}}function Dl(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){wt(n,r,d)}}function Qi(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){wt(n,r,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){wt(n,r,d)}else o.current=null}function Hv(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){wt(n,n.return,d)}}function Hd(n,r,o){try{var u=n.stateNode;AA(u,n.type,o,r),u[Kt]=r}catch(d){wt(n,n.return,d)}}function Gv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&hs(n.type)||n.tag===4}function Gd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Gv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&hs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $d(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Xc));else if(u!==4&&(u===27&&hs(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for($d(n,r,o),n=n.sibling;n!==null;)$d(n,r,o),n=n.sibling}function jc(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&hs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(jc(n,r,o),n=n.sibling;n!==null;)jc(n,r,o),n=n.sibling}function $v(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);An(r,u,o),r[rn]=n,r[Kt]=o}catch(g){wt(n,n.return,g)}}var Ir=!1,Gt=!1,Qd=!1,Qv=typeof WeakSet=="function"?WeakSet:Set,pn=null;function rA(n,r){if(n=n.containerInfo,ym=ih,n=ry(n),Gf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var R=0,P=-1,G=-1,ae=0,fe=0,ge=n,le=null;t:for(;;){for(var ue;ge!==o||d!==0&&ge.nodeType!==3||(P=R+d),ge!==g||u!==0&&ge.nodeType!==3||(G=R+u),ge.nodeType===3&&(R+=ge.nodeValue.length),(ue=ge.firstChild)!==null;)le=ge,ge=ue;for(;;){if(ge===n)break t;if(le===o&&++ae===d&&(P=R),le===g&&++fe===u&&(G=R),(ue=ge.nextSibling)!==null)break;ge=le,le=ge.parentNode}ge=ue}o=P===-1||G===-1?null:{start:P,end:G}}else o=null}o=o||{start:0,end:0}}else o=null;for(vm={focusedElem:n,selectionRange:o},ih=!1,pn=r;pn!==null;)if(r=pn,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,pn=n;else for(;pn!==null;){switch(r=pn,g=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=r,d=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Oe=ha(o.type,d,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Oe,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ie){wt(o,o.return,Ie)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)Tm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Tm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,pn=n;break}pn=r.return}}function Kv(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:rs(n,o),u&4&&Nl(5,o);break;case 1:if(rs(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(R){wt(o,o.return,R)}else{var d=ha(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(d,r,n.__reactInternalSnapshotBeforeUpdate)}catch(R){wt(o,o.return,R)}}u&64&&qv(o),u&512&&Dl(o,o.return);break;case 3:if(rs(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{xy(n,r)}catch(R){wt(o,o.return,R)}}break;case 27:r===null&&u&4&&$v(o);case 26:case 5:rs(n,o),r===null&&u&4&&Hv(o),u&512&&Dl(o,o.return);break;case 12:rs(n,o);break;case 13:rs(n,o),u&4&&Wv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=dA.bind(null,o),DA(n,o))));break;case 22:if(u=o.memoizedState!==null||Ir,!u){r=r!==null&&r.memoizedState!==null||Gt,d=Ir;var g=Gt;Ir=u,(Gt=r)&&!g?ss(n,o,(o.subtreeFlags&8772)!==0):rs(n,o),Ir=d,Gt=g}break;case 30:break;default:rs(n,o)}}function Yv(n){var r=n.alternate;r!==null&&(n.alternate=null,Yv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&$r(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var xt=null,Kn=!1;function xr(n,r,o){for(o=o.child;o!==null;)Xv(n,r,o),o=o.sibling}function Xv(n,r,o){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Ke,o)}catch{}switch(o.tag){case 26:Gt||Qi(o,r),xr(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Gt||Qi(o,r);var u=xt,d=Kn;hs(o.type)&&(xt=o.stateNode,Kn=!1),xr(n,r,o),Bl(o.stateNode),xt=u,Kn=d;break;case 5:Gt||Qi(o,r);case 6:if(u=xt,d=Kn,xt=null,xr(n,r,o),xt=u,Kn=d,xt!==null)if(Kn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(o.stateNode)}catch(g){wt(o,r,g)}else try{xt.removeChild(o.stateNode)}catch(g){wt(o,r,g)}break;case 18:xt!==null&&(Kn?(n=xt,L_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Kl(n)):L_(xt,o.stateNode));break;case 4:u=xt,d=Kn,xt=o.stateNode.containerInfo,Kn=!0,xr(n,r,o),xt=u,Kn=d;break;case 0:case 11:case 14:case 15:Gt||is(2,o,r),Gt||is(4,o,r),xr(n,r,o);break;case 1:Gt||(Qi(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Fv(o,r,u)),xr(n,r,o);break;case 21:xr(n,r,o);break;case 22:Gt=(u=Gt)||o.memoizedState!==null,xr(n,r,o),Gt=u;break;default:xr(n,r,o)}}function Wv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Kl(n)}catch(o){wt(r,r.return,o)}}function sA(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Qv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Qv),r;default:throw Error(s(435,n.tag))}}function Kd(n,r){var o=sA(n);r.forEach(function(u){var d=mA.bind(null,n,u);o.has(u)||(o.add(u),u.then(d,d))})}function ti(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],g=n,R=r,P=R;e:for(;P!==null;){switch(P.tag){case 27:if(hs(P.type)){xt=P.stateNode,Kn=!1;break e}break;case 5:xt=P.stateNode,Kn=!1;break e;case 3:case 4:xt=P.stateNode.containerInfo,Kn=!0;break e}P=P.return}if(xt===null)throw Error(s(160));Xv(g,R,d),xt=null,Kn=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Zv(r,n),r=r.sibling}var Ii=null;function Zv(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ti(r,n),ni(n),u&4&&(is(3,n,n.return),Nl(3,n),is(5,n,n.return));break;case 1:ti(r,n),ni(n),u&512&&(Gt||o===null||Qi(o,o.return)),u&64&&Ir&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=Ii;if(ti(r,n),ni(n),u&512&&(Gt||o===null||Qi(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Bs]||g[rn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(u),d.head.insertBefore(g,d.querySelector("head > title"))),An(g,u,o),g[rn]=n,Ft(g),u=g;break e;case"link":var R=$_("link","href",d).get(u+(o.href||""));if(R){for(var P=0;P<R.length;P++)if(g=R[P],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){R.splice(P,1);break t}}g=d.createElement(u),An(g,u,o),d.head.appendChild(g);break;case"meta":if(R=$_("meta","content",d).get(u+(o.content||""))){for(P=0;P<R.length;P++)if(g=R[P],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){R.splice(P,1);break t}}g=d.createElement(u),An(g,u,o),d.head.appendChild(g);break;default:throw Error(s(468,u))}g[rn]=n,Ft(g),u=g}n.stateNode=u}else Q_(d,n.type,n.stateNode);else n.stateNode=G_(d,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?Q_(d,n.type,n.stateNode):G_(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Hd(n,n.memoizedProps,o.memoizedProps)}break;case 27:ti(r,n),ni(n),u&512&&(Gt||o===null||Qi(o,o.return)),o!==null&&u&4&&Hd(n,n.memoizedProps,o.memoizedProps);break;case 5:if(ti(r,n),ni(n),u&512&&(Gt||o===null||Qi(o,o.return)),n.flags&32){d=n.stateNode;try{hi(d,"")}catch(ue){wt(n,n.return,ue)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,Hd(n,d,o!==null?o.memoizedProps:d)),u&1024&&(Qd=!0);break;case 6:if(ti(r,n),ni(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ue){wt(n,n.return,ue)}}break;case 3:if(eh=null,d=Ii,Ii=Zc(r.containerInfo),ti(r,n),Ii=d,ni(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Kl(r.containerInfo)}catch(ue){wt(n,n.return,ue)}Qd&&(Qd=!1,Jv(n));break;case 4:u=Ii,Ii=Zc(n.stateNode.containerInfo),ti(r,n),ni(n),Ii=u;break;case 12:ti(r,n),ni(n);break;case 13:ti(r,n),ni(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(em=Ue()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kd(n,u)));break;case 22:d=n.memoizedState!==null;var G=o!==null&&o.memoizedState!==null,ae=Ir,fe=Gt;if(Ir=ae||d,Gt=fe||G,ti(r,n),Gt=fe,Ir=ae,ni(n),u&8192)e:for(r=n.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(o===null||G||Ir||Gt||fa(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){G=o=r;try{if(g=G.stateNode,d)R=g.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{P=G.stateNode;var ge=G.memoizedProps.style,le=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;P.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ue){wt(G,G.return,ue)}}}else if(r.tag===6){if(o===null){G=r;try{G.stateNode.nodeValue=d?"":G.memoizedProps}catch(ue){wt(G,G.return,ue)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Kd(n,o))));break;case 19:ti(r,n),ni(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kd(n,u)));break;case 30:break;case 21:break;default:ti(r,n),ni(n)}}function ni(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(Gv(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var d=o.stateNode,g=Gd(n);jc(n,g,d);break;case 5:var R=o.stateNode;o.flags&32&&(hi(R,""),o.flags&=-33);var P=Gd(n);jc(n,P,R);break;case 3:case 4:var G=o.stateNode.containerInfo,ae=Gd(n);$d(n,ae,G);break;default:throw Error(s(161))}}catch(fe){wt(n,n.return,fe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Jv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Jv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function rs(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Kv(n,r.alternate,r),r=r.sibling}function fa(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:is(4,r,r.return),fa(r);break;case 1:Qi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Fv(r,r.return,o),fa(r);break;case 27:Bl(r.stateNode);case 26:case 5:Qi(r,r.return),fa(r);break;case 22:r.memoizedState===null&&fa(r);break;case 30:fa(r);break;default:fa(r)}n=n.sibling}}function ss(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,d=n,g=r,R=g.flags;switch(g.tag){case 0:case 11:case 15:ss(d,g,o),Nl(4,g);break;case 1:if(ss(d,g,o),u=g,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ae){wt(u,u.return,ae)}if(u=g,d=u.updateQueue,d!==null){var P=u.stateNode;try{var G=d.shared.hiddenCallbacks;if(G!==null)for(d.shared.hiddenCallbacks=null,d=0;d<G.length;d++)Iy(G[d],P)}catch(ae){wt(u,u.return,ae)}}o&&R&64&&qv(g),Dl(g,g.return);break;case 27:$v(g);case 26:case 5:ss(d,g,o),o&&u===null&&R&4&&Hv(g),Dl(g,g.return);break;case 12:ss(d,g,o);break;case 13:ss(d,g,o),o&&R&4&&Wv(d,g);break;case 22:g.memoizedState===null&&ss(d,g,o),Dl(g,g.return);break;case 30:break;default:ss(d,g,o)}r=r.sibling}}function Yd(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&gl(o))}function Xd(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&gl(n))}function Ki(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)e_(n,r,o,u),r=r.sibling}function e_(n,r,o,u){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Ki(n,r,o,u),d&2048&&Nl(9,r);break;case 1:Ki(n,r,o,u);break;case 3:Ki(n,r,o,u),d&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&gl(n)));break;case 12:if(d&2048){Ki(n,r,o,u),n=r.stateNode;try{var g=r.memoizedProps,R=g.id,P=g.onPostCommit;typeof P=="function"&&P(R,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(G){wt(r,r.return,G)}}else Ki(n,r,o,u);break;case 13:Ki(n,r,o,u);break;case 23:break;case 22:g=r.stateNode,R=r.alternate,r.memoizedState!==null?g._visibility&2?Ki(n,r,o,u):Ol(n,r):g._visibility&2?Ki(n,r,o,u):(g._visibility|=2,co(n,r,o,u,(r.subtreeFlags&10256)!==0)),d&2048&&Yd(R,r);break;case 24:Ki(n,r,o,u),d&2048&&Xd(r.alternate,r);break;default:Ki(n,r,o,u)}}function co(n,r,o,u,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=n,R=r,P=o,G=u,ae=R.flags;switch(R.tag){case 0:case 11:case 15:co(g,R,P,G,d),Nl(8,R);break;case 23:break;case 22:var fe=R.stateNode;R.memoizedState!==null?fe._visibility&2?co(g,R,P,G,d):Ol(g,R):(fe._visibility|=2,co(g,R,P,G,d)),d&&ae&2048&&Yd(R.alternate,R);break;case 24:co(g,R,P,G,d),d&&ae&2048&&Xd(R.alternate,R);break;default:co(g,R,P,G,d)}r=r.sibling}}function Ol(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,d=u.flags;switch(u.tag){case 22:Ol(o,u),d&2048&&Yd(u.alternate,u);break;case 24:Ol(o,u),d&2048&&Xd(u.alternate,u);break;default:Ol(o,u)}r=r.sibling}}var kl=8192;function ho(n){if(n.subtreeFlags&kl)for(n=n.child;n!==null;)t_(n),n=n.sibling}function t_(n){switch(n.tag){case 26:ho(n),n.flags&kl&&n.memoizedState!==null&&HA(Ii,n.memoizedState,n.memoizedProps);break;case 5:ho(n);break;case 3:case 4:var r=Ii;Ii=Zc(n.stateNode.containerInfo),ho(n),Ii=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=kl,kl=16777216,ho(n),kl=r):ho(n));break;default:ho(n)}}function n_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ml(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];pn=u,r_(u,n)}n_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)i_(n),n=n.sibling}function i_(n){switch(n.tag){case 0:case 11:case 15:Ml(n),n.flags&2048&&is(9,n,n.return);break;case 3:Ml(n);break;case 12:Ml(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Bc(n)):Ml(n);break;default:Ml(n)}}function Bc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];pn=u,r_(u,n)}n_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:is(8,r,r.return),Bc(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Bc(r));break;default:Bc(r)}n=n.sibling}}function r_(n,r){for(;pn!==null;){var o=pn;switch(o.tag){case 0:case 11:case 15:is(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:gl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,pn=u;else e:for(o=n;pn!==null;){u=pn;var d=u.sibling,g=u.return;if(Yv(u),u===o){pn=null;break e}if(d!==null){d.return=g,pn=d;break e}pn=g}}}var aA={getCacheForType:function(n){var r=On(on),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o}},oA=typeof WeakMap=="function"?WeakMap:Map,mt=0,Rt=null,$e=null,tt=0,pt=0,ii=null,as=!1,fo=!1,Wd=!1,Nr=0,jt=0,os=0,da=0,Zd=0,Ei=0,mo=0,Pl=null,Yn=null,Jd=!1,em=0,zc=1/0,qc=null,ls=null,bn=0,us=null,po=null,go=0,tm=0,nm=null,s_=null,Vl=0,im=null;function ri(){if((mt&2)!==0&&tt!==0)return tt&-tt;if(N.T!==null){var n=no;return n!==0?n:cm()}return Dn()}function a_(){Ei===0&&(Ei=(tt&536870912)===0||ct?Pe():536870912);var n=_i.current;return n!==null&&(n.flags|=32),Ei}function si(n,r,o){(n===Rt&&(pt===2||pt===9)||n.cancelPendingCommit!==null)&&(yo(n,0),cs(n,tt,Ei,!1)),Ot(n,o),((mt&2)===0||n!==Rt)&&(n===Rt&&((mt&2)===0&&(da|=o),jt===4&&cs(n,tt,Ei,!1)),Yi(n))}function o_(n,r,o){if((mt&6)!==0)throw Error(s(327));var u=!o&&(r&124)===0&&(r&n.expiredLanes)===0||Fe(n,r),d=u?cA(n,r):am(n,r,!0),g=u;do{if(d===0){fo&&!u&&cs(n,r,0,!1);break}else{if(o=n.current.alternate,g&&!lA(o)){d=am(n,r,!1),g=!1;continue}if(d===2){if(g=r,n.errorRecoveryDisabledLanes&g)var R=0;else R=n.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){r=R;e:{var P=n;d=Pl;var G=P.current.memoizedState.isDehydrated;if(G&&(yo(P,R).flags|=256),R=am(P,R,!1),R!==2){if(Wd&&!G){P.errorRecoveryDisabledLanes|=g,da|=g,d=4;break e}g=Yn,Yn=d,g!==null&&(Yn===null?Yn=g:Yn.push.apply(Yn,g))}d=R}if(g=!1,d!==2)continue}}if(d===1){yo(n,0),cs(n,r,0,!0);break}e:{switch(u=n,g=d,g){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:cs(u,r,Ei,!as);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(d=em+300-Ue(),10<d)){if(cs(u,r,Ei,!as),Ge(u,0,!0)!==0)break e;u.timeoutHandle=V_(l_.bind(null,u,o,Yn,qc,Jd,r,Ei,da,mo,as,g,2,-0,0),d);break e}l_(u,o,Yn,qc,Jd,r,Ei,da,mo,as,g,0,-0,0)}}break}while(!0);Yi(n)}function l_(n,r,o,u,d,g,R,P,G,ae,fe,ge,le,ue){if(n.timeoutHandle=-1,ge=r.subtreeFlags,(ge&8192||(ge&16785408)===16785408)&&(Fl={stylesheets:null,count:0,unsuspend:FA},t_(r),ge=GA(),ge!==null)){n.cancelPendingCommit=ge(p_.bind(null,n,r,g,o,u,d,R,P,G,fe,1,le,ue)),cs(n,g,R,!ae);return}p_(n,r,g,o,u,d,R,P,G)}function lA(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],g=d.getSnapshot;d=d.value;try{if(!Jn(g(),d))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function cs(n,r,o,u){r&=~Zd,r&=~da,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var d=r;0<d;){var g=31-St(d),R=1<<g;u[g]=-1,d&=~R}o!==0&&_n(n,o,r)}function Fc(){return(mt&6)===0?(Ul(0),!1):!0}function rm(){if($e!==null){if(pt===0)var n=$e.return;else n=$e,wr=oa=null,Td(n),lo=null,Cl=0,n=$e;for(;n!==null;)zv(n.alternate,n),n=n.return;$e=null}}function yo(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,RA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),rm(),Rt=n,$e=o=_r(n.current,null),tt=r,pt=0,ii=null,as=!1,fo=Fe(n,r),Wd=!1,mo=Ei=Zd=da=os=jt=0,Yn=Pl=null,Jd=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var d=31-St(u),g=1<<d;r|=n[d],u&=~g}return Nr=r,hc(),o}function u_(n,r){je=null,N.H=Nc,r===vl||r===Ec?(r=Ry(),pt=3):r===by?(r=Ry(),pt=4):pt=r===Cv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ii=r,$e===null&&(jt=1,Pc(n,pi(r,n.current)))}function c_(){var n=N.H;return N.H=Nc,n===null?Nc:n}function h_(){var n=N.A;return N.A=aA,n}function sm(){jt=4,as||(tt&4194048)!==tt&&_i.current!==null||(fo=!0),(os&134217727)===0&&(da&134217727)===0||Rt===null||cs(Rt,tt,Ei,!1)}function am(n,r,o){var u=mt;mt|=2;var d=c_(),g=h_();(Rt!==n||tt!==r)&&(qc=null,yo(n,r)),r=!1;var R=jt;e:do try{if(pt!==0&&$e!==null){var P=$e,G=ii;switch(pt){case 8:rm(),R=6;break e;case 3:case 2:case 9:case 6:_i.current===null&&(r=!0);var ae=pt;if(pt=0,ii=null,vo(n,P,G,ae),o&&fo){R=0;break e}break;default:ae=pt,pt=0,ii=null,vo(n,P,G,ae)}}uA(),R=jt;break}catch(fe){u_(n,fe)}while(!0);return r&&n.shellSuspendCounter++,wr=oa=null,mt=u,N.H=d,N.A=g,$e===null&&(Rt=null,tt=0,hc()),R}function uA(){for(;$e!==null;)f_($e)}function cA(n,r){var o=mt;mt|=2;var u=c_(),d=h_();Rt!==n||tt!==r?(qc=null,zc=Ue()+500,yo(n,r)):fo=Fe(n,r);e:do try{if(pt!==0&&$e!==null){r=$e;var g=ii;t:switch(pt){case 1:pt=0,ii=null,vo(n,r,g,1);break;case 2:case 9:if(Ay(g)){pt=0,ii=null,d_(r);break}r=function(){pt!==2&&pt!==9||Rt!==n||(pt=7),Yi(n)},g.then(r,r);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Ay(g)?(pt=0,ii=null,d_(r)):(pt=0,ii=null,vo(n,r,g,7));break;case 5:var R=null;switch($e.tag){case 26:R=$e.memoizedState;case 5:case 27:var P=$e;if(!R||K_(R)){pt=0,ii=null;var G=P.sibling;if(G!==null)$e=G;else{var ae=P.return;ae!==null?($e=ae,Hc(ae)):$e=null}break t}}pt=0,ii=null,vo(n,r,g,5);break;case 6:pt=0,ii=null,vo(n,r,g,6);break;case 8:rm(),jt=6;break e;default:throw Error(s(462))}}hA();break}catch(fe){u_(n,fe)}while(!0);return wr=oa=null,N.H=u,N.A=d,mt=o,$e!==null?0:(Rt=null,tt=0,hc(),jt)}function hA(){for(;$e!==null&&!ot();)f_($e)}function f_(n){var r=jv(n.alternate,n,Nr);n.memoizedProps=n.pendingProps,r===null?Hc(n):$e=r}function d_(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=kv(o,r,r.pendingProps,r.type,void 0,tt);break;case 11:r=kv(o,r,r.pendingProps,r.type.render,r.ref,tt);break;case 5:Td(r);default:zv(o,r),r=$e=my(r,Nr),r=jv(o,r,Nr)}n.memoizedProps=n.pendingProps,r===null?Hc(n):$e=r}function vo(n,r,o,u){wr=oa=null,Td(r),lo=null,Cl=0;var d=r.return;try{if(eA(n,d,r,o,tt)){jt=1,Pc(n,pi(o,n.current)),$e=null;return}}catch(g){if(d!==null)throw $e=d,g;jt=1,Pc(n,pi(o,n.current)),$e=null;return}r.flags&32768?(ct||u===1?n=!0:fo||(tt&536870912)!==0?n=!1:(as=n=!0,(u===2||u===9||u===3||u===6)&&(u=_i.current,u!==null&&u.tag===13&&(u.flags|=16384))),m_(r,n)):Hc(r)}function Hc(n){var r=n;do{if((r.flags&32768)!==0){m_(r,as);return}n=r.return;var o=nA(r.alternate,r,Nr);if(o!==null){$e=o;return}if(r=r.sibling,r!==null){$e=r;return}$e=r=n}while(r!==null);jt===0&&(jt=5)}function m_(n,r){do{var o=iA(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);jt=6,$e=null}function p_(n,r,o,u,d,g,R,P,G){n.cancelPendingCommit=null;do Gc();while(bn!==0);if((mt&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(g=r.lanes|r.childLanes,g|=Xf,Gn(n,o,g,R,P,G),n===Rt&&($e=Rt=null,tt=0),po=r,us=n,go=o,tm=g,nm=d,s_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,pA(Ze,function(){return E_(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=N.T,N.T=null,d=O.p,O.p=2,R=mt,mt|=4;try{rA(n,r,o)}finally{mt=R,O.p=d,N.T=u}}bn=1,g_(),y_(),v_()}}function g_(){if(bn===1){bn=0;var n=us,r=po,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=N.T,N.T=null;var u=O.p;O.p=2;var d=mt;mt|=4;try{Zv(r,n);var g=vm,R=ry(n.containerInfo),P=g.focusedElem,G=g.selectionRange;if(R!==P&&P&&P.ownerDocument&&iy(P.ownerDocument.documentElement,P)){if(G!==null&&Gf(P)){var ae=G.start,fe=G.end;if(fe===void 0&&(fe=ae),"selectionStart"in P)P.selectionStart=ae,P.selectionEnd=Math.min(fe,P.value.length);else{var ge=P.ownerDocument||document,le=ge&&ge.defaultView||window;if(le.getSelection){var ue=le.getSelection(),Oe=P.textContent.length,Ie=Math.min(G.start,Oe),_t=G.end===void 0?Ie:Math.min(G.end,Oe);!ue.extend&&Ie>_t&&(R=_t,_t=Ie,Ie=R);var ee=ny(P,Ie),X=ny(P,_t);if(ee&&X&&(ue.rangeCount!==1||ue.anchorNode!==ee.node||ue.anchorOffset!==ee.offset||ue.focusNode!==X.node||ue.focusOffset!==X.offset)){var se=ge.createRange();se.setStart(ee.node,ee.offset),ue.removeAllRanges(),Ie>_t?(ue.addRange(se),ue.extend(X.node,X.offset)):(se.setEnd(X.node,X.offset),ue.addRange(se))}}}}for(ge=[],ue=P;ue=ue.parentNode;)ue.nodeType===1&&ge.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ge.length;P++){var me=ge[P];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}ih=!!ym,vm=ym=null}finally{mt=d,O.p=u,N.T=o}}n.current=r,bn=2}}function y_(){if(bn===2){bn=0;var n=us,r=po,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=N.T,N.T=null;var u=O.p;O.p=2;var d=mt;mt|=4;try{Kv(n,r.alternate,r)}finally{mt=d,O.p=u,N.T=o}}bn=3}}function v_(){if(bn===4||bn===3){bn=0,Pt();var n=us,r=po,o=go,u=s_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?bn=5:(bn=0,po=us=null,__(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(ls=null),$n(o),r=r.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Ke,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=N.T,d=O.p,O.p=2,N.T=null;try{for(var g=n.onRecoverableError,R=0;R<u.length;R++){var P=u[R];g(P.value,{componentStack:P.stack})}}finally{N.T=r,O.p=d}}(go&3)!==0&&Gc(),Yi(n),d=n.pendingLanes,(o&4194090)!==0&&(d&42)!==0?n===im?Vl++:(Vl=0,im=n):Vl=0,Ul(0)}}function __(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,gl(r)))}function Gc(n){return g_(),y_(),v_(),E_()}function E_(){if(bn!==5)return!1;var n=us,r=tm;tm=0;var o=$n(go),u=N.T,d=O.p;try{O.p=32>o?32:o,N.T=null,o=nm,nm=null;var g=us,R=go;if(bn=0,po=us=null,go=0,(mt&6)!==0)throw Error(s(331));var P=mt;if(mt|=4,i_(g.current),e_(g,g.current,R,o),mt=P,Ul(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Ke,g)}catch{}return!0}finally{O.p=d,N.T=u,__(n,r)}}function T_(n,r,o){r=pi(o,r),r=Pd(n.stateNode,r,2),n=Jr(n,r,2),n!==null&&(Ot(n,2),Yi(n))}function wt(n,r,o){if(n.tag===3)T_(n,n,o);else for(;r!==null;){if(r.tag===3){T_(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ls===null||!ls.has(u))){n=pi(o,n),o=Sv(2),u=Jr(r,o,2),u!==null&&(Rv(o,u,r,n),Ot(u,2),Yi(u));break}}r=r.return}}function om(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new oA;var d=new Set;u.set(r,d)}else d=u.get(r),d===void 0&&(d=new Set,u.set(r,d));d.has(o)||(Wd=!0,d.add(o),n=fA.bind(null,n,r,o),r.then(n,n))}function fA(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Rt===n&&(tt&o)===o&&(jt===4||jt===3&&(tt&62914560)===tt&&300>Ue()-em?(mt&2)===0&&yo(n,0):Zd|=o,mo===tt&&(mo=0)),Yi(n)}function w_(n,r){r===0&&(r=dt()),n=Za(n,r),n!==null&&(Ot(n,r),Yi(n))}function dA(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),w_(n,o)}function mA(n,r){var o=0;switch(n.tag){case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),w_(n,o)}function pA(n,r){return en(n,r)}var $c=null,_o=null,lm=!1,Qc=!1,um=!1,ma=0;function Yi(n){n!==_o&&n.next===null&&(_o===null?$c=_o=n:_o=_o.next=n),Qc=!0,lm||(lm=!0,yA())}function Ul(n,r){if(!um&&Qc){um=!0;do for(var o=!1,u=$c;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var g=0;else{var R=u.suspendedLanes,P=u.pingedLanes;g=(1<<31-St(42|n)+1)-1,g&=d&~(R&~P),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,R_(u,g))}else g=tt,g=Ge(u,u===Rt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Fe(u,g)||(o=!0,R_(u,g));u=u.next}while(o);um=!1}}function gA(){b_()}function b_(){Qc=lm=!1;var n=0;ma!==0&&(SA()&&(n=ma),ma=0);for(var r=Ue(),o=null,u=$c;u!==null;){var d=u.next,g=A_(u,r);g===0?(u.next=null,o===null?$c=d:o.next=d,d===null&&(_o=o)):(o=u,(n!==0||(g&3)!==0)&&(Qc=!0)),u=d}Ul(n)}function A_(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var R=31-St(g),P=1<<R,G=d[R];G===-1?((P&o)===0||(P&u)!==0)&&(d[R]=Ye(P,r)):G<=r&&(n.expiredLanes|=P),g&=~P}if(r=Rt,o=tt,o=Ge(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(pt===2||pt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&qt(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Fe(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&qt(u),$n(o)){case 2:case 8:o=Ct;break;case 32:o=Ze;break;case 268435456:o=ht;break;default:o=Ze}return u=S_.bind(null,n),o=en(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&qt(u),n.callbackPriority=2,n.callbackNode=null,2}function S_(n,r){if(bn!==0&&bn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Gc()&&n.callbackNode!==o)return null;var u=tt;return u=Ge(n,n===Rt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(o_(n,u,r),A_(n,Ue()),n.callbackNode!=null&&n.callbackNode===o?S_.bind(null,n):null)}function R_(n,r){if(Gc())return null;o_(n,r,!0)}function yA(){CA(function(){(mt&6)!==0?en(Tt,gA):b_()})}function cm(){return ma===0&&(ma=Pe()),ma}function C_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ba(""+n)}function I_(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function vA(n,r,o,u,d){if(r==="submit"&&o&&o.stateNode===d){var g=C_((d[Kt]||null).action),R=u.submitter;R&&(r=(r=R[Kt]||null)?C_(r.formAction):R.getAttribute("formAction"),r!==null&&(g=r,R=null));var P=new za("action","action",null,u,d);n.push({event:P,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ma!==0){var G=R?I_(d,R):new FormData(d);Nd(o,{pending:!0,data:G,method:d.method,action:g},null,G)}}else typeof g=="function"&&(P.preventDefault(),G=R?I_(d,R):new FormData(d),Nd(o,{pending:!0,data:G,method:d.method,action:g},g,G))},currentTarget:d}]})}}for(var hm=0;hm<Yf.length;hm++){var fm=Yf[hm],_A=fm.toLowerCase(),EA=fm[0].toUpperCase()+fm.slice(1);Ci(_A,"on"+EA)}Ci(oy,"onAnimationEnd"),Ci(ly,"onAnimationIteration"),Ci(uy,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(Ub,"onTransitionRun"),Ci(Lb,"onTransitionStart"),Ci(jb,"onTransitionCancel"),Ci(cy,"onTransitionEnd"),cr("onMouseEnter",["mouseout","mouseover"]),cr("onMouseLeave",["mouseout","mouseover"]),cr("onPointerEnter",["pointerout","pointerover"]),cr("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function x_(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var g=void 0;if(r)for(var R=u.length-1;0<=R;R--){var P=u[R],G=P.instance,ae=P.currentTarget;if(P=P.listener,G!==g&&d.isPropagationStopped())break e;g=P,d.currentTarget=ae;try{g(d)}catch(fe){Mc(fe)}d.currentTarget=null,g=G}else for(R=0;R<u.length;R++){if(P=u[R],G=P.instance,ae=P.currentTarget,P=P.listener,G!==g&&d.isPropagationStopped())break e;g=P,d.currentTarget=ae;try{g(d)}catch(fe){Mc(fe)}d.currentTarget=null,g=G}}}}function Qe(n,r){var o=r[Yo];o===void 0&&(o=r[Yo]=new Set);var u=n+"__bubble";o.has(u)||(N_(r,n,2,!1),o.add(u))}function dm(n,r,o){var u=0;r&&(u|=4),N_(o,n,u,r)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function mm(n){if(!n[Kc]){n[Kc]=!0,Xo.forEach(function(o){o!=="selectionchange"&&(TA.has(o)||dm(o,!1,n),dm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Kc]||(r[Kc]=!0,dm("selectionchange",!1,r))}}function N_(n,r,o,u){switch(e0(r)){case 2:var d=KA;break;case 8:d=YA;break;default:d=Im}o=d.bind(null,r,o,n),d=void 0,!di||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(r,o,{capture:!0,passive:d}):n.addEventListener(r,o,!0):d!==void 0?n.addEventListener(r,o,{passive:d}):n.addEventListener(r,o,!1)}function pm(n,r,o,u,d){var g=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var R=u.tag;if(R===3||R===4){var P=u.stateNode.containerInfo;if(P===d)break;if(R===4)for(R=u.return;R!==null;){var G=R.tag;if((G===3||G===4)&&R.stateNode.containerInfo===d)return;R=R.return}for(;P!==null;){if(R=ur(P),R===null)return;if(G=R.tag,G===5||G===6||G===26||G===27){u=g=R;continue e}P=P.parentNode}}u=u.return}Xu(function(){var ae=g,fe=fi(o),ge=[];e:{var le=hy.get(n);if(le!==void 0){var ue=za,Oe=n;switch(n){case"keypress":if(Bi(o)===0)break e;case"keydown":case"keyup":ue=Qa;break;case"focusin":Oe="focus",ue=Ha;break;case"focusout":Oe="blur",ue=Ha;break;case"beforeblur":case"afterblur":ue=Ha;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=rc;break;case oy:case ly:case uy:ue=Ga;break;case cy:ue=ac;break;case"scroll":case"scrollend":ue=Wu;break;case"wheel":ue=Ka;break;case"copy":case"cut":case"paste":ue=$a;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=ll;break;case"toggle":case"beforetoggle":ue=lc}var Ie=(r&4)!==0,_t=!Ie&&(n==="scroll"||n==="scrollend"),ee=Ie?le!==null?le+"Capture":null:le;Ie=[];for(var X=ae,se;X!==null;){var me=X;if(se=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||se===null||ee===null||(me=Qs(X,ee),me!=null&&Ie.push(jl(X,me,se))),_t)break;X=X.return}0<Ie.length&&(le=new ue(le,Oe,null,o,fe),ge.push({event:le,listeners:Ie}))}}if((r&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",le&&o!==dr&&(Oe=o.relatedTarget||o.fromElement)&&(ur(Oe)||Oe[ci]))break e;if((ue||le)&&(le=fe.window===fe?fe:(le=fe.ownerDocument)?le.defaultView||le.parentWindow:window,ue?(Oe=o.relatedTarget||o.toElement,ue=ae,Oe=Oe?ur(Oe):null,Oe!==null&&(_t=l(Oe),Ie=Oe.tag,Oe!==_t||Ie!==5&&Ie!==27&&Ie!==6)&&(Oe=null)):(ue=null,Oe=ae),ue!==Oe)){if(Ie=mi,me="onMouseLeave",ee="onMouseEnter",X="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=ll,me="onPointerLeave",ee="onPointerEnter",X="pointer"),_t=ue==null?le:Vi(ue),se=Oe==null?le:Vi(Oe),le=new Ie(me,X+"leave",ue,o,fe),le.target=_t,le.relatedTarget=se,me=null,ur(fe)===ae&&(Ie=new Ie(ee,X+"enter",Oe,o,fe),Ie.target=se,Ie.relatedTarget=_t,me=Ie),_t=me,ue&&Oe)t:{for(Ie=ue,ee=Oe,X=0,se=Ie;se;se=Eo(se))X++;for(se=0,me=ee;me;me=Eo(me))se++;for(;0<X-se;)Ie=Eo(Ie),X--;for(;0<se-X;)ee=Eo(ee),se--;for(;X--;){if(Ie===ee||ee!==null&&Ie===ee.alternate)break t;Ie=Eo(Ie),ee=Eo(ee)}Ie=null}else Ie=null;ue!==null&&D_(ge,le,ue,Ie,!1),Oe!==null&&_t!==null&&D_(ge,_t,Oe,Ie,!0)}}e:{if(le=ae?Vi(ae):window,ue=le.nodeName&&le.nodeName.toLowerCase(),ue==="select"||ue==="input"&&le.type==="file")var we=Xg;else if(an(le))if(Wg)we=Mb;else{we=Ob;var He=Db}else ue=le.nodeName,!ue||ue.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?ae&&tl(ae.elementType)&&(we=Xg):we=kb;if(we&&(we=we(n,ae))){vr(ge,we,o,fe);break e}He&&He(n,le,ae),n==="focusout"&&ae&&le.type==="number"&&ae.memoizedProps.value!=null&&Kr(le,"number",le.value)}switch(He=ae?Vi(ae):window,n){case"focusin":(an(He)||He.contentEditable==="true")&&(Ya=He,$f=ae,hl=null);break;case"focusout":hl=$f=Ya=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,sy(ge,o,fe);break;case"selectionchange":if(Vb)break;case"keydown":case"keyup":sy(ge,o,fe)}var Ae;if(Fi)e:{switch(n){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Je?ce(n,o)&&(xe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(xe="onCompositionStart");xe&&(S&&o.locale!=="ko"&&(Je||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Je&&(Ae=il()):(ji=fe,Yr="value"in ji?ji.value:ji.textContent,Je=!0)),He=Yc(ae,xe),0<He.length&&(xe=new al(xe,n,null,o,fe),ge.push({event:xe,listeners:He}),Ae?xe.data=Ae:(Ae=ve(o),Ae!==null&&(xe.data=Ae)))),(Ae=T?sn(n,o):et(n,o))&&(xe=Yc(ae,"onBeforeInput"),0<xe.length&&(He=new al("onBeforeInput","beforeinput",null,o,fe),ge.push({event:He,listeners:xe}),He.data=Ae)),vA(ge,n,ae,o,fe)}x_(ge,r)})}function jl(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Yc(n,r){for(var o=r+"Capture",u=[];n!==null;){var d=n,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=Qs(n,o),d!=null&&u.unshift(jl(n,d,g)),d=Qs(n,r),d!=null&&u.push(jl(n,d,g))),n.tag===3)return u;n=n.return}return[]}function Eo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function D_(n,r,o,u,d){for(var g=r._reactName,R=[];o!==null&&o!==u;){var P=o,G=P.alternate,ae=P.stateNode;if(P=P.tag,G!==null&&G===u)break;P!==5&&P!==26&&P!==27||ae===null||(G=ae,d?(ae=Qs(o,g),ae!=null&&R.unshift(jl(o,ae,G))):d||(ae=Qs(o,g),ae!=null&&R.push(jl(o,ae,G)))),o=o.return}R.length!==0&&n.push({event:r,listeners:R})}var wA=/\r\n?/g,bA=/\u0000|\uFFFD/g;function O_(n){return(typeof n=="string"?n:""+n).replace(wA,`
`).replace(bA,"")}function k_(n,r){return r=O_(r),O_(n)===r}function Xc(){}function vt(n,r,o,u,d,g){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||hi(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&hi(n,""+u);break;case"className":Ui(n,"class",u);break;case"tabIndex":Ui(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ui(n,o,u);break;case"style":el(n,u,g);break;case"data":if(r!=="object"){Ui(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ba(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&vt(n,r,"name",d.name,d,null),vt(n,r,"formEncType",d.formEncType,d,null),vt(n,r,"formMethod",d.formMethod,d,null),vt(n,r,"formTarget",d.formTarget,d,null)):(vt(n,r,"encType",d.encType,d,null),vt(n,r,"method",d.method,d,null),vt(n,r,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ba(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Xc);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ba(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Qr(n,"popover",u);break;case"xlinkActuate":En(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":En(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":En(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":En(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":En(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":En(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":En(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":En(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":En(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=jf.get(o)||o,Qr(n,o,u))}}function gm(n,r,o,u,d,g){switch(o){case"style":el(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?hi(n,u):(typeof u=="number"||typeof u=="bigint")&&hi(n,""+u);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pa.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),r=o.slice(2,d?o.length-7:void 0),g=n[Kt]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(r,g,d),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Qr(n,o,u)}}}function An(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var u=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var R=o[g];if(R!=null)switch(g){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:vt(n,r,g,R,o,null)}}d&&vt(n,r,"srcSet",o.srcSet,o,null),u&&vt(n,r,"src",o.src,o,null);return;case"input":Qe("invalid",n);var P=g=R=d=null,G=null,ae=null;for(u in o)if(o.hasOwnProperty(u)){var fe=o[u];if(fe!=null)switch(u){case"name":d=fe;break;case"type":R=fe;break;case"checked":G=fe;break;case"defaultChecked":ae=fe;break;case"value":g=fe;break;case"defaultValue":P=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,r));break;default:vt(n,r,u,fe,o,null)}}Hs(n,g,P,G,ae,R,d,!1),ja(n);return;case"select":Qe("invalid",n),u=R=g=null;for(d in o)if(o.hasOwnProperty(d)&&(P=o[d],P!=null))switch(d){case"value":g=P;break;case"defaultValue":R=P;break;case"multiple":u=P;default:vt(n,r,d,P,o,null)}r=g,o=R,n.multiple=!!u,r!=null?fr(n,!!u,r,!1):o!=null&&fr(n,!!u,o,!0);return;case"textarea":Qe("invalid",n),g=d=u=null;for(R in o)if(o.hasOwnProperty(R)&&(P=o[R],P!=null))switch(R){case"value":u=P;break;case"defaultValue":d=P;break;case"children":g=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:vt(n,r,R,P,o,null)}Gs(n,u,d,g),ja(n);return;case"option":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:vt(n,r,G,u,o,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(u=0;u<Ll.length;u++)Qe(Ll[u],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in o)if(o.hasOwnProperty(ae)&&(u=o[ae],u!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:vt(n,r,ae,u,o,null)}return;default:if(tl(r)){for(fe in o)o.hasOwnProperty(fe)&&(u=o[fe],u!==void 0&&gm(n,r,fe,u,o,void 0));return}}for(P in o)o.hasOwnProperty(P)&&(u=o[P],u!=null&&vt(n,r,P,u,o,null))}function AA(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,R=null,P=null,G=null,ae=null,fe=null;for(ue in o){var ge=o[ue];if(o.hasOwnProperty(ue)&&ge!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":G=ge;default:u.hasOwnProperty(ue)||vt(n,r,ue,null,u,ge)}}for(var le in u){var ue=u[le];if(ge=o[le],u.hasOwnProperty(le)&&(ue!=null||ge!=null))switch(le){case"type":g=ue;break;case"name":d=ue;break;case"checked":ae=ue;break;case"defaultChecked":fe=ue;break;case"value":R=ue;break;case"defaultValue":P=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,r));break;default:ue!==ge&&vt(n,r,le,ue,u,ge)}}Zn(n,R,P,G,ae,fe,g,d);return;case"select":ue=R=P=le=null;for(g in o)if(G=o[g],o.hasOwnProperty(g)&&G!=null)switch(g){case"value":break;case"multiple":ue=G;default:u.hasOwnProperty(g)||vt(n,r,g,null,u,G)}for(d in u)if(g=u[d],G=o[d],u.hasOwnProperty(d)&&(g!=null||G!=null))switch(d){case"value":le=g;break;case"defaultValue":P=g;break;case"multiple":R=g;default:g!==G&&vt(n,r,d,g,u,G)}r=P,o=R,u=ue,le!=null?fr(n,!!o,le,!1):!!u!=!!o&&(r!=null?fr(n,!!o,r,!0):fr(n,!!o,o?[]:"",!1));return;case"textarea":ue=le=null;for(P in o)if(d=o[P],o.hasOwnProperty(P)&&d!=null&&!u.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:vt(n,r,P,null,u,d)}for(R in u)if(d=u[R],g=o[R],u.hasOwnProperty(R)&&(d!=null||g!=null))switch(R){case"value":le=d;break;case"defaultValue":ue=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==g&&vt(n,r,R,d,u,g)}gt(n,le,ue);return;case"option":for(var Oe in o)if(le=o[Oe],o.hasOwnProperty(Oe)&&le!=null&&!u.hasOwnProperty(Oe))switch(Oe){case"selected":n.selected=!1;break;default:vt(n,r,Oe,null,u,le)}for(G in u)if(le=u[G],ue=o[G],u.hasOwnProperty(G)&&le!==ue&&(le!=null||ue!=null))switch(G){case"selected":n.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:vt(n,r,G,le,u,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)le=o[Ie],o.hasOwnProperty(Ie)&&le!=null&&!u.hasOwnProperty(Ie)&&vt(n,r,Ie,null,u,le);for(ae in u)if(le=u[ae],ue=o[ae],u.hasOwnProperty(ae)&&le!==ue&&(le!=null||ue!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,r));break;default:vt(n,r,ae,le,u,ue)}return;default:if(tl(r)){for(var _t in o)le=o[_t],o.hasOwnProperty(_t)&&le!==void 0&&!u.hasOwnProperty(_t)&&gm(n,r,_t,void 0,u,le);for(fe in u)le=u[fe],ue=o[fe],!u.hasOwnProperty(fe)||le===ue||le===void 0&&ue===void 0||gm(n,r,fe,le,u,ue);return}}for(var ee in o)le=o[ee],o.hasOwnProperty(ee)&&le!=null&&!u.hasOwnProperty(ee)&&vt(n,r,ee,null,u,le);for(ge in u)le=u[ge],ue=o[ge],!u.hasOwnProperty(ge)||le===ue||le==null&&ue==null||vt(n,r,ge,le,u,ue)}var ym=null,vm=null;function Wc(n){return n.nodeType===9?n:n.ownerDocument}function M_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function P_(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function _m(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Em=null;function SA(){var n=window.event;return n&&n.type==="popstate"?n===Em?!1:(Em=n,!0):(Em=null,!1)}var V_=typeof setTimeout=="function"?setTimeout:void 0,RA=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,CA=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(n){return U_.resolve(null).then(n).catch(IA)}:V_;function IA(n){setTimeout(function(){throw n})}function hs(n){return n==="head"}function L_(n,r){var o=r,u=0,d=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var R=n.ownerDocument;if(o&1&&Bl(R.documentElement),o&2&&Bl(R.body),o&4)for(o=R.head,Bl(o),R=o.firstChild;R;){var P=R.nextSibling,G=R.nodeName;R[Bs]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&R.rel.toLowerCase()==="stylesheet"||o.removeChild(R),R=P}}if(d===0){n.removeChild(g),Kl(r);return}d--}else o==="$"||o==="$?"||o==="$!"?d++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Kl(r)}function Tm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Tm(o),$r(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function xA(n,r,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Bs])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=xi(n.nextSibling),n===null)break}return null}function NA(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=xi(n.nextSibling),n===null))return null;return n}function wm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function DA(n,r){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function xi(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var bm=null;function j_(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}function B_(n,r,o){switch(r=Wc(o),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Bl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);$r(n)}var Ti=new Map,z_=new Set;function Zc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Dr=O.d;O.d={f:OA,r:kA,D:MA,C:PA,L:VA,m:UA,X:jA,S:LA,M:BA};function OA(){var n=Dr.f(),r=Fc();return n||r}function kA(n){var r=Pi(n);r!==null&&r.tag===5&&r.type==="form"?ov(r):Dr.r(n)}var To=typeof document>"u"?null:document;function q_(n,r,o){var u=To;if(u&&typeof r=="string"&&r){var d=Yt(r);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),z_.has(d)||(z_.add(d),n={rel:n,crossOrigin:o,href:r},u.querySelector(d)===null&&(r=u.createElement("link"),An(r,"link",n),Ft(r),u.head.appendChild(r)))}}function MA(n){Dr.D(n),q_("dns-prefetch",n,null)}function PA(n,r){Dr.C(n,r),q_("preconnect",n,r)}function VA(n,r,o){Dr.L(n,r,o);var u=To;if(u&&n&&r){var d='link[rel="preload"][as="'+Yt(r)+'"]';r==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Yt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Yt(o.imageSizes)+'"]')):d+='[href="'+Yt(n)+'"]';var g=d;switch(r){case"style":g=wo(n);break;case"script":g=bo(n)}Ti.has(g)||(n=y({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Ti.set(g,n),u.querySelector(d)!==null||r==="style"&&u.querySelector(zl(g))||r==="script"&&u.querySelector(ql(g))||(r=u.createElement("link"),An(r,"link",n),Ft(r),u.head.appendChild(r)))}}function UA(n,r){Dr.m(n,r);var o=To;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Yt(u)+'"][href="'+Yt(n)+'"]',g=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=bo(n)}if(!Ti.has(g)&&(n=y({rel:"modulepreload",href:n},r),Ti.set(g,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ql(g)))return}u=o.createElement("link"),An(u,"link",n),Ft(u),o.head.appendChild(u)}}}function LA(n,r,o){Dr.S(n,r,o);var u=To;if(u&&n){var d=Ln(u).hoistableStyles,g=wo(n);r=r||"default";var R=d.get(g);if(!R){var P={loading:0,preload:null};if(R=u.querySelector(zl(g)))P.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Ti.get(g))&&Am(n,o);var G=R=u.createElement("link");Ft(G),An(G,"link",n),G._p=new Promise(function(ae,fe){G.onload=ae,G.onerror=fe}),G.addEventListener("load",function(){P.loading|=1}),G.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Jc(R,r,u)}R={type:"stylesheet",instance:R,count:1,state:P},d.set(g,R)}}}function jA(n,r){Dr.X(n,r);var o=To;if(o&&n){var u=Ln(o).hoistableScripts,d=bo(n),g=u.get(d);g||(g=o.querySelector(ql(d)),g||(n=y({src:n,async:!0},r),(r=Ti.get(d))&&Sm(n,r),g=o.createElement("script"),Ft(g),An(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function BA(n,r){Dr.M(n,r);var o=To;if(o&&n){var u=Ln(o).hoistableScripts,d=bo(n),g=u.get(d);g||(g=o.querySelector(ql(d)),g||(n=y({src:n,async:!0,type:"module"},r),(r=Ti.get(d))&&Sm(n,r),g=o.createElement("script"),Ft(g),An(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(d,g))}}function F_(n,r,o,u){var d=(d=de.current)?Zc(d):null;if(!d)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=wo(o.href),o=Ln(d).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=wo(o.href);var g=Ln(d).hoistableStyles,R=g.get(n);if(R||(d=d.ownerDocument||d,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,R),(g=d.querySelector(zl(n)))&&!g._p&&(R.instance=g,R.state.loading=5),Ti.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ti.set(n,o),g||zA(d,n,o,R.state))),r&&u===null)throw Error(s(528,""));return R}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=bo(o),o=Ln(d).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function wo(n){return'href="'+Yt(n)+'"'}function zl(n){return'link[rel="stylesheet"]['+n+"]"}function H_(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function zA(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),An(r,"link",o),Ft(r),n.head.appendChild(r))}function bo(n){return'[src="'+Yt(n)+'"]'}function ql(n){return"script[async]"+n}function G_(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+Yt(o.href)+'"]');if(u)return r.instance=u,Ft(u),u;var d=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ft(u),An(u,"style",d),Jc(u,o.precedence,n),r.instance=u;case"stylesheet":d=wo(o.href);var g=n.querySelector(zl(d));if(g)return r.state.loading|=4,r.instance=g,Ft(g),g;u=H_(o),(d=Ti.get(d))&&Am(u,d),g=(n.ownerDocument||n).createElement("link"),Ft(g);var R=g;return R._p=new Promise(function(P,G){R.onload=P,R.onerror=G}),An(g,"link",u),r.state.loading|=4,Jc(g,o.precedence,n),r.instance=g;case"script":return g=bo(o.src),(d=n.querySelector(ql(g)))?(r.instance=d,Ft(d),d):(u=o,(d=Ti.get(g))&&(u=y({},o),Sm(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Ft(d),An(d,"link",u),n.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Jc(u,o.precedence,n));return r.instance}function Jc(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,g=d,R=0;R<u.length;R++){var P=u[R];if(P.dataset.precedence===r)g=P;else if(g!==d)break}g?g.parentNode.insertBefore(n,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Am(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Sm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var eh=null;function $_(n,r,o){if(eh===null){var u=new Map,d=eh=new Map;d.set(o,u)}else d=eh,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var g=o[d];if(!(g[Bs]||g[rn]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var R=g.getAttribute(r)||"";R=n+R;var P=u.get(R);P?P.push(g):u.set(R,[g])}}return u}function Q_(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function qA(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function K_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Fl=null;function FA(){}function HA(n,r,o){if(Fl===null)throw Error(s(475));var u=Fl;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=wo(o.href),g=n.querySelector(zl(d));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=th.bind(u),n.then(u,u)),r.state.loading|=4,r.instance=g,Ft(g);return}g=n.ownerDocument||n,o=H_(o),(d=Ti.get(d))&&Am(o,d),g=g.createElement("link"),Ft(g);var R=g;R._p=new Promise(function(P,G){R.onload=P,R.onerror=G}),An(g,"link",o),r.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=th.bind(u),n.addEventListener("load",r),n.addEventListener("error",r))}}function GA(){if(Fl===null)throw Error(s(475));var n=Fl;return n.stylesheets&&n.count===0&&Rm(n,n.stylesheets),0<n.count?function(r){var o=setTimeout(function(){if(n.stylesheets&&Rm(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(o)}}:null}function th(){if(this.count--,this.count===0){if(this.stylesheets)Rm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var nh=null;function Rm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,nh=new Map,r.forEach($A,n),nh=null,th.call(n))}function $A(n,r){if(!(r.state.loading&4)){var o=nh.get(n);if(o)var u=o.get(null);else{o=new Map,nh.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var R=d[g];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(o.set(R.dataset.precedence,R),u=R)}u&&o.set(null,u)}d=r.instance,R=d.getAttribute("data-precedence"),g=o.get(R)||u,g===u&&o.set(null,d),o.set(R,d),this.count++,u=th.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),g?g.parentNode.insertBefore(d,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),r.state.loading|=4}}var Hl={$$typeof:F,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function QA(n,r,o,u,d,g,R,P){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hn(0),this.hiddenUpdates=hn(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Y_(n,r,o,u,d,g,R,P,G,ae,fe,ge){return n=new QA(n,r,o,R,P,G,ae,ge),r=1,g===!0&&(r|=24),g=ei(3,null,null,r),n.current=g,g.stateNode=n,r=od(),r.refCount++,n.pooledCache=r,r.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:r},hd(g),n}function X_(n){return n?(n=Ja,n):Ja}function W_(n,r,o,u,d,g){d=X_(d),u.context===null?u.context=d:u.pendingContext=d,u=Zr(r),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Jr(n,u,r),o!==null&&(si(o,n,r),El(o,n,r))}function Z_(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Cm(n,r){Z_(n,r),(n=n.alternate)&&Z_(n,r)}function J_(n){if(n.tag===13){var r=Za(n,67108864);r!==null&&si(r,n,67108864),Cm(n,67108864)}}var ih=!0;function KA(n,r,o,u){var d=N.T;N.T=null;var g=O.p;try{O.p=2,Im(n,r,o,u)}finally{O.p=g,N.T=d}}function YA(n,r,o,u){var d=N.T;N.T=null;var g=O.p;try{O.p=8,Im(n,r,o,u)}finally{O.p=g,N.T=d}}function Im(n,r,o,u){if(ih){var d=xm(u);if(d===null)pm(n,r,u,rh,o),t0(n,u);else if(WA(d,n,r,o,u))u.stopPropagation();else if(t0(n,u),r&4&&-1<XA.indexOf(n)){for(;d!==null;){var g=Pi(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var R=Me(g.pendingLanes);if(R!==0){var P=g;for(P.pendingLanes|=2,P.entangledLanes|=2;R;){var G=1<<31-St(R);P.entanglements[1]|=G,R&=~G}Yi(g),(mt&6)===0&&(zc=Ue()+500,Ul(0))}}break;case 13:P=Za(g,2),P!==null&&si(P,g,2),Fc(),Cm(g,2)}if(g=xm(u),g===null&&pm(n,r,u,rh,o),g===d)break;d=g}d!==null&&u.stopPropagation()}else pm(n,r,u,null,o)}}function xm(n){return n=fi(n),Nm(n)}var rh=null;function Nm(n){if(rh=null,n=ur(n),n!==null){var r=l(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=c(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return rh=n,null}function e0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case Tt:return 2;case Ct:return 8;case Ze:case tn:return 32;case ht:return 268435456;default:return 32}default:return 32}}var Dm=!1,fs=null,ds=null,ms=null,Gl=new Map,$l=new Map,ps=[],XA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t0(n,r){switch(n){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":Gl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(r.pointerId)}}function Ql(n,r,o,u,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[d]},r!==null&&(r=Pi(r),r!==null&&J_(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function WA(n,r,o,u,d){switch(r){case"focusin":return fs=Ql(fs,n,r,o,u,d),!0;case"dragenter":return ds=Ql(ds,n,r,o,u,d),!0;case"mouseover":return ms=Ql(ms,n,r,o,u,d),!0;case"pointerover":var g=d.pointerId;return Gl.set(g,Ql(Gl.get(g)||null,n,r,o,u,d)),!0;case"gotpointercapture":return g=d.pointerId,$l.set(g,Ql($l.get(g)||null,n,r,o,u,d)),!0}return!1}function n0(n){var r=ur(n.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){n.blockedOn=r,Fu(n.priority,function(){if(o.tag===13){var u=ri();u=Ai(u);var d=Za(o,u);d!==null&&si(d,o,u),Cm(o,u)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function sh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=xm(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);dr=u,o.target.dispatchEvent(u),dr=null}else return r=Pi(o),r!==null&&J_(r),n.blockedOn=o,!1;r.shift()}return!0}function i0(n,r,o){sh(n)&&o.delete(r)}function ZA(){Dm=!1,fs!==null&&sh(fs)&&(fs=null),ds!==null&&sh(ds)&&(ds=null),ms!==null&&sh(ms)&&(ms=null),Gl.forEach(i0),$l.forEach(i0)}function ah(n,r){n.blockedOn===r&&(n.blockedOn=null,Dm||(Dm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ZA)))}var oh=null;function r0(n){oh!==n&&(oh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){oh===n&&(oh=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],d=n[r+2];if(typeof u!="function"){if(Nm(u||o)===null)continue;break}var g=Pi(o);g!==null&&(n.splice(r,3),r-=3,Nd(g,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Kl(n){function r(G){return ah(G,n)}fs!==null&&ah(fs,n),ds!==null&&ah(ds,n),ms!==null&&ah(ms,n),Gl.forEach(r),$l.forEach(r);for(var o=0;o<ps.length;o++){var u=ps[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ps.length&&(o=ps[0],o.blockedOn===null);)n0(o),o.blockedOn===null&&ps.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],g=o[u+1],R=d[Kt]||null;if(typeof g=="function")R||r0(o);else if(R){var P=null;if(g&&g.hasAttribute("formAction")){if(d=g,R=g[Kt]||null)P=R.formAction;else if(Nm(d)!==null)continue}else P=R.action;typeof P=="function"?o[u+1]=P:(o.splice(u,3),u-=3),r0(o)}}}function Om(n){this._internalRoot=n}lh.prototype.render=Om.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=ri();W_(o,u,n,r,null,null)},lh.prototype.unmount=Om.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;W_(n.current,2,null,n,null,null),Fc(),r[ci]=null}};function lh(n){this._internalRoot=n}lh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Dn();n={blockedOn:null,target:n,priority:r};for(var o=0;o<ps.length&&r!==0&&r<ps[o].priority;o++);ps.splice(o,0,n),o===0&&n0(n)}};var s0=e.version;if(s0!=="19.1.0")throw Error(s(527,s0,"19.1.0"));O.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=m(r),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var JA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uh.isDisabled&&uh.supportsFiber)try{Ke=uh.inject(JA),qe=uh}catch{}}return Xl.createRoot=function(n,r){if(!a(n))throw Error(s(299));var o=!1,u="",d=Tv,g=wv,R=bv,P=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(R=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(P=r.unstable_transitionCallbacks)),r=Y_(n,1,!1,null,null,o,u,d,g,R,P,null),n[ci]=r.current,mm(n),new Om(r)},Xl.hydrateRoot=function(n,r,o){if(!a(n))throw Error(s(299));var u=!1,d="",g=Tv,R=wv,P=bv,G=null,ae=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(R=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(G=o.unstable_transitionCallbacks),o.formState!==void 0&&(ae=o.formState)),r=Y_(n,1,!0,r,o??null,u,d,g,R,P,G,ae),r.context=X_(null),o=r.current,u=ri(),u=Ai(u),d=Zr(u),d.callback=null,Jr(o,d,u),o=u,r.current.lanes=o,Ot(r,o),Yi(r),n[ci]=r.current,mm(n),new lh(r)},Xl.version="19.1.0",Xl}var p0;function c2(){if(p0)return Pm.exports;p0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Pm.exports=u2(),Pm.exports}var h2=c2();const f2=uE(h2);var Wl={},g0;function d2(){if(g0)return Wl;g0=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.parse=c,Wl.serialize=p;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function c(v,A){const C=new l,V=v.length;if(V<2)return C;const j=(A==null?void 0:A.decode)||y;let B=0;do{const H=v.indexOf("=",B);if(H===-1)break;const F=v.indexOf(";",B),q=F===-1?V:F;if(H>q){B=v.lastIndexOf(";",H-1)+1;continue}const $=f(v,B,H),z=m(v,H,$),M=v.slice($,z);if(C[M]===void 0){let w=f(v,H+1,q),b=m(v,q,w);const I=j(v.slice(w,b));C[M]=I}B=q+1}while(B<V);return C}function f(v,A,C){do{const V=v.charCodeAt(A);if(V!==32&&V!==9)return A}while(++A<C);return C}function m(v,A,C){for(;A>C;){const V=v.charCodeAt(--A);if(V!==32&&V!==9)return A+1}return C}function p(v,A,C){const V=(C==null?void 0:C.encode)||encodeURIComponent;if(!i.test(v))throw new TypeError(`argument name is invalid: ${v}`);const j=V(A);if(!e.test(j))throw new TypeError(`argument val is invalid: ${A}`);let B=v+"="+j;if(!C)return B;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);B+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);B+="; Domain="+C.domain}if(C.path){if(!s.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);B+="; Path="+C.path}if(C.expires){if(!_(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);B+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(B+="; HttpOnly"),C.secure&&(B+="; Secure"),C.partitioned&&(B+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":B+="; Priority=Low";break;case"medium":B+="; Priority=Medium";break;case"high":B+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":B+="; SameSite=Strict";break;case"lax":B+="; SameSite=Lax";break;case"none":B+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return B}function y(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function _(v){return a.call(v)==="[object Date]"}return Wl}d2();var y0="popstate";function m2(i={}){function e(a,l){let{pathname:c="/",search:f="",hash:m=""}=xa(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),np("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");f=p===-1?m:m.slice(0,p)}return f+"#"+(typeof l=="string"?l:pu(l))}function s(a,l){wi(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return g2(e,t,s,i)}function Nt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function wi(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p2(){return Math.random().toString(36).substring(2,10)}function v0(i,e){return{usr:i.state,key:i.key,idx:e}}function np(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?xa(e):e,state:t,key:e&&e.key||s||p2()}}function pu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function xa(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function g2(i,e,t,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,f="POP",m=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function _(){f="POP";let j=y(),B=j==null?null:j-p;p=j,m&&m({action:f,location:V.location,delta:B})}function v(j,B){f="PUSH";let H=np(V.location,j,B);t&&t(H,j),p=y()+1;let F=v0(H,p),q=V.createHref(H);try{c.pushState(F,"",q)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;a.location.assign(q)}l&&m&&m({action:f,location:V.location,delta:1})}function A(j,B){f="REPLACE";let H=np(V.location,j,B);t&&t(H,j),p=y();let F=v0(H,p),q=V.createHref(H);c.replaceState(F,"",q),l&&m&&m({action:f,location:V.location,delta:0})}function C(j){return y2(j)}let V={get action(){return f},get location(){return i(a,c)},listen(j){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(y0,_),m=j,()=>{a.removeEventListener(y0,_),m=null}},createHref(j){return e(a,j)},createURL:C,encodeLocation(j){let B=C(j);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:v,replace:A,go(j){return c.go(j)}};return V}function y2(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Nt(t,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:pu(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function cE(i,e,t="/"){return v2(i,e,t,!1)}function v2(i,e,t,s){let a=typeof e=="string"?xa(e):e,l=Lr(a.pathname||"/",t);if(l==null)return null;let c=hE(i);_2(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let p=N2(l);f=I2(c[m],p,s)}return f}function hE(i,e=[],t=[],s=""){let a=(l,c,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(Nt(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length));let p=Pr([s,m.relativePath]),y=t.concat(m);l.children&&l.children.length>0&&(Nt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),hE(l.children,e,y,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:R2(p,l.index),routesMeta:y})};return i.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,c);else for(let m of fE(l.path))a(l,c,m)}),e}function fE(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=fE(s.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...c),f.map(m=>i.startsWith("/")&&m===""?"/":m)}function _2(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:C2(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var E2=/^:[\w-]+$/,T2=3,w2=2,b2=1,A2=10,S2=-2,_0=i=>i==="*";function R2(i,e){let t=i.split("/"),s=t.length;return t.some(_0)&&(s+=S2),e&&(s+=w2),t.filter(a=>!_0(a)).reduce((a,l)=>a+(E2.test(l)?T2:l===""?b2:A2),s)}function C2(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function I2(i,e,t=!1){let{routesMeta:s}=i,a={},l="/",c=[];for(let f=0;f<s.length;++f){let m=s[f],p=f===s.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=Oh({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),v=m.route;if(!_&&p&&t&&!s[s.length-1].route.index&&(_=Oh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!_)return null;Object.assign(a,_.params),c.push({params:a,pathname:Pr([l,_.pathname]),pathnameBase:M2(Pr([l,_.pathnameBase])),route:v}),_.pathnameBase!=="/"&&(l=Pr([l,_.pathnameBase]))}return c}function Oh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=x2(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:s.reduce((p,{paramName:y,isOptional:_},v)=>{if(y==="*"){let C=f[v]||"";c=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const A=f[v];return _&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:i}}function x2(i,e=!1,t=!0){wi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(s.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function N2(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wi(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Lr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function D2(i,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof i=="string"?xa(i):i;return{pathname:t?t.startsWith("/")?t:O2(t,e):e,search:P2(s),hash:V2(a)}}function O2(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function jm(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k2(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function kp(i){let e=k2(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Mp(i,e,t,s=!1){let a;typeof i=="string"?a=xa(i):(a={...i},Nt(!a.pathname||!a.pathname.includes("?"),jm("?","pathname","search",a)),Nt(!a.pathname||!a.pathname.includes("#"),jm("#","pathname","hash",a)),Nt(!a.search||!a.search.includes("#"),jm("#","search","hash",a)));let l=i===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=t;else{let _=e.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),_-=1;a.pathname=v.join("/")}f=_>=0?e[_]:"/"}let m=D2(a,f),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var Pr=i=>i.join("/").replace(/\/\/+/g,"/"),M2=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),P2=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,V2=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function U2(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var dE=["POST","PUT","PATCH","DELETE"];new Set(dE);var L2=["GET",...dE];new Set(L2);var qo=W.createContext(null);qo.displayName="DataRouter";var lf=W.createContext(null);lf.displayName="DataRouterState";var mE=W.createContext({isTransitioning:!1});mE.displayName="ViewTransition";var j2=W.createContext(new Map);j2.displayName="Fetchers";var B2=W.createContext(null);B2.displayName="Await";var Mi=W.createContext(null);Mi.displayName="Navigation";var Su=W.createContext(null);Su.displayName="Location";var ar=W.createContext({outlet:null,matches:[],isDataRoute:!1});ar.displayName="Route";var Pp=W.createContext(null);Pp.displayName="RouteError";function z2(i,{relative:e}={}){Nt(Fo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=W.useContext(Mi),{hash:a,pathname:l,search:c}=Ru(i,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Pr([t,l])),s.createHref({pathname:f,search:c,hash:a})}function Fo(){return W.useContext(Su)!=null}function Vs(){return Nt(Fo(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(Su).location}var pE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gE(i){W.useContext(Mi).static||W.useLayoutEffect(i)}function Fr(){let{isDataRoute:i}=W.useContext(ar);return i?eS():q2()}function q2(){Nt(Fo(),"useNavigate() may be used only in the context of a <Router> component.");let i=W.useContext(qo),{basename:e,navigator:t}=W.useContext(Mi),{matches:s}=W.useContext(ar),{pathname:a}=Vs(),l=JSON.stringify(kp(s)),c=W.useRef(!1);return gE(()=>{c.current=!0}),W.useCallback((m,p={})=>{if(wi(c.current,pE),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=Mp(m,JSON.parse(l),a,p.relative==="path");i==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Pr([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,i])}W.createContext(null);function Ru(i,{relative:e}={}){let{matches:t}=W.useContext(ar),{pathname:s}=Vs(),a=JSON.stringify(kp(t));return W.useMemo(()=>Mp(i,JSON.parse(a),s,e==="path"),[i,a,s,e])}function F2(i,e){return yE(i,e)}function yE(i,e,t,s){var B;Nt(Fo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=W.useContext(Mi),{matches:l}=W.useContext(ar),c=l[l.length-1],f=c?c.params:{},m=c?c.pathname:"/",p=c?c.pathnameBase:"/",y=c&&c.route;{let H=y&&y.path||"";vE(m,!y||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let _=Vs(),v;if(e){let H=typeof e=="string"?xa(e):e;Nt(p==="/"||((B=H.pathname)==null?void 0:B.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${H.pathname}" was given in the \`location\` prop.`),v=H}else v=_;let A=v.pathname||"/",C=A;if(p!=="/"){let H=p.replace(/^\//,"").split("/");C="/"+A.replace(/^\//,"").split("/").slice(H.length).join("/")}let V=cE(i,{pathname:C});wi(y||V!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),wi(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=K2(V&&V.map(H=>Object.assign({},H,{params:Object.assign({},f,H.params),pathname:Pr([p,a.encodeLocation?a.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?p:Pr([p,a.encodeLocation?a.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),l,t,s);return e&&j?W.createElement(Su.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},j):j}function H2(){let i=J2(),e=U2(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=W.createElement(W.Fragment,null,W.createElement("p",null,"💿 Hey developer 👋"),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:l},"ErrorBoundary")," or"," ",W.createElement("code",{style:l},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:a},t):null,c)}var G2=W.createElement(H2,null),$2=class extends W.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?W.createElement(ar.Provider,{value:this.props.routeContext},W.createElement(Pp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Q2({routeContext:i,match:e,children:t}){let s=W.useContext(qo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(ar.Provider,{value:i},t)}function K2(i,e=[],t=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);Nt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,f=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=m),p.route.id){let{loaderData:y,errors:_}=t,v=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||v){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,p,y)=>{let _,v=!1,A=null,C=null;t&&(_=l&&p.route.id?l[p.route.id]:void 0,A=p.route.errorElement||G2,c&&(f<0&&y===0?(vE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,C=null):f===y&&(v=!0,C=p.route.hydrateFallbackElement||null)));let V=e.concat(a.slice(0,y+1)),j=()=>{let B;return _?B=A:v?B=C:p.route.Component?B=W.createElement(p.route.Component,null):p.route.element?B=p.route.element:B=m,W.createElement(Q2,{match:p,routeContext:{outlet:m,matches:V,isDataRoute:t!=null},children:B})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?W.createElement($2,{location:t.location,revalidation:t.revalidation,component:A,error:_,children:j(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):j()},null)}function Vp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Y2(i){let e=W.useContext(qo);return Nt(e,Vp(i)),e}function X2(i){let e=W.useContext(lf);return Nt(e,Vp(i)),e}function W2(i){let e=W.useContext(ar);return Nt(e,Vp(i)),e}function Up(i){let e=W2(i),t=e.matches[e.matches.length-1];return Nt(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function Z2(){return Up("useRouteId")}function J2(){var s;let i=W.useContext(Pp),e=X2("useRouteError"),t=Up("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[t]}function eS(){let{router:i}=Y2("useNavigate"),e=Up("useNavigate"),t=W.useRef(!1);return gE(()=>{t.current=!0}),W.useCallback(async(a,l={})=>{wi(t.current,pE),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...l}))},[i,e])}var E0={};function vE(i,e,t){!e&&!E0[i]&&(E0[i]=!0,wi(!1,t))}W.memo(tS);function tS({routes:i,future:e,state:t}){return yE(i,void 0,t,e)}function nS({to:i,replace:e,state:t,relative:s}){Nt(Fo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=W.useContext(Mi);wi(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=W.useContext(ar),{pathname:c}=Vs(),f=Fr(),m=Mp(i,kp(l),c,s==="path"),p=JSON.stringify(m);return W.useEffect(()=>{f(JSON.parse(p),{replace:e,state:t,relative:s})},[f,p,s,e,t]),null}function vs(i){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iS({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:l=!1}){Nt(!Fo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),f=W.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=xa(t));let{pathname:m="/",search:p="",hash:y="",state:_=null,key:v="default"}=t,A=W.useMemo(()=>{let C=Lr(m,c);return C==null?null:{location:{pathname:C,search:p,hash:y,state:_,key:v},navigationType:s}},[c,m,p,y,_,v,s]);return wi(A!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:W.createElement(Mi.Provider,{value:f},W.createElement(Su.Provider,{children:e,value:A}))}function rS({children:i,location:e}){return F2(ip(i),e)}function ip(i,e=[]){let t=[];return W.Children.forEach(i,(s,a)=>{if(!W.isValidElement(s))return;let l=[...e,a];if(s.type===W.Fragment){t.push.apply(t,ip(s.props.children,l));return}Nt(s.type===vs,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=ip(s.props.children,l)),t.push(c)}),t}var _h="get",Eh="application/x-www-form-urlencoded";function uf(i){return i!=null&&typeof i.tagName=="string"}function sS(i){return uf(i)&&i.tagName.toLowerCase()==="button"}function aS(i){return uf(i)&&i.tagName.toLowerCase()==="form"}function oS(i){return uf(i)&&i.tagName.toLowerCase()==="input"}function lS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function uS(i,e){return i.button===0&&(!e||e==="_self")&&!lS(i)}var ch=null;function cS(){if(ch===null)try{new FormData(document.createElement("form"),0),ch=!1}catch{ch=!0}return ch}var hS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bm(i){return i!=null&&!hS.has(i)?(wi(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Eh}"`),null):i}function fS(i,e){let t,s,a,l,c;if(aS(i)){let f=i.getAttribute("action");s=f?Lr(f,e):null,t=i.getAttribute("method")||_h,a=Bm(i.getAttribute("enctype"))||Eh,l=new FormData(i)}else if(sS(i)||oS(i)&&(i.type==="submit"||i.type==="image")){let f=i.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||f.getAttribute("action");if(s=m?Lr(m,e):null,t=i.getAttribute("formmethod")||f.getAttribute("method")||_h,a=Bm(i.getAttribute("formenctype"))||Bm(f.getAttribute("enctype"))||Eh,l=new FormData(f,i),!cS()){let{name:p,type:y,value:_}=i;if(y==="image"){let v=p?`${p}.`:"";l.append(`${v}x`,"0"),l.append(`${v}y`,"0")}else p&&l.append(p,_)}}else{if(uf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=_h,s=null,a=Eh,c=i}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:l,body:c}}function Lp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function dS(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function pS(i,e,t){let s=await Promise.all(i.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await dS(l,t);return c.links?c.links():[]}return[]}));return _S(s.flat(1).filter(mS).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function T0(i,e,t,s,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,f=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||f(m,p)):l==="data"?e.filter((m,p)=>{var _;let y=s.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function gS(i,e,{includeHydrateFallback:t}={}){return yS(i.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function yS(i){return[...new Set(i)]}function vS(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function _S(i,e){let t=new Set;return new Set(e),i.reduce((s,a)=>{let l=JSON.stringify(vS(a));return t.has(l)||(t.add(l),s.push({key:l,link:a})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ES=new Set([100,101,204,205]);function TS(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&Lr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function _E(){let i=W.useContext(qo);return Lp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function wS(){let i=W.useContext(lf);return Lp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var jp=W.createContext(void 0);jp.displayName="FrameworkContext";function EE(){let i=W.useContext(jp);return Lp(i,"You must render this element inside a <HydratedRouter> element"),i}function bS(i,e){let t=W.useContext(jp),[s,a]=W.useState(!1),[l,c]=W.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:_}=e,v=W.useRef(null);W.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let V=B=>{B.forEach(H=>{c(H.isIntersecting)})},j=new IntersectionObserver(V,{threshold:.5});return v.current&&j.observe(v.current),()=>{j.disconnect()}}},[i]),W.useEffect(()=>{if(s){let V=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(V)}}},[s]);let A=()=>{a(!0)},C=()=>{a(!1),c(!1)};return t?i!=="intent"?[l,v,{}]:[l,v,{onFocus:Zl(f,A),onBlur:Zl(m,C),onMouseEnter:Zl(p,A),onMouseLeave:Zl(y,C),onTouchStart:Zl(_,A)}]:[!1,v,{}]}function Zl(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function AS({page:i,...e}){let{router:t}=_E(),s=W.useMemo(()=>cE(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?W.createElement(RS,{page:i,matches:s,...e}):null}function SS(i){let{manifest:e,routeModules:t}=EE(),[s,a]=W.useState([]);return W.useEffect(()=>{let l=!1;return pS(i,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[i,e,t]),s}function RS({page:i,matches:e,...t}){let s=Vs(),{manifest:a,routeModules:l}=EE(),{basename:c}=_E(),{loaderData:f,matches:m}=wS(),p=W.useMemo(()=>T0(i,e,m,a,s,"data"),[i,e,m,a,s]),y=W.useMemo(()=>T0(i,e,m,a,s,"assets"),[i,e,m,a,s]),_=W.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let C=new Set,V=!1;if(e.forEach(B=>{var F;let H=a.routes[B.route.id];!H||!H.hasLoader||(!p.some(q=>q.route.id===B.route.id)&&B.route.id in f&&((F=l[B.route.id])!=null&&F.shouldRevalidate)||H.hasClientLoader?V=!0:C.add(B.route.id))}),C.size===0)return[];let j=TS(i,c);return V&&C.size>0&&j.searchParams.set("_routes",e.filter(B=>C.has(B.route.id)).map(B=>B.route.id).join(",")),[j.pathname+j.search]},[c,f,s,a,p,e,i,l]),v=W.useMemo(()=>gS(y,a),[y,a]),A=SS(y);return W.createElement(W.Fragment,null,_.map(C=>W.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),v.map(C=>W.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),A.map(({key:C,link:V})=>W.createElement("link",{key:C,...V})))}function CS(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var TE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TE&&(window.__reactRouterVersion="7.6.2")}catch{}function IS({basename:i,children:e,window:t}){let s=W.useRef();s.current==null&&(s.current=m2({window:t,v5Compat:!0}));let a=s.current,[l,c]=W.useState({action:a.action,location:a.location}),f=W.useCallback(m=>{W.startTransition(()=>c(m))},[c]);return W.useLayoutEffect(()=>a.listen(f),[a,f]),W.createElement(iS,{basename:i,children:e,location:l.location,navigationType:l.action,navigator:a})}var wE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bE=W.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:f,target:m,to:p,preventScrollReset:y,viewTransition:_,...v},A){let{basename:C}=W.useContext(Mi),V=typeof p=="string"&&wE.test(p),j,B=!1;if(typeof p=="string"&&V&&(j=p,TE))try{let b=new URL(window.location.href),I=p.startsWith("//")?new URL(b.protocol+p):new URL(p),D=Lr(I.pathname,C);I.origin===b.origin&&D!=null?p=D+I.search+I.hash:B=!0}catch{wi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=z2(p,{relative:a}),[F,q,$]=bS(s,v),z=OS(p,{replace:c,state:f,target:m,preventScrollReset:y,relative:a,viewTransition:_});function M(b){e&&e(b),b.defaultPrevented||z(b)}let w=W.createElement("a",{...v,...$,href:j||H,onClick:B||l?e:M,ref:CS(A,q),target:m,"data-discover":!V&&t==="render"?"true":void 0});return F&&!V?W.createElement(W.Fragment,null,w,W.createElement(AS,{page:H})):w});bE.displayName="Link";var xS=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:f,children:m,...p},y){let _=Ru(c,{relative:p.relative}),v=Vs(),A=W.useContext(lf),{navigator:C,basename:V}=W.useContext(Mi),j=A!=null&&US(_)&&f===!0,B=C.encodeLocation?C.encodeLocation(_).pathname:_.pathname,H=v.pathname,F=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(H=H.toLowerCase(),F=F?F.toLowerCase():null,B=B.toLowerCase()),F&&V&&(F=Lr(F,V)||F);const q=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let $=H===B||!a&&H.startsWith(B)&&H.charAt(q)==="/",z=F!=null&&(F===B||!a&&F.startsWith(B)&&F.charAt(B.length)==="/"),M={isActive:$,isPending:z,isTransitioning:j},w=$?e:void 0,b;typeof s=="function"?b=s(M):b=[s,$?"active":null,z?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let I=typeof l=="function"?l(M):l;return W.createElement(bE,{...p,"aria-current":w,className:b,ref:y,style:I,to:c,viewTransition:f},typeof m=="function"?m(M):m)});xS.displayName="NavLink";var NS=W.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:l,method:c=_h,action:f,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:_,...v},A)=>{let C=PS(),V=VS(f,{relative:p}),j=c.toLowerCase()==="get"?"get":"post",B=typeof f=="string"&&wE.test(f),H=F=>{if(m&&m(F),F.defaultPrevented)return;F.preventDefault();let q=F.nativeEvent.submitter,$=(q==null?void 0:q.getAttribute("formmethod"))||c;C(q||F.currentTarget,{fetcherKey:e,method:$,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:_})};return W.createElement("form",{ref:A,method:j,action:V,onSubmit:s?m:H,...v,"data-discover":!B&&i==="render"?"true":void 0})});NS.displayName="Form";function DS(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AE(i){let e=W.useContext(qo);return Nt(e,DS(i)),e}function OS(i,{target:e,replace:t,state:s,preventScrollReset:a,relative:l,viewTransition:c}={}){let f=Fr(),m=Vs(),p=Ru(i,{relative:l});return W.useCallback(y=>{if(uS(y,e)){y.preventDefault();let _=t!==void 0?t:pu(m)===pu(p);f(i,{replace:_,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[m,f,p,t,s,e,i,a,l,c])}var kS=0,MS=()=>`__${String(++kS)}__`;function PS(){let{router:i}=AE("useSubmit"),{basename:e}=W.useContext(Mi),t=Z2();return W.useCallback(async(s,a={})=>{let{action:l,method:c,encType:f,formData:m,body:p}=fS(s,e);if(a.navigate===!1){let y=a.fetcherKey||MS();await i.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||f,flushSync:a.flushSync})}else await i.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function VS(i,{relative:e}={}){let{basename:t}=W.useContext(Mi),s=W.useContext(ar);Nt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Ru(i||".",{relative:e})},c=Vs();if(i==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(y=>y==="")){f.delete("index"),m.filter(_=>_).forEach(_=>f.append("index",_));let y=f.toString();l.search=y?`?${y}`:""}}return(!i||i===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Pr([t,l.pathname])),pu(l)}function US(i,e={}){let t=W.useContext(mE);Nt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=AE("useViewTransitionState"),a=Ru(i,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Lr(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=Lr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Oh(a.pathname,c)!=null||Oh(a.pathname,l)!=null}[...ES];const LS=()=>{};var w0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},jS=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const a=i[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],f=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},RE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,f=c?i[a+1]:0,m=a+2<i.length,p=m?i[a+2]:0,y=l>>2,_=(l&3)<<4|f>>4;let v=(f&15)<<2|p>>6,A=p&63;m||(A=64,c||(v=64)),s.push(t[y],t[_],t[v],t[A])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(SE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):jS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const p=a<i.length?t[i.charAt(a)]:64;++a;const _=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||p==null||_==null)throw new BS;const v=l<<2|f>>4;if(s.push(v),p!==64){const A=f<<4&240|p>>2;if(s.push(A),_!==64){const C=p<<6&192|_;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class BS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zS=function(i){const e=SE(i);return RE.encodeByteArray(e,!0)},kh=function(i){return zS(i).replace(/\./g,"")},CE=function(i){try{return RE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=()=>qS().__FIREBASE_DEFAULTS__,HS=()=>{if(typeof process>"u"||typeof w0>"u")return;const i=w0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},GS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&CE(i[1]);return e&&JSON.parse(e)},cf=()=>{try{return LS()||FS()||HS()||GS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},IE=i=>{var e,t;return(t=(e=cf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},xE=i=>{const e=IE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},NE=()=>{var i;return(i=cf())===null||i===void 0?void 0:i.config},DE=i=>{var e;return(e=cf())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(i){return i.endsWith(".cloudworkstations.dev")}async function Bp(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[kh(JSON.stringify(t)),kh(JSON.stringify(c)),""].join(".")}const au={};function QS(){const i={prod:[],emulator:[]};for(const e of Object.keys(au))au[e]?i.emulator.push(e):i.prod.push(e);return i}function KS(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let b0=!1;function zp(i,e){if(typeof window>"u"||typeof document>"u"||!Us(window.location.host)||au[i]===e||au[i]||b0)return;au[i]=e;function t(v){return`__firebase__banner__${v}`}const s="__firebase__banner",l=QS().prod.length>0;function c(){const v=document.getElementById(s);v&&v.remove()}function f(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function m(v,A){v.setAttribute("width","24"),v.setAttribute("id",A),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function p(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{b0=!0,c()},v}function y(v,A){v.setAttribute("id",A),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function _(){const v=KS(s),A=t("text"),C=document.getElementById(A)||document.createElement("span"),V=t("learnmore"),j=document.getElementById(V)||document.createElement("a"),B=t("preprendIcon"),H=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const F=v.element;f(F),y(j,V);const q=p();m(H,B),F.append(H,C,j,q),document.body.appendChild(F)}l?(C.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function XS(){var i;const e=(i=cf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function JS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eR(){const i=Un();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function tR(){return!XS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nR(){try{return typeof indexedDB=="object"}catch{return!1}}function iR(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="FirebaseError";class or extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=rR,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cu.prototype.create)}}class Cu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?sR(l,s):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new or(a,f,s)}}function sR(i,e){return i.replace(aR,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const aR=/\{\$([^}]+)}/g;function oR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ta(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=i[a],c=e[a];if(A0(l)&&A0(c)){if(!Ta(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function A0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function eu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function tu(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function lR(i,e){const t=new uR(i,e);return t.subscribe.bind(t)}class uR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");cR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=zm),a.error===void 0&&(a.error=zm),a.complete===void 0&&(a.complete=zm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cR(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function zm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(i){return i&&i._delegate?i._delegate:i}class xs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new $S;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dR(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:fR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fR(i){return i===pa?void 0:i}function dR(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Xe||(Xe={}));const pR={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},gR=Xe.INFO,yR={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},vR=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=yR[e];if(a)console[a](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qp{constructor(e){this.name=e,this._logLevel=gR,this._logHandler=vR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const _R=(i,e)=>e.some(t=>i instanceof t);let S0,R0;function ER(){return S0||(S0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TR(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kE=new WeakMap,rp=new WeakMap,ME=new WeakMap,qm=new WeakMap,Fp=new WeakMap;function wR(i){const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(Ss(i.result)),a()},c=()=>{s(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&kE.set(t,i)}).catch(()=>{}),Fp.set(e,i),e}function bR(i){if(rp.has(i))return;const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});rp.set(i,e)}let sp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return rp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ME.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ss(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function AR(i){sp=i(sp)}function SR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(Fm(this),e,...t);return ME.set(s,e.sort?e.sort():[e]),Ss(s)}:TR().includes(i)?function(...e){return i.apply(Fm(this),e),Ss(kE.get(this))}:function(...e){return Ss(i.apply(Fm(this),e))}}function RR(i){return typeof i=="function"?SR(i):(i instanceof IDBTransaction&&bR(i),_R(i,ER())?new Proxy(i,sp):i)}function Ss(i){if(i instanceof IDBRequest)return wR(i);if(qm.has(i))return qm.get(i);const e=RR(i);return e!==i&&(qm.set(i,e),Fp.set(e,i)),e}const Fm=i=>Fp.get(i);function CR(i,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),f=Ss(c);return s&&c.addEventListener("upgradeneeded",m=>{s(Ss(c.result),m.oldVersion,m.newVersion,Ss(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const IR=["get","getKey","getAll","getAllKeys","count"],xR=["put","add","delete","clear"],Hm=new Map;function C0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Hm.get(e))return Hm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=xR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||IR.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return s&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&m.done]))[0]};return Hm.set(e,l),l}AR(i=>({...i,get:(e,t,s)=>C0(e,t)||i.get(e,t,s),has:(e,t)=>!!C0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function DR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ap="@firebase/app",I0="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new qp("@firebase/app"),OR="@firebase/app-compat",kR="@firebase/analytics-compat",MR="@firebase/analytics",PR="@firebase/app-check-compat",VR="@firebase/app-check",UR="@firebase/auth",LR="@firebase/auth-compat",jR="@firebase/database",BR="@firebase/data-connect",zR="@firebase/database-compat",qR="@firebase/functions",FR="@firebase/functions-compat",HR="@firebase/installations",GR="@firebase/installations-compat",$R="@firebase/messaging",QR="@firebase/messaging-compat",KR="@firebase/performance",YR="@firebase/performance-compat",XR="@firebase/remote-config",WR="@firebase/remote-config-compat",ZR="@firebase/storage",JR="@firebase/storage-compat",eC="@firebase/firestore",tC="@firebase/ai",nC="@firebase/firestore-compat",iC="firebase",rC="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",sC={[ap]:"fire-core",[OR]:"fire-core-compat",[MR]:"fire-analytics",[kR]:"fire-analytics-compat",[VR]:"fire-app-check",[PR]:"fire-app-check-compat",[UR]:"fire-auth",[LR]:"fire-auth-compat",[jR]:"fire-rtdb",[BR]:"fire-data-connect",[zR]:"fire-rtdb-compat",[qR]:"fire-fn",[FR]:"fire-fn-compat",[HR]:"fire-iid",[GR]:"fire-iid-compat",[$R]:"fire-fcm",[QR]:"fire-fcm-compat",[KR]:"fire-perf",[YR]:"fire-perf-compat",[XR]:"fire-rc",[WR]:"fire-rc-compat",[ZR]:"fire-gcs",[JR]:"fire-gcs-compat",[eC]:"fire-fst",[nC]:"fire-fst-compat",[tC]:"fire-vertex","fire-js":"fire-js",[iC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map,aC=new Map,lp=new Map;function x0(i,e){try{i.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function wa(i){const e=i.name;if(lp.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;lp.set(e,i);for(const t of Mh.values())x0(t,i);for(const t of aC.values())x0(t,i);return!0}function hf(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function ai(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new Cu("app","Firebase",oC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=rC;function PE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:op,automaticDataCollectionEnabled:!0},e),a=s.name;if(typeof a!="string"||!a)throw Rs.create("bad-app-name",{appName:String(a)});if(t||(t=NE()),!t)throw Rs.create("no-options");const l=Mh.get(a);if(l){if(Ta(t,l.options)&&Ta(s,l.config))return l;throw Rs.create("duplicate-app",{appName:a})}const c=new mR(a);for(const m of lp.values())c.addComponent(m);const f=new lC(t,s,c);return Mh.set(a,f),f}function Hp(i=op){const e=Mh.get(i);if(!e&&i===op&&NE())return PE();if(!e)throw Rs.create("no-app",{appName:i});return e}function Ji(i,e,t){var s;let a=(s=sC[i])!==null&&s!==void 0?s:i;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(f.join(" "));return}wa(new xs(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="firebase-heartbeat-database",cC=1,gu="firebase-heartbeat-store";let Gm=null;function VE(){return Gm||(Gm=CR(uC,cC,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(gu)}catch(t){console.warn(t)}}}}).catch(i=>{throw Rs.create("idb-open",{originalErrorMessage:i.message})})),Gm}async function hC(i){try{const t=(await VE()).transaction(gu),s=await t.objectStore(gu).get(UE(i));return await t.done,s}catch(e){if(e instanceof or)jr.warn(e.message);else{const t=Rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jr.warn(t.message)}}}async function N0(i,e){try{const s=(await VE()).transaction(gu,"readwrite");await s.objectStore(gu).put(e,UE(i)),await s.done}catch(t){if(t instanceof or)jr.warn(t.message);else{const s=Rs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});jr.warn(s.message)}}}function UE(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=1024,dC=30;class mC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=D0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>dC){const c=yC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){jr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=D0(),{heartbeatsToSend:s,unsentEntries:a}=pC(this._heartbeatsCache.heartbeats),l=kh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return jr.warn(t),""}}}function D0(){return new Date().toISOString().substring(0,10)}function pC(i,e=fC){const t=[];let s=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),O0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),O0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class gC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nR()?iR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return N0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return N0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function O0(i){return kh(JSON.stringify({version:2,heartbeats:i})).length}function yC(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(i){wa(new xs("platform-logger",e=>new NR(e),"PRIVATE")),wa(new xs("heartbeat",e=>new mC(e),"PRIVATE")),Ji(ap,I0,i),Ji(ap,I0,"esm2017"),Ji("fire-js","")}vC("");var k0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cs,LE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,w){function b(){}b.prototype=w.prototype,M.D=w.prototype,M.prototype=new b,M.prototype.constructor=M,M.C=function(I,D,k){for(var x=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)x[Y-2]=arguments[Y];return w.prototype[D].apply(I,x)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,w,b){b||(b=0);var I=Array(16);if(typeof w=="string")for(var D=0;16>D;++D)I[D]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(D=0;16>D;++D)I[D]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=M.g[0],b=M.g[1],D=M.g[2];var k=M.g[3],x=w+(k^b&(D^k))+I[0]+3614090360&4294967295;w=b+(x<<7&4294967295|x>>>25),x=k+(D^w&(b^D))+I[1]+3905402710&4294967295,k=w+(x<<12&4294967295|x>>>20),x=D+(b^k&(w^b))+I[2]+606105819&4294967295,D=k+(x<<17&4294967295|x>>>15),x=b+(w^D&(k^w))+I[3]+3250441966&4294967295,b=D+(x<<22&4294967295|x>>>10),x=w+(k^b&(D^k))+I[4]+4118548399&4294967295,w=b+(x<<7&4294967295|x>>>25),x=k+(D^w&(b^D))+I[5]+1200080426&4294967295,k=w+(x<<12&4294967295|x>>>20),x=D+(b^k&(w^b))+I[6]+2821735955&4294967295,D=k+(x<<17&4294967295|x>>>15),x=b+(w^D&(k^w))+I[7]+4249261313&4294967295,b=D+(x<<22&4294967295|x>>>10),x=w+(k^b&(D^k))+I[8]+1770035416&4294967295,w=b+(x<<7&4294967295|x>>>25),x=k+(D^w&(b^D))+I[9]+2336552879&4294967295,k=w+(x<<12&4294967295|x>>>20),x=D+(b^k&(w^b))+I[10]+4294925233&4294967295,D=k+(x<<17&4294967295|x>>>15),x=b+(w^D&(k^w))+I[11]+2304563134&4294967295,b=D+(x<<22&4294967295|x>>>10),x=w+(k^b&(D^k))+I[12]+1804603682&4294967295,w=b+(x<<7&4294967295|x>>>25),x=k+(D^w&(b^D))+I[13]+4254626195&4294967295,k=w+(x<<12&4294967295|x>>>20),x=D+(b^k&(w^b))+I[14]+2792965006&4294967295,D=k+(x<<17&4294967295|x>>>15),x=b+(w^D&(k^w))+I[15]+1236535329&4294967295,b=D+(x<<22&4294967295|x>>>10),x=w+(D^k&(b^D))+I[1]+4129170786&4294967295,w=b+(x<<5&4294967295|x>>>27),x=k+(b^D&(w^b))+I[6]+3225465664&4294967295,k=w+(x<<9&4294967295|x>>>23),x=D+(w^b&(k^w))+I[11]+643717713&4294967295,D=k+(x<<14&4294967295|x>>>18),x=b+(k^w&(D^k))+I[0]+3921069994&4294967295,b=D+(x<<20&4294967295|x>>>12),x=w+(D^k&(b^D))+I[5]+3593408605&4294967295,w=b+(x<<5&4294967295|x>>>27),x=k+(b^D&(w^b))+I[10]+38016083&4294967295,k=w+(x<<9&4294967295|x>>>23),x=D+(w^b&(k^w))+I[15]+3634488961&4294967295,D=k+(x<<14&4294967295|x>>>18),x=b+(k^w&(D^k))+I[4]+3889429448&4294967295,b=D+(x<<20&4294967295|x>>>12),x=w+(D^k&(b^D))+I[9]+568446438&4294967295,w=b+(x<<5&4294967295|x>>>27),x=k+(b^D&(w^b))+I[14]+3275163606&4294967295,k=w+(x<<9&4294967295|x>>>23),x=D+(w^b&(k^w))+I[3]+4107603335&4294967295,D=k+(x<<14&4294967295|x>>>18),x=b+(k^w&(D^k))+I[8]+1163531501&4294967295,b=D+(x<<20&4294967295|x>>>12),x=w+(D^k&(b^D))+I[13]+2850285829&4294967295,w=b+(x<<5&4294967295|x>>>27),x=k+(b^D&(w^b))+I[2]+4243563512&4294967295,k=w+(x<<9&4294967295|x>>>23),x=D+(w^b&(k^w))+I[7]+1735328473&4294967295,D=k+(x<<14&4294967295|x>>>18),x=b+(k^w&(D^k))+I[12]+2368359562&4294967295,b=D+(x<<20&4294967295|x>>>12),x=w+(b^D^k)+I[5]+4294588738&4294967295,w=b+(x<<4&4294967295|x>>>28),x=k+(w^b^D)+I[8]+2272392833&4294967295,k=w+(x<<11&4294967295|x>>>21),x=D+(k^w^b)+I[11]+1839030562&4294967295,D=k+(x<<16&4294967295|x>>>16),x=b+(D^k^w)+I[14]+4259657740&4294967295,b=D+(x<<23&4294967295|x>>>9),x=w+(b^D^k)+I[1]+2763975236&4294967295,w=b+(x<<4&4294967295|x>>>28),x=k+(w^b^D)+I[4]+1272893353&4294967295,k=w+(x<<11&4294967295|x>>>21),x=D+(k^w^b)+I[7]+4139469664&4294967295,D=k+(x<<16&4294967295|x>>>16),x=b+(D^k^w)+I[10]+3200236656&4294967295,b=D+(x<<23&4294967295|x>>>9),x=w+(b^D^k)+I[13]+681279174&4294967295,w=b+(x<<4&4294967295|x>>>28),x=k+(w^b^D)+I[0]+3936430074&4294967295,k=w+(x<<11&4294967295|x>>>21),x=D+(k^w^b)+I[3]+3572445317&4294967295,D=k+(x<<16&4294967295|x>>>16),x=b+(D^k^w)+I[6]+76029189&4294967295,b=D+(x<<23&4294967295|x>>>9),x=w+(b^D^k)+I[9]+3654602809&4294967295,w=b+(x<<4&4294967295|x>>>28),x=k+(w^b^D)+I[12]+3873151461&4294967295,k=w+(x<<11&4294967295|x>>>21),x=D+(k^w^b)+I[15]+530742520&4294967295,D=k+(x<<16&4294967295|x>>>16),x=b+(D^k^w)+I[2]+3299628645&4294967295,b=D+(x<<23&4294967295|x>>>9),x=w+(D^(b|~k))+I[0]+4096336452&4294967295,w=b+(x<<6&4294967295|x>>>26),x=k+(b^(w|~D))+I[7]+1126891415&4294967295,k=w+(x<<10&4294967295|x>>>22),x=D+(w^(k|~b))+I[14]+2878612391&4294967295,D=k+(x<<15&4294967295|x>>>17),x=b+(k^(D|~w))+I[5]+4237533241&4294967295,b=D+(x<<21&4294967295|x>>>11),x=w+(D^(b|~k))+I[12]+1700485571&4294967295,w=b+(x<<6&4294967295|x>>>26),x=k+(b^(w|~D))+I[3]+2399980690&4294967295,k=w+(x<<10&4294967295|x>>>22),x=D+(w^(k|~b))+I[10]+4293915773&4294967295,D=k+(x<<15&4294967295|x>>>17),x=b+(k^(D|~w))+I[1]+2240044497&4294967295,b=D+(x<<21&4294967295|x>>>11),x=w+(D^(b|~k))+I[8]+1873313359&4294967295,w=b+(x<<6&4294967295|x>>>26),x=k+(b^(w|~D))+I[15]+4264355552&4294967295,k=w+(x<<10&4294967295|x>>>22),x=D+(w^(k|~b))+I[6]+2734768916&4294967295,D=k+(x<<15&4294967295|x>>>17),x=b+(k^(D|~w))+I[13]+1309151649&4294967295,b=D+(x<<21&4294967295|x>>>11),x=w+(D^(b|~k))+I[4]+4149444226&4294967295,w=b+(x<<6&4294967295|x>>>26),x=k+(b^(w|~D))+I[11]+3174756917&4294967295,k=w+(x<<10&4294967295|x>>>22),x=D+(w^(k|~b))+I[2]+718787259&4294967295,D=k+(x<<15&4294967295|x>>>17),x=b+(k^(D|~w))+I[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,M.g[2]=M.g[2]+D&4294967295,M.g[3]=M.g[3]+k&4294967295}s.prototype.u=function(M,w){w===void 0&&(w=M.length);for(var b=w-this.blockSize,I=this.B,D=this.h,k=0;k<w;){if(D==0)for(;k<=b;)a(this,M,k),k+=this.blockSize;if(typeof M=="string"){for(;k<w;)if(I[D++]=M.charCodeAt(k++),D==this.blockSize){a(this,I),D=0;break}}else for(;k<w;)if(I[D++]=M[k++],D==this.blockSize){a(this,I),D=0;break}}this.h=D,this.o+=w},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;var b=8*this.o;for(w=M.length-8;w<M.length;++w)M[w]=b&255,b/=256;for(this.u(M),M=Array(16),w=b=0;4>w;++w)for(var I=0;32>I;I+=8)M[b++]=this.g[w]>>>I&255;return M};function l(M,w){var b=f;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=w(M)}function c(M,w){this.h=w;for(var b=[],I=!0,D=M.length-1;0<=D;D--){var k=M[D]|0;I&&k==w||(b[D]=k,I=!1)}this.g=b}var f={};function m(M){return-128<=M&&128>M?l(M,function(w){return new c([w|0],0>w?-1:0)}):new c([M|0],0>M?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return _;if(0>M)return j(p(-M));for(var w=[],b=1,I=0;M>=b;I++)w[I]=M/b|0,b*=4294967296;return new c(w,0)}function y(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return j(y(M.substring(1),w));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=p(Math.pow(w,8)),I=_,D=0;D<M.length;D+=8){var k=Math.min(8,M.length-D),x=parseInt(M.substring(D,D+k),w);8>k?(k=p(Math.pow(w,k)),I=I.j(k).add(p(x))):(I=I.j(b),I=I.add(p(x)))}return I}var _=m(0),v=m(1),A=m(16777216);i=c.prototype,i.m=function(){if(V(this))return-j(this).m();for(var M=0,w=1,b=0;b<this.g.length;b++){var I=this.i(b);M+=(0<=I?I:4294967296+I)*w,w*=4294967296}return M},i.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(C(this))return"0";if(V(this))return"-"+j(this).toString(M);for(var w=p(Math.pow(M,6)),b=this,I="";;){var D=q(b,w).g;b=B(b,D.j(w));var k=((0<b.g.length?b.g[0]:b.h)>>>0).toString(M);if(b=D,C(b))return k+I;for(;6>k.length;)k="0"+k;I=k+I}},i.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function C(M){if(M.h!=0)return!1;for(var w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function V(M){return M.h==-1}i.l=function(M){return M=B(this,M),V(M)?-1:C(M)?0:1};function j(M){for(var w=M.g.length,b=[],I=0;I<w;I++)b[I]=~M.g[I];return new c(b,~M.h).add(v)}i.abs=function(){return V(this)?j(this):this},i.add=function(M){for(var w=Math.max(this.g.length,M.g.length),b=[],I=0,D=0;D<=w;D++){var k=I+(this.i(D)&65535)+(M.i(D)&65535),x=(k>>>16)+(this.i(D)>>>16)+(M.i(D)>>>16);I=x>>>16,k&=65535,x&=65535,b[D]=x<<16|k}return new c(b,b[b.length-1]&-2147483648?-1:0)};function B(M,w){return M.add(j(w))}i.j=function(M){if(C(this)||C(M))return _;if(V(this))return V(M)?j(this).j(j(M)):j(j(this).j(M));if(V(M))return j(this.j(j(M)));if(0>this.l(A)&&0>M.l(A))return p(this.m()*M.m());for(var w=this.g.length+M.g.length,b=[],I=0;I<2*w;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<M.g.length;D++){var k=this.i(I)>>>16,x=this.i(I)&65535,Y=M.i(D)>>>16,ne=M.i(D)&65535;b[2*I+2*D]+=x*ne,H(b,2*I+2*D),b[2*I+2*D+1]+=k*ne,H(b,2*I+2*D+1),b[2*I+2*D+1]+=x*Y,H(b,2*I+2*D+1),b[2*I+2*D+2]+=k*Y,H(b,2*I+2*D+2)}for(I=0;I<w;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=w;I<2*w;I++)b[I]=0;return new c(b,0)};function H(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function F(M,w){this.g=M,this.h=w}function q(M,w){if(C(w))throw Error("division by zero");if(C(M))return new F(_,_);if(V(M))return w=q(j(M),w),new F(j(w.g),j(w.h));if(V(w))return w=q(M,j(w)),new F(j(w.g),w.h);if(30<M.g.length){if(V(M)||V(w))throw Error("slowDivide_ only works with positive integers.");for(var b=v,I=w;0>=I.l(M);)b=$(b),I=$(I);var D=z(b,1),k=z(I,1);for(I=z(I,2),b=z(b,2);!C(I);){var x=k.add(I);0>=x.l(M)&&(D=D.add(b),k=x),I=z(I,1),b=z(b,1)}return w=B(M,D.j(w)),new F(D,w)}for(D=_;0<=M.l(w);){for(b=Math.max(1,Math.floor(M.m()/w.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),k=p(b),x=k.j(w);V(x)||0<x.l(M);)b-=I,k=p(b),x=k.j(w);C(k)&&(k=v),D=D.add(k),M=B(M,x)}return new F(D,M)}i.A=function(M){return q(this,M).h},i.and=function(M){for(var w=Math.max(this.g.length,M.g.length),b=[],I=0;I<w;I++)b[I]=this.i(I)&M.i(I);return new c(b,this.h&M.h)},i.or=function(M){for(var w=Math.max(this.g.length,M.g.length),b=[],I=0;I<w;I++)b[I]=this.i(I)|M.i(I);return new c(b,this.h|M.h)},i.xor=function(M){for(var w=Math.max(this.g.length,M.g.length),b=[],I=0;I<w;I++)b[I]=this.i(I)^M.i(I);return new c(b,this.h^M.h)};function $(M){for(var w=M.g.length+1,b=[],I=0;I<w;I++)b[I]=M.i(I)<<1|M.i(I-1)>>>31;return new c(b,M.h)}function z(M,w){var b=w>>5;w%=32;for(var I=M.g.length-b,D=[],k=0;k<I;k++)D[k]=0<w?M.i(k+b)>>>w|M.i(k+b+1)<<32-w:M.i(k+b);return new c(D,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,LE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Cs=c}).apply(typeof k0<"u"?k0:typeof self<"u"?self:typeof window<"u"?window:{});var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jE,nu,BE,Th,up,zE,qE,FE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,S){return h==Array.prototype||h==Object.prototype||(h[T]=S.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof hh=="object"&&hh];for(var T=0;T<h.length;++T){var S=h[T];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=t(this);function a(h,T){if(T)e:{var S=s;h=h.split(".");for(var L=0;L<h.length-1;L++){var re=h[L];if(!(re in S))break e;S=S[re]}h=h[h.length-1],L=S[h],T=T(L),T!=L&&T!=null&&e(S,h,{configurable:!0,writable:!0,value:T})}}function l(h,T){h instanceof String&&(h+="");var S=0,L=!1,re={next:function(){if(!L&&S<h.length){var ce=S++;return{value:T(ce,h[ce]),done:!1}}return L=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}a("Array.prototype.values",function(h){return h||function(){return l(this,function(T,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function p(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function y(h,T,S){return h.call.apply(h.bind,arguments)}function _(h,T,S){if(!h)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,L),h.apply(T,re)}}return function(){return h.apply(T,arguments)}}function v(h,T,S){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,v.apply(null,arguments)}function A(h,T){var S=Array.prototype.slice.call(arguments,1);return function(){var L=S.slice();return L.push.apply(L,arguments),h.apply(this,L)}}function C(h,T){function S(){}S.prototype=T.prototype,h.aa=T.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(L,re,ce){for(var ve=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ve[Je-2]=arguments[Je];return T.prototype[re].apply(L,ve)}}function V(h){const T=h.length;if(0<T){const S=Array(T);for(let L=0;L<T;L++)S[L]=h[L];return S}return[]}function j(h,T){for(let S=1;S<arguments.length;S++){const L=arguments[S];if(m(L)){const re=h.length||0,ce=L.length||0;h.length=re+ce;for(let ve=0;ve<ce;ve++)h[re+ve]=L[ve]}else h.push(L)}}class B{constructor(T,S){this.i=T,this.j=S,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function H(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function q(h){return q[" "](h),h}q[" "]=function(){};var $=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function z(h,T,S){for(const L in h)T.call(S,h[L],L,h)}function M(h,T){for(const S in h)T.call(void 0,h[S],S,h)}function w(h){const T={};for(const S in h)T[S]=h[S];return T}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(h,T){let S,L;for(let re=1;re<arguments.length;re++){L=arguments[re];for(S in L)h[S]=L[S];for(let ce=0;ce<b.length;ce++)S=b[ce],Object.prototype.hasOwnProperty.call(L,S)&&(h[S]=L[S])}}function D(h){var T=1;h=h.split(":");const S=[];for(;0<T&&h.length;)S.push(h.shift()),T--;return h.length&&S.push(h.join(":")),S}function k(h){f.setTimeout(()=>{throw h},0)}function x(){var h=Z;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class Y{constructor(){this.h=this.g=null}add(T,S){const L=ne.get();L.set(T,S),this.h?this.h.next=L:this.g=L,this.h=L}}var ne=new B(()=>new N,h=>h.reset());class N{constructor(){this.next=this.g=this.h=null}set(T,S){this.h=T,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let O,ie=!1,Z=new Y,U=()=>{const h=f.Promise.resolve(void 0);O=()=>{h.then(Q)}};var Q=()=>{for(var h;h=x();){try{h.h.call(h.g)}catch(S){k(S)}var T=ne;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}ie=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};f.addEventListener("test",S,T),f.removeEventListener("test",S,T)}catch{}return h}();function K(h,T){if(te.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,L=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if($){e:{try{q(T.nodeName);var re=!0;break e}catch{}re=!1}re||(T=null)}}else S=="mouseover"?T=h.fromElement:S=="mouseout"&&(T=h.toElement);this.relatedTarget=T,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:de[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&K.aa.h.call(this)}}C(K,te);var de={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),be=0;function Re(h,T,S,L,re){this.listener=h,this.proxy=null,this.src=T,this.type=S,this.capture=!!L,this.ha=re,this.key=++be,this.da=this.fa=!1}function ze(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Le(h){this.src=h,this.g={},this.h=0}Le.prototype.add=function(h,T,S,L,re){var ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);var ve=en(h,T,L,re);return-1<ve?(T=h[ve],S||(T.fa=!1)):(T=new Re(T,this.src,ce,!!L,re),T.fa=S,h.push(T)),T};function rt(h,T){var S=T.type;if(S in h.g){var L=h.g[S],re=Array.prototype.indexOf.call(L,T,void 0),ce;(ce=0<=re)&&Array.prototype.splice.call(L,re,1),ce&&(ze(T),h.g[S].length==0&&(delete h.g[S],h.h--))}}function en(h,T,S,L){for(var re=0;re<h.length;++re){var ce=h[re];if(!ce.da&&ce.listener==T&&ce.capture==!!S&&ce.ha==L)return re}return-1}var qt="closure_lm_"+(1e6*Math.random()|0),ot={};function Pt(h,T,S,L,re){if(Array.isArray(T)){for(var ce=0;ce<T.length;ce++)Pt(h,T[ce],S,L,re);return null}return S=Qt(S),h&&h[Te]?h.K(T,S,p(L)?!!L.capture:!1,re):Ue(h,T,S,!1,L,re)}function Ue(h,T,S,L,re,ce){if(!T)throw Error("Invalid event type");var ve=p(re)?!!re.capture:!!re,Je=ht(h);if(Je||(h[qt]=Je=new Le(h)),S=Je.add(T,S,L,ve,ce),S.proxy)return S;if(L=ut(),S.proxy=L,L.src=h,L.listener=S,h.addEventListener)oe||(re=ve),re===void 0&&(re=!1),h.addEventListener(T.toString(),L,re);else if(h.attachEvent)h.attachEvent(Ze(T.toString()),L);else if(h.addListener&&h.removeListener)h.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return S}function ut(){function h(S){return T.call(h.src,h.listener,S)}const T=tn;return h}function Tt(h,T,S,L,re){if(Array.isArray(T))for(var ce=0;ce<T.length;ce++)Tt(h,T[ce],S,L,re);else L=p(L)?!!L.capture:!!L,S=Qt(S),h&&h[Te]?(h=h.i,T=String(T).toString(),T in h.g&&(ce=h.g[T],S=en(ce,S,L,re),-1<S&&(ze(ce[S]),Array.prototype.splice.call(ce,S,1),ce.length==0&&(delete h.g[T],h.h--)))):h&&(h=ht(h))&&(T=h.g[T.toString()],h=-1,T&&(h=en(T,S,L,re)),(S=-1<h?T[h]:null)&&Ct(S))}function Ct(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[Te])rt(T.i,h);else{var S=h.type,L=h.proxy;T.removeEventListener?T.removeEventListener(S,L,h.capture):T.detachEvent?T.detachEvent(Ze(S),L):T.addListener&&T.removeListener&&T.removeListener(L),(S=ht(T))?(rt(S,h),S.h==0&&(S.src=null,T[qt]=null)):ze(h)}}}function Ze(h){return h in ot?ot[h]:ot[h]="on"+h}function tn(h,T){if(h.da)h=!0;else{T=new K(T,this);var S=h.listener,L=h.ha||h.src;h.fa&&Ct(h),h=S.call(L,T)}return h}function ht(h){return h=h[qt],h instanceof Le?h:null}var st="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qt(h){return typeof h=="function"?h:(h[st]||(h[st]=function(T){return h.handleEvent(T)}),h[st])}function Ke(){J.call(this),this.i=new Le(this),this.M=this,this.F=null}C(Ke,J),Ke.prototype[Te]=!0,Ke.prototype.removeEventListener=function(h,T,S,L){Tt(this,h,T,S,L)};function qe(h,T){var S,L=h.F;if(L)for(S=[];L;L=L.F)S.push(L);if(h=h.M,L=T.type||T,typeof T=="string")T=new te(T,h);else if(T instanceof te)T.target=T.target||h;else{var re=T;T=new te(L,h),I(T,re)}if(re=!0,S)for(var ce=S.length-1;0<=ce;ce--){var ve=T.g=S[ce];re=at(ve,L,!0,T)&&re}if(ve=T.g=h,re=at(ve,L,!0,T)&&re,re=at(ve,L,!1,T)&&re,S)for(ce=0;ce<S.length;ce++)ve=T.g=S[ce],re=at(ve,L,!1,T)&&re}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var S=h.g[T],L=0;L<S.length;L++)ze(S[L]);delete h.g[T],h.h--}}this.F=null},Ke.prototype.K=function(h,T,S,L){return this.i.add(String(h),T,!1,S,L)},Ke.prototype.L=function(h,T,S,L){return this.i.add(String(h),T,!0,S,L)};function at(h,T,S,L){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var re=!0,ce=0;ce<T.length;++ce){var ve=T[ce];if(ve&&!ve.da&&ve.capture==S){var Je=ve.listener,sn=ve.ha||ve.src;ve.fa&&rt(h.i,ve),re=Je.call(sn,L)!==!1&&re}}return re&&!L.defaultPrevented}function St(h,T,S){if(typeof h=="function")S&&(h=v(h,S));else if(h&&typeof h.handleEvent=="function")h=v(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:f.setTimeout(h,T||0)}function Dt(h){h.g=St(()=>{h.g=null,h.i&&(h.i=!1,Dt(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class Vt extends J{constructor(T,S){super(),this.m=T,this.l=S,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Dt(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ut(h){J.call(this),this.h=h,this.g={}}C(Ut,J);var nn=[];function he(h){z(h.g,function(T,S){this.g.hasOwnProperty(S)&&Ct(T)},h),h.g={}}Ut.prototype.N=function(){Ut.aa.N.call(this),he(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=f.JSON.stringify,Ge=f.JSON.parse,Fe=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function Ye(){}Ye.prototype.h=null;function Pe(h){return h.h||(h.h=h.i())}function dt(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ot(){te.call(this,"d")}C(Ot,te);function Gn(){te.call(this,"c")}C(Gn,te);var _n={},bi=null;function Ai(){return bi=bi||new Ke}_n.La="serverreachability";function $n(h){te.call(this,_n.La,h)}C($n,te);function Dn(h){const T=Ai();qe(T,new $n(T))}_n.STAT_EVENT="statevent";function Fu(h,T){te.call(this,_n.STAT_EVENT,h),this.stat=T}C(Fu,te);function It(h){const T=Ai();qe(T,new Fu(T,h))}_n.Ma="timingevent";function rn(h,T){te.call(this,_n.Ma,h),this.size=T}C(rn,te);function Kt(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},T)}function ci(){this.g=!0}ci.prototype.xa=function(){this.g=!1};function Yo(h,T,S,L,re,ce){h.info(function(){if(h.g)if(ce)for(var ve="",Je=ce.split("&"),sn=0;sn<Je.length;sn++){var et=Je[sn].split("=");if(1<et.length){var dn=et[0];et=et[1];var an=dn.split("_");ve=2<=an.length&&an[1]=="type"?ve+(dn+"="+et+"&"):ve+(dn+"=redacted&")}}else ve=null;else ve=ce;return"XMLHTTP REQ ("+L+") [attempt "+re+"]: "+T+`
`+S+`
`+ve})}function Vf(h,T,S,L,re,ce,ve){h.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+re+"]: "+T+`
`+S+`
`+ce+" "+ve})}function Gr(h,T,S,L){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+Bs(h,S)+(L?" "+L:"")})}function Hu(h,T){h.info(function(){return"TIMEOUT: "+T})}ci.prototype.info=function(){};function Bs(h,T){if(!h.g)return T;if(!T)return null;try{var S=JSON.parse(T);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var L=S[h];if(!(2>L.length)){var re=L[1];if(Array.isArray(re)&&!(1>re.length)){var ce=re[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(var ve=1;ve<re.length;ve++)re[ve]=""}}}}return Me(S)}catch{return T}}var $r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ur={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pi;function Vi(){}C(Vi,Ye),Vi.prototype.g=function(){return new XMLHttpRequest},Vi.prototype.i=function(){return{}},Pi=new Vi;function Ln(h,T,S,L){this.j=h,this.i=T,this.l=S,this.R=L||1,this.U=new Ut(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ft}function Ft(){this.i=null,this.g="",this.h=!1}var Xo={},Pa={};function Si(h,T,S){h.L=1,h.v=Gs(Zn(T)),h.m=S,h.P=!0,cr(h,null)}function cr(h,T){h.F=Date.now(),zs(h),h.A=Zn(h.v);var S=h.A,L=h.R;Array.isArray(L)||(L=[String(L)]),nl(S.i,"t",L),h.C=0,S=h.j.J,h.h=new Ft,h.g=ac(h.j,S?T:null,!h.m),0<h.O&&(h.M=new Vt(v(h.Y,h,h.g),h.O)),T=h.U,S=h.g,L=h.ca;var re="readystatechange";Array.isArray(re)||(re&&(nn[0]=re.toString()),re=nn);for(var ce=0;ce<re.length;ce++){var ve=Pt(S,re[ce],L||T.handleEvent,!1,T.h||T);if(!ve)break;T.g[ve.key]=ve}T=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Dn(),Yo(h.i,h.u,h.A,h.l,h.R,h.m)}Ln.prototype.ca=function(h){h=h.target;const T=this.M;T&&mi(h)==3?T.j():this.Y(h)},Ln.prototype.Y=function(h){try{if(h==this.g)e:{const an=mi(this.g);var T=this.g.Ba();const vr=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||Zu(this.g)))){this.J||an!=4||T==7||(T==8||0>=vr?Dn(3):Dn(2)),Qr(this);var S=this.g.Z();this.X=S;t:if(Gu(this)){var L=Zu(this.g);h="";var re=L.length,ce=mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),Ui(this);var ve="";break t}this.h.i=new f.TextDecoder}for(T=0;T<re;T++)this.h.h=!0,h+=this.h.i.decode(L[T],{stream:!(ce&&T==re-1)});L.length=0,this.h.g+=h,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=S==200,Vf(this.i,this.u,this.A,this.l,this.R,an,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,sn=this.g;if((Je=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Je)){var et=Je;break t}}et=null}if(S=et)Gr(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qs(this,S);else{this.o=!1,this.s=3,It(12),En(this),Ui(this);break e}}if(this.P){S=!0;let Tn;for(;!this.J&&this.C<ve.length;)if(Tn=$u(this,ve),Tn==Pa){an==4&&(this.s=4,It(14),S=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==Xo){this.s=4,It(15),Gr(this.i,this.l,ve,"[Invalid Chunk]"),S=!1;break}else Gr(this.i,this.l,Tn,null),qs(this,Tn);if(Gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||ve.length!=0||this.h.h||(this.s=1,It(16),S=!1),this.o=this.o&&S,!S)Gr(this.i,this.l,ve,"[Invalid Chunked Response]"),En(this),Ui(this);else if(0<ve.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Js(dn),dn.M=!0,It(11))}}else Gr(this.i,this.l,ve,null),qs(this,ve);an==4&&En(this),this.o&&!this.J&&(an==4?ic(this.j,this):(this.o=!1,zs(this)))}else zf(this.g),S==400&&0<ve.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),En(this),Ui(this)}}}catch{}finally{}};function Gu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function $u(h,T){var S=h.C,L=T.indexOf(`
`,S);return L==-1?Pa:(S=Number(T.substring(S,L)),isNaN(S)?Xo:(L+=1,L+S>T.length?Pa:(T=T.slice(L,L+S),h.C=L+S,T)))}Ln.prototype.cancel=function(){this.J=!0,En(this)};function zs(h){h.S=Date.now()+h.I,Qu(h,h.I)}function Qu(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Kt(v(h.ba,h),T)}function Qr(h){h.B&&(f.clearTimeout(h.B),h.B=null)}Ln.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Hu(this.i,this.A),this.L!=2&&(Dn(),It(17)),En(this),this.s=2,Ui(this)):Qu(this,this.S-h)};function Ui(h){h.j.G==0||h.J||ic(h.j,h)}function En(h){Qr(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,he(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function qs(h,T){try{var S=h.j;if(S.G!=0&&(S.g==h||Wo(S.h,h))){if(!h.K&&Wo(S.h,h)&&S.G==3){try{var L=S.Da.g.parse(T)}catch{L=null}if(Array.isArray(L)&&L.length==3){var re=L;if(re[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)Qa(S),Ga(S);else break e;ol(S),It(18)}}else S.za=re[1],0<S.za-S.T&&37500>re[2]&&S.F&&S.v==0&&!S.C&&(S.C=Kt(v(S.Za,S),6e3));if(1>=Ua(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else yr(S,11)}else if((h.K||S.g==h)&&Qa(S),!H(T))for(re=S.Da.g.parse(T),T=0;T<re.length;T++){let et=re[T];if(S.T=et[0],et=et[1],S.G==2)if(et[0]=="c"){S.K=et[1],S.ia=et[2];const dn=et[3];dn!=null&&(S.la=dn,S.j.info("VER="+S.la));const an=et[4];an!=null&&(S.Aa=an,S.j.info("SVER="+S.Aa));const vr=et[5];vr!=null&&typeof vr=="number"&&0<vr&&(L=1.5*vr,S.L=L,S.j.info("backChannelRequestTimeoutMs_="+L)),L=S;const Tn=h.g;if(Tn){const Hi=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hi){var ce=L.h;ce.g||Hi.indexOf("spdy")==-1&&Hi.indexOf("quic")==-1&&Hi.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(La(ce,ce.h),ce.h=null))}if(L.D){const ul=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(L.ya=ul,gt(L.I,L.D,ul))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),L=S;var ve=h;if(L.qa=sc(L,L.J?L.ia:null,L.W),ve.K){jn(L.h,ve);var Je=ve,sn=L.L;sn&&(Je.I=sn),Je.B&&(Qr(Je),zs(Je)),L.g=ve}else tc(L);0<S.i.length&&$a(S)}else et[0]!="stop"&&et[0]!="close"||yr(S,7);else S.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?yr(S,7):sl(S):et[0]!="noop"&&S.l&&S.l.ta(et),S.v=0)}}Dn(4)}catch{}}var Ku=class{constructor(h,T){this.g=h,this.map=T}};function hr(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Va(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ua(h){return h.h?1:h.g?h.g.size:0}function Wo(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function La(h,T){h.g?h.g.add(T):h.h=T}function jn(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}hr.prototype.cancel=function(){if(this.i=Zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Zo(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const S of h.g.values())T=T.concat(S.D);return T}return V(h.i)}function Uf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var T=[],S=h.length,L=0;L<S;L++)T.push(h[L]);return T}T=[],S=0;for(L in h)T[S++]=h[L];return T}function ja(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var T=[];h=h.length;for(var S=0;S<h;S++)T.push(S);return T}T=[],S=0;for(const L in h)T[S++]=L;return T}}}function Jo(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var S=ja(h),L=Uf(h),re=L.length,ce=0;ce<re;ce++)T.call(void 0,L[ce],S&&S[ce],h)}var Fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lf(h,T){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var L=h[S].indexOf("="),re=null;if(0<=L){var ce=h[S].substring(0,L);re=h[S].substring(L+1)}else ce=h[S];T(ce,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Yt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Yt){this.h=h.h,Hs(this,h.j),this.o=h.o,this.g=h.g,Kr(this,h.s),this.l=h.l;var T=h.i,S=new dr;S.i=T.i,T.g&&(S.g=new Map(T.g),S.h=T.h),fr(this,S),this.m=h.m}else h&&(T=String(h).match(Fs))?(this.h=!1,Hs(this,T[1]||"",!0),this.o=hi(T[2]||""),this.g=hi(T[3]||"",!0),Kr(this,T[4]),this.l=hi(T[5]||"",!0),fr(this,T[6]||"",!0),this.m=hi(T[7]||"")):(this.h=!1,this.i=new dr(null,this.h))}Yt.prototype.toString=function(){var h=[],T=this.j;T&&h.push($s(T,el,!0),":");var S=this.g;return(S||T=="file")&&(h.push("//"),(T=this.o)&&h.push($s(T,el,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push($s(S,S.charAt(0)=="/"?jf:tl,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",$s(S,Ba)),h.join("")};function Zn(h){return new Yt(h)}function Hs(h,T,S){h.j=S?hi(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function Kr(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function fr(h,T,S){T instanceof dr?(h.i=T,Xu(h.i,h.h)):(S||(T=$s(T,Bf)),h.i=new dr(T,h.h))}function gt(h,T,S){h.i.set(T,S)}function Gs(h){return gt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function hi(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function $s(h,T,S){return typeof h=="string"?(h=encodeURI(h).replace(T,Yu),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var el=/[#\/\?@]/g,tl=/[#\?:]/g,jf=/[#\?]/g,Bf=/[#\?@]/g,Ba=/#/g;function dr(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function fi(h){h.g||(h.g=new Map,h.h=0,h.i&&Lf(h.i,function(T,S){h.add(decodeURIComponent(T.replace(/\+/g," ")),S)}))}i=dr.prototype,i.add=function(h,T){fi(this),this.i=null,h=Li(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(T),this.h+=1,this};function mr(h,T){fi(h),T=Li(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function pr(h,T){return fi(h),T=Li(h,T),h.g.has(T)}i.forEach=function(h,T){fi(this),this.g.forEach(function(S,L){S.forEach(function(re){h.call(T,re,L,this)},this)},this)},i.na=function(){fi(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),S=[];for(let L=0;L<T.length;L++){const re=h[L];for(let ce=0;ce<re.length;ce++)S.push(T[L])}return S},i.V=function(h){fi(this);let T=[];if(typeof h=="string")pr(this,h)&&(T=T.concat(this.g.get(Li(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)T=T.concat(h[S])}return T},i.set=function(h,T){return fi(this),this.i=null,h=Li(this,h),pr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},i.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function nl(h,T,S){mr(h,T),0<S.length&&(h.i=null,h.g.set(Li(h,T),V(S)),h.h+=S.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var S=0;S<T.length;S++){var L=T[S];const ce=encodeURIComponent(String(L)),ve=this.V(L);for(L=0;L<ve.length;L++){var re=ce;ve[L]!==""&&(re+="="+encodeURIComponent(String(ve[L]))),h.push(re)}}return this.i=h.join("&")};function Li(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function Xu(h,T){T&&!h.j&&(fi(h),h.i=null,h.g.forEach(function(S,L){var re=L.toLowerCase();L!=re&&(mr(this,L),nl(this,re,S))},h)),h.j=T}function Qs(h,T){const S=new ci;if(f.Image){const L=new Image;L.onload=A(di,S,"TestLoadImage: loaded",!0,T,L),L.onerror=A(di,S,"TestLoadImage: error",!1,T,L),L.onabort=A(di,S,"TestLoadImage: abort",!1,T,L),L.ontimeout=A(di,S,"TestLoadImage: timeout",!1,T,L),f.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=h}else T(!1)}function Ri(h,T){const S=new ci,L=new AbortController,re=setTimeout(()=>{L.abort(),di(S,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:L.signal}).then(ce=>{clearTimeout(re),ce.ok?di(S,"TestPingServer: ok",!0,T):di(S,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(re),di(S,"TestPingServer: error",!1,T)})}function di(h,T,S,L,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),L(S)}catch{}}function Ks(){this.g=new Fe}function ji(h,T,S){const L=S||"";try{Jo(h,function(re,ce){let ve=re;p(re)&&(ve=Me(re)),T.push(L+ce+"="+encodeURIComponent(ve))})}catch(re){throw T.push(L+"type="+encodeURIComponent("_badmap")),re}}function Yr(h){this.l=h.Ub||null,this.j=h.eb||!1}C(Yr,Ye),Yr.prototype.g=function(){return new gr(this.l,this.j)},Yr.prototype.i=function(h){return function(){return h}}({});function gr(h,T){Ke.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(gr,Ke),i=gr.prototype,i.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,zi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||f).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;il(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function il(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?Bi(this):zi(this),this.readyState==3&&il(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,Bi(this))},i.Qa=function(h){this.g&&(this.response=h,Bi(this))},i.ga=function(){this.g&&Bi(this)};function Bi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,zi(h)}i.setRequestHeader=function(h,T){this.u.append(h,T)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var S=T.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=T.next();return h.join(`\r
`)};function zi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function rl(h){let T="";return z(h,function(S,L){T+=L,T+=":",T+=S,T+=`\r
`}),T}function fn(h,T,S){e:{for(L in S){var L=!1;break e}L=!0}L||(S=rl(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):gt(h,T,S))}function ft(h){Ke.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(ft,Ke);var za=/^https?$/i,Ys=["POST","PUT"];i=ft.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,T,S,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pi.g(),this.v=this.o?Pe(this.o):Pe(Pi),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(ce){Wu(this,ce);return}if(h=S||"",S=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var re in L)S.set(re,L[re]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const ce of L.keys())S.set(ce,L.get(ce));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(S.keys()).find(ce=>ce.toLowerCase()=="content-type"),re=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Ys,T,void 0))||L||re||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,ve]of S)this.g.setRequestHeader(ce,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xs(this),this.u=!0,this.g.send(h),this.u=!1}catch(ce){Wu(this,ce)}};function Wu(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,qa(h),qi(h)}function qa(h){h.A||(h.A=!0,qe(h,"complete"),qe(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,qe(this,"complete"),qe(this,"abort"),qi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),ft.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},i.bb=function(){Fa(this)};function Fa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||mi(h)!=4||h.Z()!=2)){if(h.u&&mi(h)==4)St(h.Ea,0,h);else if(qe(h,"readystatechange"),mi(h)==4){h.h=!1;try{const ve=h.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var S;if(!(S=T)){var L;if(L=ve===0){var re=String(h.D).match(Fs)[1]||null;!re&&f.self&&f.self.location&&(re=f.self.location.protocol.slice(0,-1)),L=!za.test(re?re.toLowerCase():"")}S=L}if(S)qe(h,"complete"),qe(h,"success");else{h.m=6;try{var ce=2<mi(h)?h.g.statusText:""}catch{ce=""}h.l=ce+" ["+h.Z()+"]",qa(h)}}finally{qi(h)}}}}function qi(h,T){if(h.g){Xs(h);const S=h.g,L=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||qe(h,"ready");try{S.onreadystatechange=L}catch{}}}function Xs(h){h.I&&(f.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function mi(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<mi(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),Ge(T)}};function Zu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function zf(h){const T={};h=(h.g&&2<=mi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<h.length;L++){if(H(h[L]))continue;var S=D(h[L]);const re=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ce=T[re]||[];T[re]=ce,ce.push(S)}M(T,function(L){return L.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(h,T,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||T}function Ha(h){this.Aa=0,this.i=[],this.j=new ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ws("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ws("baseRetryDelayMs",5e3,h),this.cb=Ws("retryDelaySeedMs",1e4,h),this.Wa=Ws("forwardChannelMaxRetries",2,h),this.wa=Ws("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new hr(h&&h.concurrentRequestLimit),this.Da=new Ks,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ha.prototype,i.la=8,i.G=1,i.connect=function(h,T,S,L){It(0),this.W=h,this.H=T||{},S&&L!==void 0&&(this.H.OSID=S,this.H.OAID=L),this.F=this.X,this.I=sc(this,null,this.W),$a(this)};function sl(h){if(Ju(h),h.G==3){var T=h.U++,S=Zn(h.I);if(gt(S,"SID",h.K),gt(S,"RID",T),gt(S,"TYPE","terminate"),Zs(h,S),T=new Ln(h,h.j,T),T.L=2,T.v=Gs(Zn(S)),S=!1,f.navigator&&f.navigator.sendBeacon)try{S=f.navigator.sendBeacon(T.v.toString(),"")}catch{}!S&&f.Image&&(new Image().src=T.v,S=!0),S||(T.g=ac(T.j,null),T.g.ea(T.v)),T.F=Date.now(),zs(T)}rc(h)}function Ga(h){h.g&&(Js(h),h.g.cancel(),h.g=null)}function Ju(h){Ga(h),h.u&&(f.clearTimeout(h.u),h.u=null),Qa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function $a(h){if(!Va(h.h)&&!h.s){h.s=!0;var T=h.Ga;O||U(),ie||(O(),ie=!0),Z.add(T,h),h.B=0}}function qf(h,T){return Ua(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Kt(v(h.Ga,h,T),ll(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const re=new Ln(this,this.j,h);let ce=this.o;if(this.S&&(ce?(ce=w(ce),I(ce,this.S)):ce=this.S),this.m!==null||this.O||(re.H=ce,ce=null),this.P)e:{for(var T=0,S=0;S<this.i.length;S++){t:{var L=this.i[S];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(T+=L,4096<T){T=S;break e}if(T===4096||S===this.i.length-1){T=S+1;break e}}T=1e3}else T=1e3;T=ec(this,re,T),S=Zn(this.I),gt(S,"RID",h),gt(S,"CVER",22),this.D&&gt(S,"X-HTTP-Session-Id",this.D),Zs(this,S),ce&&(this.O?T="headers="+encodeURIComponent(String(rl(ce)))+"&"+T:this.m&&fn(S,this.m,ce)),La(this.h,re),this.Ua&&gt(S,"TYPE","init"),this.P?(gt(S,"$req",T),gt(S,"SID","null"),re.T=!0,Si(re,S,null)):Si(re,S,T),this.G=2}}else this.G==3&&(h?al(this,h):this.i.length==0||Va(this.h)||al(this))};function al(h,T){var S;T?S=T.l:S=h.U++;const L=Zn(h.I);gt(L,"SID",h.K),gt(L,"RID",S),gt(L,"AID",h.T),Zs(h,L),h.m&&h.o&&fn(L,h.m,h.o),S=new Ln(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),T&&(h.i=T.D.concat(h.i)),T=ec(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),La(h.h,S),Si(S,L,T)}function Zs(h,T){h.H&&z(h.H,function(S,L){gt(T,L,S)}),h.l&&Jo({},function(S,L){gt(T,L,S)})}function ec(h,T,S){S=Math.min(h.i.length,S);var L=h.l?v(h.l.Na,h.l,h):null;e:{var re=h.i;let ce=-1;for(;;){const ve=["count="+S];ce==-1?0<S?(ce=re[0].g,ve.push("ofs="+ce)):ce=0:ve.push("ofs="+ce);let Je=!0;for(let sn=0;sn<S;sn++){let et=re[sn].g;const dn=re[sn].map;if(et-=ce,0>et)ce=Math.max(0,re[sn].g-100),Je=!1;else try{ji(dn,ve,"req"+et+"_")}catch{L&&L(dn)}}if(Je){L=ve.join("&");break e}}}return h=h.i.splice(0,S),T.D=h,L}function tc(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;O||U(),ie||(O(),ie=!0),Z.add(T,h),h.v=0}}function ol(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Kt(v(h.Fa,h),ll(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,nc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Kt(v(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Ga(this),nc(this))};function Js(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function nc(h){h.g=new Ln(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=Zn(h.qa);gt(T,"RID","rpc"),gt(T,"SID",h.K),gt(T,"AID",h.T),gt(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&gt(T,"TO",h.ja),gt(T,"TYPE","xmlhttp"),Zs(h,T),h.m&&h.o&&fn(T,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=Gs(Zn(T)),S.m=null,S.P=!0,cr(S,h)}i.Za=function(){this.C!=null&&(this.C=null,Ga(this),ol(this),It(19))};function Qa(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function ic(h,T){var S=null;if(h.g==T){Qa(h),Js(h),h.g=null;var L=2}else if(Wo(h.h,T))S=T.D,jn(h.h,T),L=1;else return;if(h.G!=0){if(T.o)if(L==1){S=T.m?T.m.length:0,T=Date.now()-T.F;var re=h.B;L=Ai(),qe(L,new rn(L,S)),$a(h)}else tc(h);else if(re=T.s,re==3||re==0&&0<T.X||!(L==1&&qf(h,T)||L==2&&ol(h)))switch(S&&0<S.length&&(T=h.h,T.i=T.i.concat(S)),re){case 1:yr(h,5);break;case 4:yr(h,10);break;case 3:yr(h,6);break;default:yr(h,2)}}}function ll(h,T){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*T}function yr(h,T){if(h.j.info("Error code "+T),T==2){var S=v(h.fb,h),L=h.Xa;const re=!L;L=new Yt(L||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Hs(L,"https"),Gs(L),re?Qs(L.toString(),S):Ri(L.toString(),S)}else It(2);h.G=0,h.l&&h.l.sa(T),rc(h),Ju(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function rc(h){if(h.G=0,h.ka=[],h.l){const T=Zo(h.h);(T.length!=0||h.i.length!=0)&&(j(h.ka,T),j(h.ka,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.ra()}}function sc(h,T,S){var L=S instanceof Yt?Zn(S):new Yt(S);if(L.g!="")T&&(L.g=T+"."+L.g),Kr(L,L.s);else{var re=f.location;L=re.protocol,T=T?T+"."+re.hostname:re.hostname,re=+re.port;var ce=new Yt(null);L&&Hs(ce,L),T&&(ce.g=T),re&&Kr(ce,re),S&&(ce.l=S),L=ce}return S=h.D,T=h.ya,S&&T&&gt(L,S,T),gt(L,"VER",h.la),Zs(h,L),L}function ac(h,T,S){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new ft(new Yr({eb:S})):new ft(h.pa),T.Ha(h.J),T}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function oc(){}i=oc.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ka(){}Ka.prototype.g=function(h,T){return new Bn(h,T)};function Bn(h,T){Ke.call(this),this.g=new Ha(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!H(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!H(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new Fi(this)}C(Bn,Ke),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){sl(this.g)},Bn.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=Me(h),h=S);T.i.push(new Ku(T.Ya++,h)),T.G==3&&$a(T)},Bn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,Bn.aa.N.call(this)};function lc(h){Ot.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const S in T){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}C(lc,Ot);function uc(){Gn.call(this),this.status=1}C(uc,Gn);function Fi(h){this.g=h}C(Fi,oc),Fi.prototype.ua=function(){qe(this.g,"a")},Fi.prototype.ta=function(h){qe(this.g,new lc(h))},Fi.prototype.sa=function(h){qe(this.g,new uc)},Fi.prototype.ra=function(){qe(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,FE=function(){return new Ka},qE=function(){return Ai()},zE=_n,up={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$r.NO_ERROR=0,$r.TIMEOUT=8,$r.HTTP_ERROR=6,Th=$r,ur.COMPLETE="complete",BE=ur,dt.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,nu=dt,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,jE=ft}).apply(typeof hh<"u"?hh:typeof self<"u"?self:typeof window<"u"?window:{});const M0="@firebase/firestore",P0="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn("google-credentials-uid"),Vn.FIRST_PARTY=new Vn("first-party-uid"),Vn.MOCK_USER=new Vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new qp("@firebase/firestore");function Ao(){return ba.logLevel}function Ee(i,...e){if(ba.logLevel<=Xe.DEBUG){const t=e.map(Gp);ba.debug(`Firestore (${Ho}): ${i}`,...t)}}function Br(i,...e){if(ba.logLevel<=Xe.ERROR){const t=e.map(Gp);ba.error(`Firestore (${Ho}): ${i}`,...t)}}function Po(i,...e){if(ba.logLevel<=Xe.WARN){const t=e.map(Gp);ba.warn(`Firestore (${Ho}): ${i}`,...t)}}function Gp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,HE(i,s,t)}function HE(i,e,t){let s=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Br(s),new Error(s)}function it(i,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,i||HE(e,a,s)}function ke(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _C{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vn.UNAUTHENTICATED))}shutdown(){}}class EC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TC{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new er;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new er,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},f=m=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new er)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(it(typeof s.accessToken=="string",31837,{l:s}),new GE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new Vn(e)}}class wC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new wC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const s=l=>{l.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new V0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new V0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=SC(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Be(i,e){return i<e?-1:i>e?1:0}function cp(i,e){let t=0;for(;t<i.length&&t<e.length;){const s=i.codePointAt(t),a=e.codePointAt(t);if(s!==a){if(s<128&&a<128)return Be(s,a);{const l=$E(),c=RC(l.encode(U0(i,t)),l.encode(U0(e,t)));return c!==0?c:Be(s,a)}}t+=s>65535?2:1}return Be(i.length,e.length)}function U0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function RC(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Be(i[t],e[t]);return Be(i.length,e.length)}function Vo(i,e,t){return i.length===e.length&&i.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=-62135596800,j0=1e6;class un{static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*j0);return new un(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<L0)throw new _e(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j0}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-L0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new un(0,0))}static max(){return new Ne(new un(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__name__";class Xi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ce(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xi?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Xi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const s=Xi.isNumericId(e),a=Xi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Xi.extractNumericId(e).compare(Xi.extractNumericId(t)):cp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cs.fromString(e.substring(4,e.length-2))}}class At extends Xi{construct(e,t,s){return new At(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(pe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new At(t)}static emptyPath(){return new At([])}}const CC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends Xi{construct(e,t,s){return new Rn(e,t,s)}static isValidIdentifier(e){return CC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B0}static keyField(){return new Rn([B0])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new _e(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new _e(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new _e(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(s+=f,a++):(l(),a++)}if(l(),c)throw new _e(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(t)}static emptyPath(){return new Rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(At.fromString(e))}static fromName(e){return new Se(At.fromString(e).popFirst(5))}static empty(){return new Se(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return At.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new At(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=-1;function IC(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Ne.fromTimestamp(s===1e9?new un(t+1,0):new un(t,s));return new Ns(a,Se.empty(),e)}function xC(i){return new Ns(i.readTime,i.key,yu)}class Ns{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ns(Ne.min(),Se.empty(),yu)}static max(){return new Ns(Ne.max(),Se.empty(),yu)}}function NC(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(i.documentKey,e.documentKey),t!==0?t:Be(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(i){if(i.code!==pe.FAILED_PRECONDITION||i.message!==DC)throw i;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,s)=>{t(e)})}static reject(e){return new ye((t,s)=>{s(e)})}static waitFor(e){return new ye((t,s)=>{let a=0,l=0,c=!1;e.forEach(f=>{++a,f.next(()=>{++l,c&&l===a&&t()},m=>s(m))}),c=!0,l===a&&t()})}static or(e){let t=ye.resolve(!1);for(const s of e)t=t.next(a=>a?ye.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new ye((s,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(y=>{c[p]=y,++f,f===l&&s(c)},y=>a(y))}})}static doWhile(e,t){return new ye((s,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):s()};l()})}}function kC(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $o(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ff.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=-1;function xu(i){return i==null}function Ph(i){return i===0&&1/i==-1/0}function MC(i){return typeof i=="number"&&Number.isInteger(i)&&!Ph(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="";function PC(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=z0(e)),e=VC(i.get(t),e);return z0(e)}function VC(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case KE:t+="";break;default:t+=l}}return t}function z0(i){return i+KE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ls(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function YE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Sn.RED,this.left=a??Sn.EMPTY,this.right=l??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Sn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Sn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new F0(this.data.getIterator())}getIteratorFrom(e){return new F0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class F0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new oi([])}unionWith(e){let t=new cn(Rn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new XE("Invalid base64 string: "+l):l}}(e);return new Nn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new Nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const UC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ds(i){if(it(!!i,39018),typeof i=="string"){let e=0;const t=UC.exec(i);if(it(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:$t(i.seconds),nanos:$t(i.nanos)}}function $t(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Os(i){return typeof i=="string"?Nn.fromBase64String(i):Nn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="server_timestamp",ZE="__type__",JE="__previous_value__",eT="__local_write_time__";function Qp(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZE])===null||t===void 0?void 0:t.stringValue)===WE}function df(i){const e=i.mapValue.fields[JE];return Qp(e)?df(e):e}function vu(i){const e=Ds(i.mapValue.fields[eT].timestampValue);return new un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t,s,a,l,c,f,m,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y}}const Vh="(default)";class _u{constructor(e,t){this.projectId=e,this.database=t||Vh}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database===Vh}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="__type__",jC="__max__",dh={mapValue:{}},nT="__vector__",Uh="value";function ks(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Qp(i)?4:zC(i)?9007199254740991:BC(i)?10:11:Ce(28295,{value:i})}function rr(i,e){if(i===e)return!0;const t=ks(i);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return vu(i).isEqual(vu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ds(a.timestampValue),f=Ds(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,l){return Os(a.bytesValue).isEqual(Os(l.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,l){return $t(a.geoPointValue.latitude)===$t(l.geoPointValue.latitude)&&$t(a.geoPointValue.longitude)===$t(l.geoPointValue.longitude)}(i,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return $t(a.integerValue)===$t(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=$t(a.doubleValue),f=$t(l.doubleValue);return c===f?Ph(c)===Ph(f):isNaN(c)&&isNaN(f)}return!1}(i,e);case 9:return Vo(i.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(q0(c)!==q0(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!rr(c[m],f[m])))return!1;return!0}(i,e);default:return Ce(52216,{left:i})}}function Eu(i,e){return(i.values||[]).find(t=>rr(t,e))!==void 0}function Uo(i,e){if(i===e)return 0;const t=ks(i),s=ks(e);if(t!==s)return Be(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(i.booleanValue,e.booleanValue);case 2:return function(l,c){const f=$t(l.integerValue||l.doubleValue),m=$t(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(i,e);case 3:return H0(i.timestampValue,e.timestampValue);case 4:return H0(vu(i),vu(e));case 5:return cp(i.stringValue,e.stringValue);case 6:return function(l,c){const f=Os(l),m=Os(c);return f.compareTo(m)}(i.bytesValue,e.bytesValue);case 7:return function(l,c){const f=l.split("/"),m=c.split("/");for(let p=0;p<f.length&&p<m.length;p++){const y=Be(f[p],m[p]);if(y!==0)return y}return Be(f.length,m.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,c){const f=Be($t(l.latitude),$t(c.latitude));return f!==0?f:Be($t(l.longitude),$t(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return G0(i.arrayValue,e.arrayValue);case 10:return function(l,c){var f,m,p,y;const _=l.fields||{},v=c.fields||{},A=(f=_[Uh])===null||f===void 0?void 0:f.arrayValue,C=(m=v[Uh])===null||m===void 0?void 0:m.arrayValue,V=Be(((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0,((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0);return V!==0?V:G0(A,C)}(i.mapValue,e.mapValue);case 11:return function(l,c){if(l===dh.mapValue&&c===dh.mapValue)return 0;if(l===dh.mapValue)return 1;if(c===dh.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let _=0;_<m.length&&_<y.length;++_){const v=cp(m[_],y[_]);if(v!==0)return v;const A=Uo(f[m[_]],p[y[_]]);if(A!==0)return A}return Be(m.length,y.length)}(i.mapValue,e.mapValue);default:throw Ce(23264,{Pe:t})}}function H0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Be(i,e);const t=Ds(i),s=Ds(e),a=Be(t.seconds,s.seconds);return a!==0?a:Be(t.nanos,s.nanos)}function G0(i,e){const t=i.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Uo(t[a],s[a]);if(l)return l}return Be(t.length,s.length)}function Lo(i){return hp(i)}function hp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const s=Ds(t);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Os(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return Se.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=hp(l);return s+"]"}(i.arrayValue):"mapValue"in i?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${hp(t.fields[c])}`;return a+"}"}(i.mapValue):Ce(61005,{value:i})}function wh(i){switch(ks(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=df(i);return e?16+wh(e):16;case 5:return 2*i.stringValue.length;case 6:return Os(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,l)=>a+wh(l),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return Ls(s.fields,(l,c)=>{a+=l.length+wh(c)}),a}(i.mapValue);default:throw Ce(13486,{value:i})}}function $0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function fp(i){return!!i&&"integerValue"in i}function Kp(i){return!!i&&"arrayValue"in i}function Q0(i){return!!i&&"nullValue"in i}function K0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function bh(i){return!!i&&"mapValue"in i}function BC(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[tT])===null||t===void 0?void 0:t.stringValue)===nT}function ou(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ls(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ou(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(i.arrayValue.values[t]);return e}return Object.assign({},i)}function zC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===jC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=Rn.emptyPath(),s={},a=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,a),s={},a=[],t=f.popLast()}c?s[f.lastSegment()]=ou(c):a.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];bh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ls(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Fn(ou(this.value))}}function iT(i){const e=[];return Ls(i.fields,(t,s)=>{const a=new Rn([t]);if(bh(s)){const l=iT(s.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t,s,a,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new vn(e,0,Ne.min(),Ne.min(),Ne.min(),Fn.empty(),0)}static newFoundDocument(e,t,s,a){return new vn(e,1,t,Ne.min(),s,a,0)}static newNoDocument(e,t){return new vn(e,2,t,Ne.min(),Ne.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,Ne.min(),Ne.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this.position=e,this.inclusive=t}}function Y0(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?s=Se.comparator(Se.fromName(c.referenceValue),t.key):s=Uo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function X0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!rr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t="asc"){this.field=e,this.dir=t}}function qC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{}class Jt extends rT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new HC(e,t,s):t==="array-contains"?new QC(e,s):t==="in"?new KC(e,s):t==="not-in"?new YC(e,s):t==="array-contains-any"?new XC(e,s):new Jt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new GC(e,s):new $C(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Uo(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(Uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oi extends rT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Oi(e,t)}matches(e){return sT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function sT(i){return i.op==="and"}function aT(i){return FC(i)&&sT(i)}function FC(i){for(const e of i.filters)if(e instanceof Oi)return!1;return!0}function dp(i){if(i instanceof Jt)return i.field.canonicalString()+i.op.toString()+Lo(i.value);if(aT(i))return i.filters.map(e=>dp(e)).join(",");{const e=i.filters.map(t=>dp(t)).join(",");return`${i.op}(${e})`}}function oT(i,e){return i instanceof Jt?function(s,a){return a instanceof Jt&&s.op===a.op&&s.field.isEqual(a.field)&&rr(s.value,a.value)}(i,e):i instanceof Oi?function(s,a){return a instanceof Oi&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((l,c,f)=>l&&oT(c,a.filters[f]),!0):!1}(i,e):void Ce(19439)}function lT(i){return i instanceof Jt?function(t){return`${t.field.canonicalString()} ${t.op} ${Lo(t.value)}`}(i):i instanceof Oi?function(t){return t.op.toString()+" {"+t.getFilters().map(lT).join(" ,")+"}"}(i):"Filter"}class HC extends Jt{constructor(e,t,s){super(e,t,s),this.key=Se.fromName(s.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class GC extends Jt{constructor(e,t){super(e,"in",t),this.keys=uT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $C extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=uT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uT(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>Se.fromName(s.referenceValue))}class QC extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kp(t)&&Eu(t.arrayValue,this.value)}}class KC extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}}class YC extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Eu(this.value.arrayValue,t)}}class XC extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Eu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t=null,s=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Ie=null}}function W0(i,e=null,t=[],s=[],a=null,l=null,c=null){return new WC(i,e,t,s,a,l,c)}function Yp(i){const e=ke(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>dp(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),xu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Lo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Lo(s)).join(",")),e.Ie=t}return e.Ie}function Xp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!qC(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!oT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!X0(i.startAt,e.startAt)&&X0(i.endAt,e.endAt)}function mp(i){return Se.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t=null,s=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function ZC(i,e,t,s,a,l,c,f){return new Nu(i,e,t,s,a,l,c,f)}function mf(i){return new Nu(i)}function Z0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function cT(i){return i.collectionGroup!==null}function lu(i){const e=ke(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new cn(Rn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(f=f.add(p.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new jh(l,s))}),t.has(Rn.keyField().canonicalString())||e.Ee.push(new jh(Rn.keyField(),s))}return e.Ee}function tr(i){const e=ke(i);return e.de||(e.de=JC(e,lu(i))),e.de}function JC(i,e){if(i.limitType==="F")return W0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new jh(a.field,l)});const t=i.endAt?new Lh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Lh(i.startAt.position,i.startAt.inclusive):null;return W0(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function pp(i,e){const t=i.filters.concat([e]);return new Nu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function gp(i,e,t){return new Nu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function pf(i,e){return Xp(tr(i),tr(e))&&i.limitType===e.limitType}function hT(i){return`${Yp(tr(i))}|lt:${i.limitType}`}function So(i){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>lT(a)).join(", ")}]`),xu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>Lo(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>Lo(a)).join(",")),`Target(${s})`}(tr(i))}; limitType=${i.limitType})`}function gf(i,e){return e.isFoundDocument()&&function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Se.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(i,e)&&function(s,a){for(const l of lu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(c,f,m){const p=Y0(c,f,m);return c.inclusive?p<=0:p<0}(s.startAt,lu(s),a)||s.endAt&&!function(c,f,m){const p=Y0(c,f,m);return c.inclusive?p>=0:p>0}(s.endAt,lu(s),a))}(i,e)}function eI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function fT(i){return(e,t)=>{let s=!1;for(const a of lu(i)){const l=tI(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function tI(i,e,t){const s=i.field.isKeyField()?Se.comparator(e.key,t.key):function(l,c,f){const m=c.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Uo(m,p):Ce(42886)}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return YE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new Mt(Se.comparator);function zr(){return nI}const dT=new Mt(Se.comparator);function iu(...i){let e=dT;for(const t of i)e=e.insert(t.key,t);return e}function mT(i){let e=dT;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ga(){return uu()}function pT(){return uu()}function uu(){return new Da(i=>i.toString(),(i,e)=>i.isEqual(e))}const iI=new Mt(Se.comparator),rI=new cn(Se.comparator);function We(...i){let e=rI;for(const t of i)e=e.add(t);return e}const sI=new cn(Be);function aI(){return sI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function gT(i){return{integerValue:""+i}}function oI(i,e){return MC(e)?gT(e):Wp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function lI(i,e,t){return i instanceof Bh?function(a,l){const c={fields:{[ZE]:{stringValue:WE},[eT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Qp(l)&&(l=df(l)),l&&(c.fields[JE]=l),{mapValue:c}}(t,e):i instanceof Tu?vT(i,e):i instanceof wu?_T(i,e):function(a,l){const c=yT(a,l),f=J0(c)+J0(a.Re);return fp(c)&&fp(a.Re)?gT(f):Wp(a.serializer,f)}(i,e)}function uI(i,e,t){return i instanceof Tu?vT(i,e):i instanceof wu?_T(i,e):t}function yT(i,e){return i instanceof zh?function(s){return fp(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Bh extends yf{}class Tu extends yf{constructor(e){super(),this.elements=e}}function vT(i,e){const t=ET(e);for(const s of i.elements)t.some(a=>rr(a,s))||t.push(s);return{arrayValue:{values:t}}}class wu extends yf{constructor(e){super(),this.elements=e}}function _T(i,e){let t=ET(e);for(const s of i.elements)t=t.filter(a=>!rr(a,s));return{arrayValue:{values:t}}}class zh extends yf{constructor(e,t){super(),this.serializer=e,this.Re=t}}function J0(i){return $t(i.integerValue||i.doubleValue)}function ET(i){return Kp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function cI(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof Tu&&a instanceof Tu||s instanceof wu&&a instanceof wu?Vo(s.elements,a.elements,rr):s instanceof zh&&a instanceof zh?rr(s.Re,a.Re):s instanceof Bh&&a instanceof Bh}(i.transform,e.transform)}class hI{constructor(e,t){this.version=e,this.transformResults=t}}class Cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class vf{}function TT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new _f(i.key,Cn.none()):new Du(i.key,i.data,Cn.none());{const t=i.data,s=Fn.empty();let a=new cn(Rn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new js(i.key,s,new oi(a.toArray()),Cn.none())}}function fI(i,e,t){i instanceof Du?function(a,l,c){const f=a.value.clone(),m=t1(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(i,e,t):i instanceof js?function(a,l,c){if(!Ah(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=t1(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(wT(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(i,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function cu(i,e,t,s){return i instanceof Du?function(l,c,f,m){if(!Ah(l.precondition,c))return f;const p=l.value.clone(),y=n1(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(i,e,t,s):i instanceof js?function(l,c,f,m){if(!Ah(l.precondition,c))return f;const p=n1(l.fieldTransforms,m,c),y=c.data;return y.setAll(wT(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(_=>_.field))}(i,e,t,s):function(l,c,f){return Ah(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(i,e,t)}function dI(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),l=yT(s.transform,a||null);l!=null&&(t===null&&(t=Fn.empty()),t.set(s.field,l))}return t||null}function e1(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Vo(s,a,(l,c)=>cI(l,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Du extends vf{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class js extends vf{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function wT(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function t1(i,e,t){const s=new Map;it(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,f=e.data.field(l.field);s.set(l.field,uI(c,f,t[a]))}return s}function n1(i,e,t){const s=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);s.set(a.field,lI(l,c,e))}return s}class _f extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bT extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&fI(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=cu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=cu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=pT();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=TT(c,f);m!==null&&s.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ne.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),We())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(t,s)=>e1(t,s))&&Vo(this.baseMutations,e.baseMutations,(t,s)=>e1(t,s))}}class Zp{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){it(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let a=function(){return iI}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,s[c].version);return new Zp(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,nt;function AT(i){switch(i){case pe.OK:return Ce(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ce(15467,{code:i})}}function ST(i){if(i===void 0)return Br("GRPC error has no .code"),pe.UNKNOWN;switch(i){case Zt.OK:return pe.OK;case Zt.CANCELLED:return pe.CANCELLED;case Zt.UNKNOWN:return pe.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return pe.INTERNAL;case Zt.UNAVAILABLE:return pe.UNAVAILABLE;case Zt.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Zt.NOT_FOUND:return pe.NOT_FOUND;case Zt.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Zt.ABORTED:return pe.ABORTED;case Zt.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Zt.DATA_LOSS:return pe.DATA_LOSS;default:return Ce(39323,{code:i})}}(nt=Zt||(Zt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new Cs([4294967295,4294967295],0);function i1(i){const e=$E().encode(i),t=new LE;return t.update(e),new Uint8Array(t.digest())}function r1(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Cs([t,s],0),new Cs([a,l],0)]}class Jp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ru(`Invalid padding: ${t}`);if(s<0)throw new ru(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ru(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Cs.fromNumber(this.pe)}we(e,t,s){let a=e.add(t.multiply(Cs.fromNumber(s)));return a.compare(yI)===1&&(a=new Cs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=i1(e),[s,a]=r1(t);for(let l=0;l<this.hashCount;l++){const c=this.we(s,a,l);if(!this.be(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Jp(l,a,t);return s.forEach(f=>c.insert(f)),c}insert(e){if(this.pe===0)return;const t=i1(e),[s,a]=r1(t);for(let l=0;l<this.hashCount;l++){const c=this.we(s,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ef(Ne.min(),a,new Mt(Be),zr(),We())}}class Ou{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ou(s,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t,s,a){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=a}}class RT{constructor(e,t){this.targetId=e,this.Ce=t}}class CT{constructor(e,t,s=Nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class s1{constructor(){this.Fe=0,this.Me=a1(),this.xe=Nn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=We(),t=We(),s=We();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ce(38017,{changeType:l})}}),new Ou(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=a1()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,it(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class vI{constructor(e){this.ze=e,this.je=new Map,this.He=zr(),this.Je=mh(),this.Ye=mh(),this.Ze=new Mt(Be)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,s=e.Ce.count,a=this._t(t);if(a){const l=a.target;if(mp(l))if(s===0){const c=new Se(l.path);this.tt(t,c,vn.newNoDocument(c,Ne.min()))}else it(s===1,20013,{expectedCount:s});else{const c=this.ut(t);if(c!==s){const f=this.ct(e),m=f?this.lt(f,e,c):1;if(m!==0){this.st(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=Os(s).toUint8Array()}catch(m){if(m instanceof XE)return Po("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Jp(c,a,l)}catch(m){return Po(m instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.pe===0?null:f}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let a=0;return s.forEach(l=>{const c=this.ze.Pt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.tt(t,l,null),a++)}),a}It(e){const t=new Map;this.je.forEach((l,c)=>{const f=this._t(c);if(f){if(l.current&&mp(f.target)){const m=new Se(f.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,vn.newNoDocument(m,e))}l.Le&&(t.set(c,l.qe()),l.Qe())}});let s=We();this.Ye.forEach((l,c)=>{let f=!0;c.forEachWhile(m=>{const p=this._t(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new Ef(e,t,this.Ze,this.He,s);return this.He=zr(),this.Je=mh(),this.Ye=mh(),this.Ze=new Mt(Be),a}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new s1,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new cn(Be),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new cn(Be),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new s1),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function mh(){return new Mt(Se.comparator)}function a1(){return new Mt(Se.comparator)}const _I={asc:"ASCENDING",desc:"DESCENDING"},EI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TI={and:"AND",or:"OR"};class wI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yp(i,e){return i.useProto3Json||xu(e)?e:{value:e}}function qh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function bI(i,e){return qh(i,e.toTimestamp())}function ui(i){return it(!!i,49232),Ne.fromTimestamp(function(t){const s=Ds(t);return new un(s.seconds,s.nanos)}(i))}function eg(i,e){return vp(i,e).canonicalString()}function vp(i,e){const t=function(a){return new At(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?t:t.child(e)}function xT(i){const e=At.fromString(i);return it(PT(e),10190,{key:e.toString()}),e}function Fh(i,e){return eg(i.databaseId,e.path)}function hu(i,e){const t=xT(e);if(t.get(1)!==i.databaseId.projectId)throw new _e(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new _e(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Se(DT(t))}function NT(i,e){return eg(i.databaseId,e)}function AI(i){const e=xT(i);return e.length===4?At.emptyPath():DT(e)}function _p(i){return new At(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function DT(i){return it(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function o1(i,e,t){return{name:Fh(i,e),fields:t.value.mapValue.fields}}function SI(i,e){return"found"in e?function(s,a){it(!!a.found,43571),a.found.name,a.found.updateTime;const l=hu(s,a.found.name),c=ui(a.found.updateTime),f=a.found.createTime?ui(a.found.createTime):Ne.min(),m=new Fn({mapValue:{fields:a.found.fields}});return vn.newFoundDocument(l,c,f,m)}(i,e):"missing"in e?function(s,a){it(!!a.missing,3894),it(!!a.readTime,22933);const l=hu(s,a.missing),c=ui(a.readTime);return vn.newNoDocument(l,c)}(i,e):Ce(7234,{result:e})}function RI(i,e){let t;if("targetChange"in e){e.targetChange;const s=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(it(y===void 0||typeof y=="string",58123),Nn.fromBase64String(y||"")):(it(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Nn.fromUint8Array(y||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(p){const y=p.code===void 0?pe.UNKNOWN:ST(p.code);return new _e(y,p.message||"")}(c);t=new CT(s,a,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=hu(i,s.document.name),l=ui(s.document.updateTime),c=s.document.createTime?ui(s.document.createTime):Ne.min(),f=new Fn({mapValue:{fields:s.document.fields}}),m=vn.newFoundDocument(a,l,c,f),p=s.targetIds||[],y=s.removedTargetIds||[];t=new Sh(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=hu(i,s.document),l=s.readTime?ui(s.readTime):Ne.min(),c=vn.newNoDocument(a,l),f=s.removedTargetIds||[];t=new Sh([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=hu(i,s.document),l=s.removedTargetIds||[];t=new Sh([],l,a,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new gI(a,l),f=s.targetId;t=new RT(f,c)}}return t}function OT(i,e){let t;if(e instanceof Du)t={update:o1(i,e.key,e.value)};else if(e instanceof _f)t={delete:Fh(i,e.key)};else if(e instanceof js)t={update:o1(i,e.key,e.data),updateMask:PI(e.fieldMask)};else{if(!(e instanceof bT))return Ce(16599,{ft:e.type});t={verify:Fh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,c){const f=c.transform;if(f instanceof Bh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Tu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof wu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof zh)return{fieldPath:c.field.canonicalString(),increment:f.Re};throw Ce(20930,{transform:c.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:bI(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)}(i,e.precondition)),t}function CI(i,e){return i&&i.length>0?(it(e!==void 0,14353),i.map(t=>function(a,l){let c=a.updateTime?ui(a.updateTime):ui(l);return c.isEqual(Ne.min())&&(c=ui(l)),new hI(c,a.transformResults||[])}(t,e))):[]}function II(i,e){return{documents:[NT(i,e.path)]}}function xI(i,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=NT(i,a);const l=function(p){if(p.length!==0)return MT(Oi.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(v){return{field:Ro(v.field),direction:OI(v.dir)}}(y))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=yp(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:t,parent:a}}function NI(i){let e=AI(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){it(s===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=function(_){const v=kT(_);return v instanceof Oi&&aT(v)?v.getFilters():[v]}(t.where));let c=[];t.orderBy&&(c=function(_){return _.map(v=>function(C){return new jh(Co(C.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(v))}(t.orderBy));let f=null;t.limit&&(f=function(_){let v;return v=typeof _=="object"?_.value:_,xu(v)?null:v}(t.limit));let m=null;t.startAt&&(m=function(_){const v=!!_.before,A=_.values||[];return new Lh(A,v)}(t.startAt));let p=null;return t.endAt&&(p=function(_){const v=!_.before,A=_.values||[];return new Lh(A,v)}(t.endAt)),ZC(e,a,c,l,f,"F",m,p)}function DI(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function kT(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Co(t.unaryFilter.field);return Jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Co(t.unaryFilter.field);return Jt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Co(t.unaryFilter.field);return Jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Co(t.unaryFilter.field);return Jt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(i):i.fieldFilter!==void 0?function(t){return Jt.create(Co(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Oi.create(t.compositeFilter.filters.map(s=>kT(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(t.compositeFilter.op))}(i):Ce(30097,{filter:i})}function OI(i){return _I[i]}function kI(i){return EI[i]}function MI(i){return TI[i]}function Ro(i){return{fieldPath:i.canonicalString()}}function Co(i){return Rn.fromServerFormat(i.fieldPath)}function MT(i){return i instanceof Jt?function(t){if(t.op==="=="){if(K0(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NAN"}};if(Q0(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(K0(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NAN"}};if(Q0(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(t.field),op:kI(t.op),value:t.value}}}(i):i instanceof Oi?function(t){const s=t.getFilters().map(a=>MT(a));return s.length===1?s[0]:{compositeFilter:{op:MI(t.op),filters:s}}}(i):Ce(54877,{filter:i})}function PI(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t,s,a,l=Ne.min(),c=Ne.min(),f=Nn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.wt=e}}function UI(i){const e=NI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?gp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.Cn=new jI}addToCollectionParentIndex(e,t){return this.Cn.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(Ns.min())}updateCollectionGroup(e,t,s){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class jI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new cn(At.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new cn(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VT=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(VT,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new jo(0)}static lr(){return new jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="LruGarbageCollector",BI=1048576;function c1([i,e],[t,s]){const a=Be(i,t);return a===0?Be(e,s):a}class zI{constructor(e){this.Er=e,this.buffer=new cn(c1),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();c1(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qI{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Ee(u1,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?Ee(u1,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.mr(3e5)})}}class FI{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ye.resolve(ff.le);const s=new zI(t);return this.gr.forEachTarget(e,a=>s.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>s.Rr(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.gr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(l1)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l1):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let s,a,l,c,f,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a))).next(_=>(s=_,f=Date.now(),this.removeTargets(e,s,t))).next(_=>(l=_,m=Date.now(),this.removeOrphanedDocuments(e,s))).next(_=>(p=Date.now(),Ao()<=Xe.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${_} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_})))}}function HI(i,e){return new FI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.changes=new Da(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ye.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&cu(s.mutation,a,oi.empty(),un.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,We()).next(()=>s))}getLocalViewOfDocuments(e,t,s=We()){const a=ga();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let c=iu();return l.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const s=ga();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,We()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,s,a){let l=zr();const c=uu(),f=function(){return uu()}();return t.forEach((m,p)=>{const y=s.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof js)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),cu(y.mutation,p,y.mutation.getFieldMask(),un.now())):c.set(p.key,oi.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,y)=>c.set(p,y)),t.forEach((p,y)=>{var _;return f.set(p,new $I(y,(_=c.get(p))!==null&&_!==void 0?_:null))}),f))}recalculateAndSaveOverlays(e,t){const s=uu();let a=new Mt((c,f)=>c-f),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let y=s.get(m)||oi.empty();y=f.applyToLocalView(p,y),s.set(m,y);const _=(a.get(f.batchId)||We()).add(m);a=a.insert(f.batchId,_)})}).next(()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,y=m.value,_=pT();y.forEach(v=>{if(!l.has(v)){const A=TT(t.get(v),s.get(v));A!==null&&_.set(v,A),l=l.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,_))}return ye.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(c){return Se.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ye.resolve(ga());let f=yu,m=l;return c.next(p=>ye.forEach(p,(y,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),l.get(y)?ye.resolve():this.remoteDocumentCache.getEntry(e,y).next(v=>{m=m.insert(y,v)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,We())).next(y=>({batchId:f,changes:mT(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(s=>{let a=iu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let c=iu();return this.indexManager.getCollectionParents(e,l).next(f=>ye.forEach(f,m=>{const p=function(_,v){return new Nu(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next(y=>{y.forEach((_,v)=>{c=c.insert(_,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a))).next(c=>{l.forEach((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,vn.newInvalidDocument(y)))});let f=iu();return c.forEach((m,p)=>{const y=l.get(m);y!==void 0&&cu(y.mutation,p,oi.empty(),un.now()),gf(t,p)&&(f=f.insert(m,p))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return ye.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:ui(a.createTime)}}(t)),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(a){return{name:a.name,query:UI(a.bundledQuery),readTime:ui(a.readTime)}}(t)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.overlays=new Mt(Se.comparator),this.Qr=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ga();return ye.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.St(e,t,l)}),ye.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Qr.get(s);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(s)),ye.resolve()}getOverlaysForCollection(e,t,s){const a=ga(),l=t.length+1,c=new Se(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>s&&a.set(m.getKey(),m)}return ye.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Mt((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let y=l.get(p.largestBatchId);y===null&&(y=ga(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=ga(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,y)=>f.set(p,y)),!(f.size()>=a)););return ye.resolve(f)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(s.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new pI(t,s));let l=this.Qr.get(t);l===void 0&&(l=We(),this.Qr.set(t,l)),this.Qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this.$r=new cn(yn.Ur),this.Kr=new cn(yn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const s=new yn(e,t);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.zr(new yn(e,t))}jr(e,t){e.forEach(s=>this.removeReference(s,t))}Hr(e){const t=new Se(new At([])),s=new yn(t,e),a=new yn(t,e+1),l=[];return this.Kr.forEachInRange([s,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Se(new At([])),s=new yn(t,e),a=new yn(t,e+1);let l=We();return this.Kr.forEachInRange([s,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new yn(e,0),s=this.$r.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class yn{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Se.comparator(e.key,t.key)||Be(e.Zr,t.Zr)}static Wr(e,t){return Be(e.Zr,t.Zr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new cn(yn.Ur)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new mI(l,t,s,a);this.mutationQueue.push(c);for(const f of a)this.Xr=this.Xr.add(new yn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ye.resolve(c)}lookupMutationBatch(e,t){return ye.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ti(s),l=a<0?0:a;return ye.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?$p:this.nr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new yn(t,0),a=new yn(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([s,a],c=>{const f=this.ei(c.Zr);l.push(f)}),ye.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new cn(Be);return t.forEach(a=>{const l=new yn(a,0),c=new yn(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],f=>{s=s.add(f.Zr)})}),ye.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Se.isDocumentKey(l)||(l=l.child(""));const c=new yn(new Se(l),0);let f=new cn(Be);return this.Xr.forEachWhile(m=>{const p=m.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(f=f.add(m.Zr)),!0)},c),ye.resolve(this.ni(f))}ni(e){const t=[];return e.forEach(s=>{const a=this.ei(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){it(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return ye.forEach(t.mutations,a=>{const l=new yn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,t){const s=new yn(t,0),a=this.Xr.firstAfterOrEqual(s);return ye.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.ii=e,this.docs=function(){return new Mt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,c=this.ii(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ye.resolve(s?s.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let s=zr();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():vn.newInvalidDocument(a))}),ye.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=zr();const c=t.path,f=new Se(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||NC(xC(y),s)<=0||(a.has(y.key)||gf(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ye.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ce(9500)}si(e,t){return ye.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new JI(this)}getSize(e){return ye.resolve(this.size)}}class JI extends GI{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Br.addEntry(e,a)):this.Br.removeEntry(s)}),ye.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.persistence=e,this.oi=new Da(t=>Yp(t),Xp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this._i=0,this.ai=new tg,this.targetCount=0,this.ui=jo.cr()}forEachTarget(e,t){return this.oi.forEach((s,a)=>t(a)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this._i&&(this._i=t),ye.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new jo(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Tr(t),ye.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.oi.forEach((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)}),ye.waitFor(l).next(()=>a)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const s=this.oi.get(t)||null;return ye.resolve(s)}addMatchingKeys(e,t,s){return this.ai.Gr(t,s),ye.resolve()}removeMatchingKeys(e,t,s){this.ai.jr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ye.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ai.Yr(t);return ye.resolve(s)}containsKey(e,t){return ye.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t){this.ci={},this.overlays={},this.li=new ff(0),this.hi=!1,this.hi=!0,this.Pi=new XI,this.referenceDelegate=e(this),this.Ti=new ex(this),this.indexManager=new LI,this.remoteDocumentCache=function(a){return new ZI(a)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new VI(t),this.Ei=new KI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ci[e.toKey()];return s||(s=new WI(t,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,s){Ee("MemoryPersistence","Starting transaction:",e);const a=new tx(this.li.next());return this.referenceDelegate.di(),s(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(e,t){return ye.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,t)))}}class tx extends OC{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Vi=new tg,this.mi=null}static fi(e){return new ng(e)}get gi(){if(this.mi)return this.mi;throw Ce(60996)}addReference(e,t,s){return this.Vi.addReference(s,t),this.gi.delete(s.toString()),ye.resolve()}removeReference(e,t,s){return this.Vi.removeReference(s,t),this.gi.add(s.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(a=>this.gi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.gi,s=>{const a=Se.fromPath(s);return this.pi(e,a).next(l=>{l||t.removeEntry(a,Ne.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(s=>{s?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return ye.or([()=>ye.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Hh{constructor(e,t){this.persistence=e,this.yi=new Da(s=>PC(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=HI(this,t)}static fi(e,t){return new Hh(e,t)}di(){}Ai(e){return ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}br(e){let t=0;return this.yr(e,s=>{t++}).next(()=>t)}yr(e,t){return ye.forEach(this.yi,(s,a)=>this.Dr(e,s,a).next(l=>l?ye.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(e,c=>this.Dr(e,c,t).next(f=>{f||(s++,l.removeEntry(c,Ne.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),ye.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),ye.resolve()}removeReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),ye.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wh(e.data.value)),t}Dr(e,t,s){return ye.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.yi.get(t);return ye.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.ds=s,this.As=a}static Rs(e,t){let s=We(),a=We();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ig(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return tR()?8:kC(Un())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ws(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(e,t,a,s).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new nx;return this.Ss(e,t,c).next(f=>{if(l.result=f,this.fs)return this.Ds(e,t,c,f.size)})}).next(()=>l.result)}Ds(e,t,s,a){return s.documentReadCount<this.gs?(Ao()<=Xe.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",So(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ye.resolve()):(Ao()<=Xe.DEBUG&&Ee("QueryEngine","Query:",So(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ps*a?(Ao()<=Xe.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",So(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(t))):ye.resolve())}ws(e,t){if(Z0(t))return ye.resolve(null);let s=tr(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=gp(t,null,"F"),s=tr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const c=We(...l);return this.ys.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,s).next(m=>{const p=this.vs(t,f);return this.Cs(t,p,c,m.readTime)?this.ws(e,gp(t,null,"F")):this.Fs(e,p,t,m)}))})))}bs(e,t,s,a){return Z0(t)||a.isEqual(Ne.min())?ye.resolve(null):this.ys.getDocuments(e,s).next(l=>{const c=this.vs(t,l);return this.Cs(t,c,s,a)?ye.resolve(null):(Ao()<=Xe.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),So(t)),this.Fs(e,c,t,IC(a,yu)).next(f=>f))})}vs(e,t){let s=new cn(fT(e));return t.forEach((a,l)=>{gf(e,l)&&(s=s.add(l))}),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return Ao()<=Xe.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",So(t)),this.ys.getDocumentsMatchingQuery(e,t,Ns.min(),s)}Fs(e,t,s,a){return this.ys.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="LocalStore",rx=3e8;class sx{constructor(e,t,s,a){this.persistence=e,this.Ms=t,this.serializer=a,this.xs=new Mt(Be),this.Os=new Da(l=>Yp(l),Xp),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function ax(i,e,t,s){return new sx(i,e,t,s)}async function LT(i,e){const t=ke(i);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const c=[],f=[];let m=We();for(const p of a){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(s,m).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:f}))})})}function ox(i,e){const t=ke(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(f,m,p,y){const _=p.batch,v=_.keys();let A=ye.resolve();return v.forEach(C=>{A=A.next(()=>y.getEntry(m,C)).next(V=>{const j=p.docVersions.get(C);it(j!==null,48541),V.version.compareTo(j)<0&&(_.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),y.addEntry(V)))})}),A.next(()=>f.mutationQueue.removeMutationBatch(m,_))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let m=We();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function jT(i){const e=ke(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function lx(i,e){const t=ke(i),s=e.snapshotVersion;let a=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});a=t.xs;const f=[];e.targetChanges.forEach((y,_)=>{const v=a.get(_);if(!v)return;f.push(t.Ti.removeMatchingKeys(l,y.removedDocuments,_).next(()=>t.Ti.addMatchingKeys(l,y.addedDocuments,_)));let A=v.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(Nn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,s)),a=a.insert(_,A),function(V,j,B){return V.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=rx?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(v,A,y)&&f.push(t.Ti.updateTargetData(l,A))});let m=zr(),p=We();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))}),f.push(ux(l,c,e.documentUpdates).next(y=>{m=y.qs,p=y.Qs})),!s.isEqual(Ne.min())){const y=t.Ti.getLastRemoteSnapshotVersion(l).next(_=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(y)}return ye.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.xs=a,l))}function ux(i,e,t){let s=We(),a=We();return t.forEach(l=>s=s.add(l)),e.getEntries(i,s).next(l=>{let c=zr();return t.forEach((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Ne.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):Ee(rg,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)}),{qs:c,Qs:a}})}function cx(i,e){const t=ke(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=$p),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function hx(i,e){const t=ke(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Ti.getTargetData(s,e).next(l=>l?(a=l,ye.resolve(a)):t.Ti.allocateTargetId(s).next(c=>(a=new As(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Ti.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.xs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.xs=t.xs.insert(s.targetId,s),t.Os.set(e,s.targetId)),s})}async function Ep(i,e,t){const s=ke(i),a=s.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,c=>s.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!$o(c))throw c;Ee(rg,`Failed to update sequence numbers for target ${e}: ${c}`)}s.xs=s.xs.remove(e),s.Os.delete(a.target)}function h1(i,e,t){const s=ke(i);let a=Ne.min(),l=We();return s.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,y){const _=ke(m),v=_.Os.get(y);return v!==void 0?ye.resolve(_.xs.get(v)):_.Ti.getTargetData(p,y)}(s,c,tr(e)).next(f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(c,f.targetId).next(m=>{l=m})}).next(()=>s.Ms.getDocumentsMatchingQuery(c,e,t?a:Ne.min(),t?l:We())).next(f=>(fx(s,eI(e),f),{documents:f,$s:l})))}function fx(i,e,t){let s=i.Ns.get(e)||Ne.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),i.Ns.set(e,s)}class f1{constructor(){this.activeTargetIds=aI()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dx{constructor(){this.xo=new f1,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,s){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new f1,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="ConnectivityMonitor";class m1{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Ee(d1,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Ee(d1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph=null;function Tp(){return ph===null?ph=function(){return 268435456+Math.round(2147483648*Math.random())}():ph++,"0x"+ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="RestConnection",px={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gx{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${s}/databases/${a}`,this.Go=this.databaseId.database===Vh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}zo(e,t,s,a,l){const c=Tp(),f=this.jo(e,t.toUriEncodedString());Ee($m,`Sending RPC '${e}' ${c}:`,f,s);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,a,l);const{host:p}=new URL(f),y=Us(p);return this.Jo(e,f,m,s,y).then(_=>(Ee($m,`Received RPC '${e}' ${c}: `,_),_),_=>{throw Po($m,`RPC '${e}' ${c} failed with error: `,_,"url: ",f,"request:",s),_})}Yo(e,t,s,a,l,c){return this.zo(e,t,s,a,l)}Ho(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}jo(e,t){const s=px[e];return`${this.Ko}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class vx extends gx{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const c=Tp();return new Promise((f,m)=>{const p=new jE;p.setWithCredentials(!0),p.listenOnce(BE.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Th.NO_ERROR:const _=p.getResponseJson();Ee(Mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),f(_);break;case Th.TIMEOUT:Ee(Mn,`RPC '${e}' ${c} timed out`),m(new _e(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Th.HTTP_ERROR:const v=p.getStatus();if(Ee(Mn,`RPC '${e}' ${c} failed with status:`,v,"response text:",p.getResponseText()),v>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const C=A==null?void 0:A.error;if(C&&C.status&&C.message){const V=function(B){const H=B.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(H)>=0?H:pe.UNKNOWN}(C.status);m(new _e(V,C.message))}else m(new _e(pe.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new _e(pe.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{h_:e,streamId:c,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{Ee(Mn,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(a);Ee(Mn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",y,s,15)})}I_(e,t,s){const a=Tp(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=FE(),f=qE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const y=l.join("");Ee(Mn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const _=c.createWebChannel(y,m);this.E_(_);let v=!1,A=!1;const C=new yx({Zo:j=>{A?Ee(Mn,`Not sending because RPC '${e}' stream ${a} is closed:`,j):(v||(Ee(Mn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),v=!0),Ee(Mn,`RPC '${e}' stream ${a} sending:`,j),_.send(j))},Xo:()=>_.close()}),V=(j,B,H)=>{j.listen(B,F=>{try{H(F)}catch(q){setTimeout(()=>{throw q},0)}})};return V(_,nu.EventType.OPEN,()=>{A||(Ee(Mn,`RPC '${e}' stream ${a} transport opened.`),C.__())}),V(_,nu.EventType.CLOSE,()=>{A||(A=!0,Ee(Mn,`RPC '${e}' stream ${a} transport closed`),C.u_(),this.d_(_))}),V(_,nu.EventType.ERROR,j=>{A||(A=!0,Po(Mn,`RPC '${e}' stream ${a} transport errored. Name:`,j.name,"Message:",j.message),C.u_(new _e(pe.UNAVAILABLE,"The operation could not be completed")))}),V(_,nu.EventType.MESSAGE,j=>{var B;if(!A){const H=j.data[0];it(!!H,16349);const F=H,q=(F==null?void 0:F.error)||((B=F[0])===null||B===void 0?void 0:B.error);if(q){Ee(Mn,`RPC '${e}' stream ${a} received error:`,q);const $=q.status;let z=function(b){const I=Zt[b];if(I!==void 0)return ST(I)}($),M=q.message;z===void 0&&(z=pe.INTERNAL,M="Unknown error status: "+$+" with message "+q.message),A=!0,C.u_(new _e(z,M)),_.close()}else Ee(Mn,`RPC '${e}' stream ${a} received:`,H),C.c_(H)}}),V(f,zE.STAT_EVENT,j=>{j.stat===up.PROXY?Ee(Mn,`RPC '${e}' stream ${a} detected buffering proxy`):j.stat===up.NOPROXY&&Ee(Mn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function Qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(i){return new wI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t,s=1e3,a=1.5,l=6e4){this.xi=e,this.timerId=t,this.A_=s,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),a=Math.max(0,t-s);a>0&&Ee("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="PersistentStream";class BT{constructor(e,t,s,a,l,c,f,m){this.xi=e,this.S_=s,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new sg(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.v_===t&&this.z_(s,a)},s=>{e(()=>{const a=new _e(pe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(a)})})}z_(e,t){const s=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{s(()=>this.j_(a))}),this.stream.onMessage(a=>{s(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Ee(p1,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(Ee(p1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _x extends BT{constructor(e,t,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=RI(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ne.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ne.min():c.readTime?ui(c.readTime):Ne.min()}(e);return this.listener.Y_(t,s)}Z_(e){const t={};t.database=_p(this.serializer),t.addTarget=function(l,c){let f;const m=c.target;if(f=mp(m)?{documents:II(l,m)}:{query:xI(l,m).gt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=IT(l,c.resumeToken);const p=yp(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ne.min())>0){f.readTime=qh(l,c.snapshotVersion.toTimestamp());const p=yp(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f}(this.serializer,e);const s=DI(this.serializer,e);s&&(t.labels=s),this.Q_(t)}X_(e){const t={};t.database=_p(this.serializer),t.removeTarget=e,this.Q_(t)}}class Ex extends BT{constructor(e,t,s,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=CI(e.writeResults,e.commitTime),s=ui(e.commitTime);return this.listener.ra(s,t)}ia(){const e={};e.database=_p(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>OT(this.serializer,s))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{}class wx extends Tx{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new _e(pe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,s,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(e,vp(t,s),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(pe.UNKNOWN,l.toString())})}Yo(e,t,s,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Yo(e,vp(t,s),a,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(pe.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class bx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Br(t),this.ua=!1):Ee("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class Ax{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{s.enqueueAndForget(async()=>{Oa(this)&&(Ee(Aa,"Restarting streams for network reachability change."),await async function(m){const p=ke(m);p.da.add(4),await ku(p),p.Va.set("Unknown"),p.da.delete(4),await wf(p)}(this))})}),this.Va=new bx(s,a)}}async function wf(i){if(Oa(i))for(const e of i.Aa)await e(!0)}async function ku(i){for(const e of i.Aa)await e(!1)}function zT(i,e){const t=ke(i);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),ug(t)?lg(t):Qo(t).N_()&&og(t,e))}function ag(i,e){const t=ke(i),s=Qo(t);t.Ea.delete(e),s.N_()&&qT(t,e),t.Ea.size===0&&(s.N_()?s.k_():Oa(t)&&t.Va.set("Unknown"))}function og(i,e){if(i.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qo(i).Z_(e)}function qT(i,e){i.ma.Ke(e),Qo(i).X_(e)}function lg(i){i.ma=new vI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Ea.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Qo(i).start(),i.Va.ca()}function ug(i){return Oa(i)&&!Qo(i).O_()&&i.Ea.size>0}function Oa(i){return ke(i).da.size===0}function FT(i){i.ma=void 0}async function Sx(i){i.Va.set("Online")}async function Rx(i){i.Ea.forEach((e,t)=>{og(i,e)})}async function Cx(i,e){FT(i),ug(i)?(i.Va.Pa(e),lg(i)):i.Va.set("Unknown")}async function Ix(i,e,t){if(i.Va.set("Online"),e instanceof CT&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ea.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ea.delete(f),a.ma.removeTarget(f))}(i,e)}catch(s){Ee(Aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gh(i,s)}else if(e instanceof Sh?i.ma.Xe(e):e instanceof RT?i.ma.ot(e):i.ma.nt(e),!t.isEqual(Ne.min()))try{const s=await jT(i.localStore);t.compareTo(s)>=0&&await function(l,c){const f=l.ma.It(c);return f.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ea.get(p);y&&l.Ea.set(p,y.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach((m,p)=>{const y=l.Ea.get(m);if(!y)return;l.Ea.set(m,y.withResumeToken(Nn.EMPTY_BYTE_STRING,y.snapshotVersion)),qT(l,m);const _=new As(y.target,m,p,y.sequenceNumber);og(l,_)}),l.remoteSyncer.applyRemoteEvent(f)}(i,t)}catch(s){Ee(Aa,"Failed to raise snapshot:",s),await Gh(i,s)}}async function Gh(i,e,t){if(!$o(e))throw e;i.da.add(1),await ku(i),i.Va.set("Offline"),t||(t=()=>jT(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ee(Aa,"Retrying IndexedDB access"),await t(),i.da.delete(1),await wf(i)})}function HT(i,e){return e().catch(t=>Gh(i,t,e))}async function bf(i){const e=ke(i),t=Ms(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:$p;for(;xx(e);)try{const a=await cx(e.localStore,s);if(a===null){e.Ia.length===0&&t.k_();break}s=a.batchId,Nx(e,a)}catch(a){await Gh(e,a)}GT(e)&&$T(e)}function xx(i){return Oa(i)&&i.Ia.length<10}function Nx(i,e){i.Ia.push(e);const t=Ms(i);t.N_()&&t.ea&&t.ta(e.mutations)}function GT(i){return Oa(i)&&!Ms(i).O_()&&i.Ia.length>0}function $T(i){Ms(i).start()}async function Dx(i){Ms(i).ia()}async function Ox(i){const e=Ms(i);for(const t of i.Ia)e.ta(t.mutations)}async function kx(i,e,t){const s=i.Ia.shift(),a=Zp.from(s,e,t);await HT(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await bf(i)}async function Mx(i,e){e&&Ms(i).ea&&await async function(s,a){if(function(c){return AT(c)&&c!==pe.ABORTED}(a.code)){const l=s.Ia.shift();Ms(s).L_(),await HT(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a)),await bf(s)}}(i,e),GT(i)&&$T(i)}async function g1(i,e){const t=ke(i);t.asyncQueue.verifyOperationInProgress(),Ee(Aa,"RemoteStore received new credentials");const s=Oa(t);t.da.add(3),await ku(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await wf(t)}async function Px(i,e){const t=ke(i);e?(t.da.delete(2),await wf(t)):e||(t.da.add(2),await ku(t),t.Va.set("Unknown"))}function Qo(i){return i.fa||(i.fa=function(t,s,a){const l=ke(t);return l.oa(),new _x(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{e_:Sx.bind(null,i),n_:Rx.bind(null,i),i_:Cx.bind(null,i),Y_:Ix.bind(null,i)}),i.Aa.push(async e=>{e?(i.fa.L_(),ug(i)?lg(i):i.Va.set("Unknown")):(await i.fa.stop(),FT(i))})),i.fa}function Ms(i){return i.ga||(i.ga=function(t,s,a){const l=ke(t);return l.oa(),new Ex(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:Dx.bind(null,i),i_:Mx.bind(null,i),na:Ox.bind(null,i),ra:kx.bind(null,i)}),i.Aa.push(async e=>{e?(i.ga.L_(),await bf(i)):(await i.ga.stop(),i.Ia.length>0&&(Ee(Aa,`Stopping write stream with ${i.Ia.length} pending writes`),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const c=Date.now()+s,f=new cg(e,t,c,a,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(i,e){if(Br("AsyncQueue",`${e}: ${i}`),$o(i))return new _e(pe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Se.comparator(t.key,s.key):(t,s)=>Se.comparator(t.key,s.key),this.keyedMap=iu(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Do;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.pa=new Mt(Se.comparator)}track(e){const t=e.doc.key,s=this.pa.get(t);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(t,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(t):e.type===1&&s.type===2?this.pa=this.pa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Ce(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,s)=>{e.push(s)}),e}}class Bo{constructor(e,t,s,a,l,c,f,m,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,a,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Bo(e,t,Do.emptySet(t),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Ux{constructor(){this.queries=v1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=ke(t),l=a.queries;a.queries=v1(),l.forEach((c,f)=>{for(const m of f.Sa)m.onError(s)})})(this,new _e(pe.ABORTED,"Firestore shutting down"))}}function v1(){return new Da(i=>hT(i),pf)}async function fg(i,e){const t=ke(i);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.Da()&&e.va()&&(s=2):(l=new Vx,s=e.va()?0:1);try{switch(s){case 0:l.ba=await t.onListen(a,!0);break;case 1:l.ba=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=hg(c,`Initialization of query '${So(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.Fa(t.onlineState),l.ba&&e.Ma(l.ba)&&mg(t)}async function dg(i,e){const t=ke(i),s=e.query;let a=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.va()?0:1:!l.Da()&&e.va()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Lx(i,e){const t=ke(i);let s=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Ma(a)&&(s=!0);c.ba=a}}s&&mg(t)}function jx(i,e,t){const s=ke(i),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function mg(i){i.Ca.forEach(e=>{e.next()})}var wp,_1;(_1=wp||(wp={})).xa="default",_1.Cache="cache";class pg{constructor(e,t,s){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Bo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const s=t!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.key=e}}class KT{constructor(e){this.key=e}}class Bx{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.Za=fT(e),this.Xa=new Do(this.Za)}get eu(){return this.Ha}tu(e,t){const s=t?t.nu:new y1,a=t?t.Xa:this.Xa;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,_)=>{const v=a.get(y),A=gf(this.query,_)?_:null,C=!!v&&this.mutatedKeys.has(v.key),V=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let j=!1;v&&A?v.data.isEqual(A.data)?C!==V&&(s.track({type:3,doc:A}),j=!0):this.ru(v,A)||(s.track({type:2,doc:A}),j=!0,(m&&this.Za(A,m)>0||p&&this.Za(A,p)<0)&&(f=!0)):!v&&A?(s.track({type:0,doc:A}),j=!0):v&&!A&&(s.track({type:1,doc:v}),j=!0,(m||p)&&(f=!0)),j&&(A?(c=c.add(A),l=V?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),s.track({type:1,doc:y})}return{Xa:c,nu:s,Cs:f,mutatedKeys:l}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((y,_)=>function(A,C){const V=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:j})}};return V(A)-V(C)}(y.type,_.type)||this.Za(y.doc,_.doc)),this.iu(s),a=a!=null&&a;const f=t&&!a?this.su():[],m=this.Ya.size===0&&this.current&&!a?1:0,p=m!==this.Ja;return this.Ja=m,c.length!==0||p?{snapshot:new Bo(this.query,e.Xa,l,c,e.mutatedKeys,m===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:f}:{ou:f}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new y1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const t=[];return e.forEach(s=>{this.Ya.has(s)||t.push(new KT(s))}),this.Ya.forEach(s=>{e.has(s)||t.push(new QT(s))}),t}au(e){this.Ha=e.$s,this.Ya=We();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Bo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const gg="SyncEngine";class zx{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class qx{constructor(e){this.key=e,this.cu=!1}}class Fx{constructor(e,t,s,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Da(f=>hT(f),pf),this.Pu=new Map,this.Tu=new Set,this.Iu=new Mt(Se.comparator),this.Eu=new Map,this.du=new tg,this.Au={},this.Ru=new Map,this.Vu=jo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Hx(i,e,t=!0){const s=ew(i);let a;const l=s.hu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await YT(s,e,t,!0),a}async function Gx(i,e){const t=ew(i);await YT(t,e,!0,!1)}async function YT(i,e,t,s){const a=await hx(i.localStore,tr(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await $x(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&zT(i.remoteStore,a),f}async function $x(i,e,t,s,a){i.fu=(_,v,A)=>async function(V,j,B,H){let F=j.view.tu(B);F.Cs&&(F=await h1(V.localStore,j.query,!1).then(({documents:M})=>j.view.tu(M,F)));const q=H&&H.targetChanges.get(j.targetId),$=H&&H.targetMismatches.get(j.targetId)!=null,z=j.view.applyChanges(F,V.isPrimaryClient,q,$);return T1(V,j.targetId,z.ou),z.snapshot}(i,_,v,A);const l=await h1(i.localStore,e,!0),c=new Bx(e,l.$s),f=c.tu(l.documents),m=Ou.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",a),p=c.applyChanges(f,i.isPrimaryClient,m);T1(i,t,p.ou);const y=new zx(e,t,c);return i.hu.set(e,y),i.Pu.has(t)?i.Pu.get(t).push(e):i.Pu.set(t,[e]),p.snapshot}async function Qx(i,e,t){const s=ke(i),a=s.hu.get(e),l=s.Pu.get(a.targetId);if(l.length>1)return s.Pu.set(a.targetId,l.filter(c=>!pf(c,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Ep(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&ag(s.remoteStore,a.targetId),bp(s,a.targetId)}).catch(Go)):(bp(s,a.targetId),await Ep(s.localStore,a.targetId,!0))}async function Kx(i,e){const t=ke(i),s=t.hu.get(e),a=t.Pu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ag(t.remoteStore,s.targetId))}async function Yx(i,e,t){const s=nN(i);try{const a=await function(c,f){const m=ke(c),p=un.now(),y=f.reduce((A,C)=>A.add(C.key),We());let _,v;return m.persistence.runTransaction("Locally write mutations","readwrite",A=>{let C=zr(),V=We();return m.Bs.getEntries(A,y).next(j=>{C=j,C.forEach((B,H)=>{H.isValidDocument()||(V=V.add(B))})}).next(()=>m.localDocuments.getOverlayedDocuments(A,C)).next(j=>{_=j;const B=[];for(const H of f){const F=dI(H,_.get(H.key).overlayedDocument);F!=null&&B.push(new js(H.key,F,iT(F.value.mapValue),Cn.exists(!0)))}return m.mutationQueue.addMutationBatch(A,p,B,f)}).next(j=>{v=j;const B=j.applyToLocalDocumentSet(_,V);return m.documentOverlayCache.saveOverlays(A,j.batchId,B)})}).then(()=>({batchId:v.batchId,changes:mT(_)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,f,m){let p=c.Au[c.currentUser.toKey()];p||(p=new Mt(Be)),p=p.insert(f,m),c.Au[c.currentUser.toKey()]=p}(s,a.batchId,t),await Mu(s,a.changes),await bf(s.remoteStore)}catch(a){const l=hg(a,"Failed to persist write");t.reject(l)}}async function XT(i,e){const t=ke(i);try{const s=await lx(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Eu.get(l);c&&(it(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?it(c.cu,14607):a.removedDocuments.size>0&&(it(c.cu,42227),c.cu=!1))}),await Mu(t,s,e)}catch(s){await Go(s)}}function E1(i,e,t){const s=ke(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.hu.forEach((l,c)=>{const f=c.view.Fa(e);f.snapshot&&a.push(f.snapshot)}),function(c,f){const m=ke(c);m.onlineState=f;let p=!1;m.queries.forEach((y,_)=>{for(const v of _.Sa)v.Fa(f)&&(p=!0)}),p&&mg(m)}(s.eventManager,e),a.length&&s.lu.Y_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Xx(i,e,t){const s=ke(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Eu.get(e),l=a&&a.key;if(l){let c=new Mt(Se.comparator);c=c.insert(l,vn.newNoDocument(l,Ne.min()));const f=We().add(l),m=new Ef(Ne.min(),new Map,new Mt(Be),c,f);await XT(s,m),s.Iu=s.Iu.remove(l),s.Eu.delete(e),yg(s)}else await Ep(s.localStore,e,!1).then(()=>bp(s,e,t)).catch(Go)}async function Wx(i,e){const t=ke(i),s=e.batch.batchId;try{const a=await ox(t.localStore,e);ZT(t,s,null),WT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Mu(t,a)}catch(a){await Go(a)}}async function Zx(i,e,t){const s=ke(i);try{const a=await function(c,f){const m=ke(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return m.mutationQueue.lookupMutationBatch(p,f).next(_=>(it(_!==null,37113),y=_.keys(),m.mutationQueue.removeMutationBatch(p,_))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>m.localDocuments.getDocuments(p,y))})}(s.localStore,e);ZT(s,e,t),WT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Mu(s,a)}catch(a){await Go(a)}}function WT(i,e){(i.Ru.get(e)||[]).forEach(t=>{t.resolve()}),i.Ru.delete(e)}function ZT(i,e,t){const s=ke(i);let a=s.Au[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Au[s.currentUser.toKey()]=a}}function bp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Pu.get(e))i.hu.delete(s),t&&i.lu.gu(s,t);i.Pu.delete(e),i.isPrimaryClient&&i.du.Hr(e).forEach(s=>{i.du.containsKey(s)||JT(i,s)})}function JT(i,e){i.Tu.delete(e.path.canonicalString());const t=i.Iu.get(e);t!==null&&(ag(i.remoteStore,t),i.Iu=i.Iu.remove(e),i.Eu.delete(t),yg(i))}function T1(i,e,t){for(const s of t)s instanceof QT?(i.du.addReference(s.key,e),Jx(i,s)):s instanceof KT?(Ee(gg,"Document no longer in limbo: "+s.key),i.du.removeReference(s.key,e),i.du.containsKey(s.key)||JT(i,s.key)):Ce(19791,{pu:s})}function Jx(i,e){const t=e.key,s=t.path.canonicalString();i.Iu.get(t)||i.Tu.has(s)||(Ee(gg,"New document in limbo: "+t),i.Tu.add(s),yg(i))}function yg(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const e=i.Tu.values().next().value;i.Tu.delete(e);const t=new Se(At.fromString(e)),s=i.Vu.next();i.Eu.set(s,new qx(t)),i.Iu=i.Iu.insert(t,s),zT(i.remoteStore,new As(tr(mf(t.path)),s,"TargetPurposeLimboResolution",ff.le))}}async function Mu(i,e,t){const s=ke(i),a=[],l=[],c=[];s.hu.isEmpty()||(s.hu.forEach((f,m)=>{c.push(s.fu(m,e,t).then(p=>{var y;if((p||t)&&s.isPrimaryClient){const _=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;s.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(p){a.push(p);const _=ig.Rs(m.targetId,p);l.push(_)}}))}),await Promise.all(c),s.lu.Y_(a),await async function(m,p){const y=ke(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ye.forEach(p,v=>ye.forEach(v.ds,A=>y.persistence.referenceDelegate.addReference(_,v.targetId,A)).next(()=>ye.forEach(v.As,A=>y.persistence.referenceDelegate.removeReference(_,v.targetId,A)))))}catch(_){if(!$o(_))throw _;Ee(rg,"Failed to update sequence numbers: "+_)}for(const _ of p){const v=_.targetId;if(!_.fromCache){const A=y.xs.get(v),C=A.snapshotVersion,V=A.withLastLimboFreeSnapshotVersion(C);y.xs=y.xs.insert(v,V)}}}(s.localStore,l))}async function eN(i,e){const t=ke(i);if(!t.currentUser.isEqual(e)){Ee(gg,"User change. New user:",e.toKey());const s=await LT(t.localStore,e);t.currentUser=e,function(l,c){l.Ru.forEach(f=>{f.forEach(m=>{m.reject(new _e(pe.CANCELLED,c))})}),l.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Mu(t,s.ks)}}function tN(i,e){const t=ke(i),s=t.Eu.get(e);if(s&&s.cu)return We().add(s.key);{let a=We();const l=t.Pu.get(e);if(!l)return a;for(const c of l){const f=t.hu.get(c);a=a.unionWith(f.view.eu)}return a}}function ew(i){const e=ke(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=XT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xx.bind(null,e),e.lu.Y_=Lx.bind(null,e.eventManager),e.lu.gu=jx.bind(null,e.eventManager),e}function nN(i){const e=ke(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zx.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return ax(this.persistence,new ix,e.initialUser,this.serializer)}Su(e){return new UT(ng.fi,this.serializer)}bu(e){return new dx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class iN extends $h{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){it(this.persistence.referenceDelegate instanceof Hh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new qI(s,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new UT(s=>Hh.fi(s,t),this.serializer)}}class Ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>E1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=eN.bind(null,this.syncEngine),await Px(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ux}()}createDatastore(e){const t=Tf(e.databaseInfo.databaseId),s=function(l){return new vx(l)}(e.databaseInfo);return function(l,c,f,m){return new wx(l,c,f,m)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,l,c,f){return new Ax(s,a,l,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>E1(this.syncEngine,t,0),function(){return m1.C()?new m1:new mx}())}createSyncEngine(e,t){return function(a,l,c,f,m,p,y){const _=new Fx(a,l,c,f,m,p);return y&&(_.mu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=ke(a);Ee(Aa,"RemoteStore shutting down."),l.da.add(5),await ku(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new _e(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=ke(a),f={documents:l.map(_=>Fh(c.serializer,_))},m=await c.Yo("BatchGetDocuments",c.serializer.databaseId,At.emptyPath(),f,l.length),p=new Map;m.forEach(_=>{const v=SI(c.serializer,_);p.set(v.key.toString(),v)});const y=[];return l.forEach(_=>{const v=p.get(_.toString());it(!!v,55234,{key:_}),y.push(v)}),y}(this.datastore,e);return t.forEach(s=>this.recordVersion(s)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new _f(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,s)=>{const a=Se.fromPath(s);this.mutations.push(new bT(a,this.precondition(a)))}),await async function(s,a){const l=ke(s),c={writes:a.map(f=>OT(l.serializer,f))};await l.zo("Commit",l.serializer.databaseId,At.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Uu:e.constructor.name});t=Ne.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new _e(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ne.min())?Cn.exists(!1):Cn.updateTime(t):Cn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ne.min()))throw new _e(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cn.updateTime(t)}return Cn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,t,s,a,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=l,this.Ku=s.maxAttempts,this.x_=new sg(this.asyncQueue,"transaction_retry")}Wu(){this.Ku-=1,this.Gu()}Gu(){this.x_.y_(async()=>{const e=new rN(this.datastore),t=this.zu(e);t&&t.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(a=>{this.ju(a)}))}).catch(s=>{this.ju(s)})})}zu(e){try{const t=this.updateFunction(e);return!xu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ju(e){this.Ku>0&&this.Hu(e)?(this.Ku-=1,this.asyncQueue.enqueueAndForget(()=>(this.Gu(),Promise.resolve()))):this.deferred.reject(e)}Hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!AT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class aN{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Vn.UNAUTHENTICATED,this.clientId=QE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async c=>{Ee(Ps,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(Ee(Ps,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=hg(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Km(i,e){i.asyncQueue.verifyOperationInProgress(),Ee(Ps,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await LT(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function w1(i,e){i.asyncQueue.verifyOperationInProgress();const t=await oN(i);Ee(Ps,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(s=>g1(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>g1(e.remoteStore,a)),i._onlineComponents=e}async function oN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ee(Ps,"Using user provided OfflineComponentProvider");try{await Km(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===pe.FAILED_PRECONDITION||a.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),await Km(i,new $h)}}else Ee(Ps,"Using default OfflineComponentProvider"),await Km(i,new iN(void 0));return i._offlineComponents}async function _g(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ee(Ps,"Using user provided OnlineComponentProvider"),await w1(i,i._uninitializedComponentsProvider._online)):(Ee(Ps,"Using default OnlineComponentProvider"),await w1(i,new Ap))),i._onlineComponents}function lN(i){return _g(i).then(e=>e.syncEngine)}function uN(i){return _g(i).then(e=>e.datastore)}async function Qh(i){const e=await _g(i),t=e.eventManager;return t.onListen=Hx.bind(null,e.syncEngine),t.onUnlisten=Qx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Gx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Kx.bind(null,e.syncEngine),t}function cN(i,e,t={}){const s=new er;return i.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,p){const y=new vg({next:v=>{y.xu(),c.enqueueAndForget(()=>dg(l,_));const A=v.docs.has(f);!A&&v.fromCache?p.reject(new _e(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&v.fromCache&&m&&m.source==="server"?p.reject(new _e(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(v)},error:v=>p.reject(v)}),_=new pg(mf(f.path),y,{includeMetadataChanges:!0,Qa:!0});return fg(l,_)}(await Qh(i),i.asyncQueue,e,t,s)),s.promise}function hN(i,e,t={}){const s=new er;return i.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,p){const y=new vg({next:v=>{y.xu(),c.enqueueAndForget(()=>dg(l,_)),v.fromCache&&m.source==="server"?p.reject(new _e(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(v)},error:v=>p.reject(v)}),_=new pg(f,y,{includeMetadataChanges:!0,Qa:!0});return fg(l,_)}(await Qh(i),i.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(i,e,t){if(!t)throw new _e(pe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function fN(i,e,t,s){if(e===!0&&s===!0)throw new _e(pe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function A1(i){if(!Se.isDocumentKey(i))throw new _e(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function S1(i){if(Se.isDocumentKey(i))throw new _e(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Af(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce(12329,{type:typeof i})}function Hn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new _e(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Af(i);throw new _e(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="firestore.googleapis.com",R1=!0;class C1{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iw,this.ssl=R1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:R1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BI)throw new _e(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new _e(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new _e(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new _e(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new _C;switch(s.type){case"firstParty":return new bC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=b1.get(t);s&&(Ee("ComponentProvider","Removing Datastore"),b1.delete(t),s.terminate())}(this),Promise.resolve()}}function dN(i,e,t,s={}){var a;i=Hn(i,Sf);const l=Us(e),c=i._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${t}`;l&&(Bp(`https://${m}`),zp("Firestore",!0)),c.host!==iw&&c.host!==m&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:s});if(!Ta(p,f)&&(i._setSettings(p),s.mockUserToken)){let y,_;if(typeof s.mockUserToken=="string")y=s.mockUserToken,_=Vn.MOCK_USER;else{y=OE(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new _e(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Vn(v)}i._authCredentials=new EC(new GE(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ka(this.firestore,e,this._query)}}class xn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Is extends ka{constructor(e,t,s){super(e,t,mf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Se(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function Vr(i,e,...t){if(i=Et(i),nw("collection","path",e),i instanceof Sf){const s=At.fromString(e,...t);return S1(s),new Is(i,null,s)}{if(!(i instanceof xn||i instanceof Is))throw new _e(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(e,...t));return S1(s),new Is(i.firestore,null,s)}}function In(i,e,...t){if(i=Et(i),arguments.length===1&&(e=QE.newId()),nw("doc","path",e),i instanceof Sf){const s=At.fromString(e,...t);return A1(s),new xn(i,null,new Se(s))}{if(!(i instanceof xn||i instanceof Is))throw new _e(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(e,...t));return A1(s),new xn(i.firestore,i instanceof Is?i.converter:null,new Se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="AsyncQueue";class x1{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new sg(this,"async_queue_retry"),this.rc=()=>{const s=Qm();s&&Ee(I1,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const t=Qm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Qm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new er;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!$o(e))throw e;Ee(I1,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Br("INTERNAL UNHANDLED ERROR: ",N1(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=t,t}enqueueAfterDelay(e,t,s){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const a=cg.createAndSchedule(this,e,t,s,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Ce(47125,{cc:N1(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function N1(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(i){return function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1}(i,["next","error","complete"])}class sr extends Sf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new x1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new x1(e),this._firestoreClient=void 0,await e}}}function mN(i,e){const t=typeof i=="object"?i:Hp(),s=typeof i=="string"?i:Vh,a=hf(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=xE("firestore");l&&dN(a,...l)}return a}function Pu(i){if(i._terminated)throw new _e(pe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||pN(i),i._firestoreClient}function pN(i){var e,t,s;const a=i._freezeSettings(),l=function(f,m,p,y){return new LC(f,m,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,tw(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new aN(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sa(Nn.fromBase64String(e))}catch(t){throw new _e(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sa(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=/^__.*__$/;class yN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new js(e,this.data,this.fieldMask,t,this.fieldTransforms):new Du(e,this.data,t,this.fieldTransforms)}}class rw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ic:i})}}class bg{constructor(e,t,s,a,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.dc({path:s,Rc:!1});return a.Vc(e),a}mc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.dc({path:s,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Kh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(sw(this.Ic)&&gN.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class vN{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Tf(e)}bc(e,t,s,a=!1){return new bg({Ic:e,methodName:t,wc:s,path:Rn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uu(i){const e=i._freezeSettings(),t=Tf(i._databaseId);return new vN(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Ag(i,e,t,s,a,l={}){const c=i.bc(l.merge||l.mergeFields?2:0,e,t,a);Sg("Data must be an object, but it was:",c,s);const f=lw(s,c);let m,p;if(l.merge)m=new oi(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const _ of l.mergeFields){const v=Sp(e,_,t);if(!c.contains(v))throw new _e(pe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);cw(y,v)||y.push(v)}m=new oi(y),p=c.fieldTransforms.filter(_=>m.covers(_.field))}else m=null,p=c.fieldTransforms;return new yN(new Fn(f),m,p)}class Rf extends Eg{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rf}}function aw(i,e,t,s){const a=i.bc(1,e,t);Sg("Data must be an object, but it was:",a,s);const l=[],c=Fn.empty();Ls(s,(m,p)=>{const y=Rg(e,m,t);p=Et(p);const _=a.mc(y);if(p instanceof Rf)l.push(y);else{const v=Lu(p,_);v!=null&&(l.push(y),c.set(y,v))}});const f=new oi(l);return new rw(c,f,a.fieldTransforms)}function ow(i,e,t,s,a,l){const c=i.bc(1,e,t),f=[Sp(e,s,t)],m=[a];if(l.length%2!=0)throw new _e(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<l.length;v+=2)f.push(Sp(e,l[v])),m.push(l[v+1]);const p=[],y=Fn.empty();for(let v=f.length-1;v>=0;--v)if(!cw(p,f[v])){const A=f[v];let C=m[v];C=Et(C);const V=c.mc(A);if(C instanceof Rf)p.push(A);else{const j=Lu(C,V);j!=null&&(p.push(A),y.set(A,j))}}const _=new oi(p);return new rw(y,_,c.fieldTransforms)}function _N(i,e,t,s=!1){return Lu(t,i.bc(s?4:3,e))}function Lu(i,e){if(uw(i=Et(i)))return Sg("Unsupported field value:",e,i),lw(i,e);if(i instanceof Eg)return function(s,a){if(!sw(a.Ic))throw a.gc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,a){const l=[];let c=0;for(const f of s){let m=Lu(f,a.fc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(i,e)}return function(s,a){if((s=Et(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return oI(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=un.fromDate(s);return{timestampValue:qh(a.serializer,l)}}if(s instanceof un){const l=new un(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qh(a.serializer,l)}}if(s instanceof Tg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Sa)return{bytesValue:IT(a.serializer,s._byteString)};if(s instanceof xn){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:eg(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof wg)return function(c,f){return{mapValue:{fields:{[tT]:{stringValue:nT},[Uh]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw f.gc("VectorValues must only contain numeric values.");return Wp(f.serializer,p)})}}}}}}(s,a);throw a.gc(`Unsupported field value: ${Af(s)}`)}(i,e)}function lw(i,e){const t={};return YE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(i,(s,a)=>{const l=Lu(a,e.Ac(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function uw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof un||i instanceof Tg||i instanceof Sa||i instanceof xn||i instanceof Eg||i instanceof wg)}function Sg(i,e,t){if(!uw(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const s=Af(t);throw s==="an object"?e.gc(i+" a custom object"):e.gc(i+" "+s)}}function Sp(i,e,t){if((e=Et(e))instanceof Vu)return e._internalPath;if(typeof e=="string")return Rg(i,e);throw Kh("Field path arguments must be of type string or ",i,!1,void 0,t)}const EN=new RegExp("[~\\*/\\[\\]]");function Rg(i,e,t){if(e.search(EN)>=0)throw Kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Vu(...e.split("."))._internalPath}catch{throw Kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Kh(i,e,t,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${s}`),c&&(m+=` in document ${a}`),m+=")"),new _e(pe.INVALID_ARGUMENT,f+i+m)}function cw(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TN extends Yh{data(){return super.data()}}function Cg(i,e){return typeof e=="string"?Rg(i,e):e instanceof Vu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new _e(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ig{}class wN extends Ig{}function O1(i,e,...t){let s=[];e instanceof Ig&&s.push(e),s=s.concat(t),function(l){const c=l.filter(m=>m instanceof xg).length,f=l.filter(m=>m instanceof Cf).length;if(c>1||c>0&&f>0)throw new _e(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class Cf extends wN{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Cf(e,t,s)}_apply(e){const t=this._parse(e);return fw(e._query,t),new ka(e.firestore,e.converter,pp(e._query,t))}_parse(e){const t=Uu(e.firestore);return function(l,c,f,m,p,y,_){let v;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new _e(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){P1(_,y);const C=[];for(const V of _)C.push(M1(m,l,V));v={arrayValue:{values:C}}}else v=M1(m,l,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||P1(_,y),v=_N(f,c,_,y==="in"||y==="not-in");return Jt.create(p,y,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function k1(i,e,t){const s=e,a=Cg("where",i);return Cf._create(a,s,t)}class xg extends Ig{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xg(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Oi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)fw(c,m),c=pp(c,m)}(e._query,t),new ka(e.firestore,e.converter,pp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function M1(i,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new _e(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cT(e)&&t.indexOf("/")!==-1)throw new _e(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(At.fromString(t));if(!Se.isDocumentKey(s))throw new _e(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $0(i,new Se(s))}if(t instanceof xn)return $0(i,t._key);throw new _e(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Af(t)}.`)}function P1(i,e){if(!Array.isArray(i)||i.length===0)throw new _e(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fw(i,e){const t=function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new _e(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dw{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ls(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,a;const l=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[Uh].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(c=>$t(c.doubleValue));return new wg(l)}convertGeoPoint(e){return new Tg($t(e.latitude),$t(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=df(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=Ds(e);return new un(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=At.fromString(e);it(PT(s),9688,{name:e});const a=new _u(s.get(1),s.get(3)),l=new Se(s.popFirst(5));return a.isEqual(t)||Br(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class bN extends dw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dg extends Yh{constructor(e,t,s,a,l,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Cg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Rh extends Dg{data(e={}){return super.data(e)}}class mw{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Io(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Rh(this._firestore,this._userDataWriter,s.key,s,new Io(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(f=>{const m=new Rh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Io(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new Rh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Io(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:AN(f.type),doc:m,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function AN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(i){i=Hn(i,xn);const e=Hn(i.firestore,sr);return cN(Pu(e),i._key).then(t=>pw(e,i,t))}class If extends dw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function Ym(i){i=Hn(i,ka);const e=Hn(i.firestore,sr),t=Pu(e),s=new If(e);return hw(i._query),hN(t,i._query).then(a=>new mw(e,s,i,a))}function Rp(i,e,t){i=Hn(i,xn);const s=Hn(i.firestore,sr),a=Ng(i.converter,e,t);return xf(s,[Ag(Uu(s),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,Cn.none())])}function Or(i,e,t,...s){i=Hn(i,xn);const a=Hn(i.firestore,sr),l=Uu(a);let c;return c=typeof(e=Et(e))=="string"||e instanceof Vu?ow(l,"updateDoc",i._key,e,t,s):aw(l,"updateDoc",i._key,e),xf(a,[c.toMutation(i._key,Cn.exists(!0))])}function SN(i){return xf(Hn(i.firestore,sr),[new _f(i._key,Cn.none())])}function RN(i,e){const t=Hn(i.firestore,sr),s=In(i),a=Ng(i.converter,e);return xf(t,[Ag(Uu(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,Cn.exists(!1))]).then(()=>s)}function ya(i,...e){var t,s,a;i=Et(i);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||D1(e[c])||(l=e[c],c++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(D1(e[c])){const _=e[c];e[c]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[c+1]=(s=_.error)===null||s===void 0?void 0:s.bind(_),e[c+2]=(a=_.complete)===null||a===void 0?void 0:a.bind(_)}let m,p,y;if(i instanceof xn)p=Hn(i.firestore,sr),y=mf(i._key.path),m={next:_=>{e[c]&&e[c](pw(p,i,_))},error:e[c+1],complete:e[c+2]};else{const _=Hn(i,ka);p=Hn(_.firestore,sr),y=_._query;const v=new If(p);m={next:A=>{e[c]&&e[c](new mw(p,v,_,A))},error:e[c+1],complete:e[c+2]},hw(i._query)}return function(v,A,C,V){const j=new vg(V),B=new pg(A,j,C);return v.asyncQueue.enqueueAndForget(async()=>fg(await Qh(v),B)),()=>{j.xu(),v.asyncQueue.enqueueAndForget(async()=>dg(await Qh(v),B))}}(Pu(p),y,f,m)}function xf(i,e){return function(s,a){const l=new er;return s.asyncQueue.enqueueAndForget(async()=>Yx(await lN(s),a,l)),l.promise}(Pu(i),e)}function pw(i,e,t){const s=t.docs.get(e._key),a=new If(i);return new Dg(i,a,e._key,s,new Io(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={maxAttempts:5};function su(i,e){if((i=Et(i)).firestore!==e)throw new _e(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Uu(e)}get(e){const t=su(e,this._firestore),s=new bN(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return Ce(24041);const l=a[0];if(l.isFoundDocument())return new Yh(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Yh(this._firestore,s,t._key,null,t.converter);throw Ce(18433,{doc:l})})}set(e,t,s){const a=su(e,this._firestore),l=Ng(a.converter,t,s),c=Ag(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,s);return this._transaction.set(a._key,c),this}update(e,t,s,...a){const l=su(e,this._firestore);let c;return c=typeof(t=Et(t))=="string"||t instanceof Vu?ow(this._dataReader,"Transaction.update",l._key,t,s,a):aw(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=su(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN extends IN{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=su(e,this._firestore),s=new If(this._firestore);return super.get(e).then(a=>new Dg(this._firestore,s,t._key,a._document,new Io(!1,!1),t.converter))}}function gw(i,e,t){i=Hn(i,sr);const s=Object.assign(Object.assign({},CN),t);return function(l){if(l.maxAttempts<1)throw new _e(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(l,c,f){const m=new er;return l.asyncQueue.enqueueAndForget(async()=>{const p=await uN(l);new sN(l.asyncQueue,p,f,c,m).Wu()}),m.promise}(Pu(i),a=>e(new xN(i,a)),s)}(function(e,t=!0){(function(a){Ho=a})(Na),wa(new xs("firestore",(s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new sr(new TC(s.getProvider("auth-internal")),new AC(c,s.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new _e(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(p.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),Ji(M0,P0,e),Ji(M0,P0,"esm2017")})();var NN="firebase",DN="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ji(NN,DN,"app");function Og(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(t[s[a]]=i[s[a]]);return t}function yw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ON=yw,vw=new Cu("auth","Firebase",yw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=new qp("@firebase/auth");function kN(i,...e){Xh.logLevel<=Xe.WARN&&Xh.warn(`Auth (${Na}): ${i}`,...e)}function Ch(i,...e){Xh.logLevel<=Xe.ERROR&&Xh.error(`Auth (${Na}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(i,...e){throw kg(i,...e)}function nr(i,...e){return kg(i,...e)}function _w(i,e,t){const s=Object.assign(Object.assign({},ON()),{[e]:t});return new Cu("auth","Firebase",s).create(e,{appName:i.name})}function Ur(i){return _w(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kg(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return vw.create(i,...e)}function De(i,e,...t){if(!i)throw kg(e,...t)}function kr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ch(e),new Error(e)}function qr(i,e){i||kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function MN(){return V1()==="http:"||V1()==="https:"}function V1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MN()||ZS()||"connection"in navigator)?navigator.onLine:!0}function VN(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this.shortDelay=e,this.longDelay=t,qr(t>e,"Short delay should be less than long delay!"),this.isMobile=YS()||JS()}get(){return PN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(i,e){qr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jN=new ju(3e4,6e4);function Hr(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function lr(i,e,t,s,a={}){return Tw(i,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=Iu(Object.assign({key:i.config.apiKey},c)).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const p=Object.assign({method:e,headers:m},l);return WS()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&Us(i.emulatorConfig.host)&&(p.credentials="include"),Ew.fetch()(await ww(i,i.config.apiHost,t,f),p)})}async function Tw(i,e,t){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},UN),e);try{const a=new zN(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw gh(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw gh(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw gh(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw gh(i,"user-disabled",c);const y=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw _w(i,y,p);ki(i,y)}}catch(a){if(a instanceof or)throw a;ki(i,"network-request-failed",{message:String(a)})}}async function Bu(i,e,t,s,a={}){const l=await lr(i,e,t,s,a);return"mfaPendingCredential"in l&&ki(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function ww(i,e,t,s){const a=`${e}${t}?${s}`,l=i,c=l.config.emulator?Mg(i.config,a):`${i.config.apiScheme}://${a}`;return LN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function BN(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(nr(this.auth,"network-request-failed")),jN.get())})}}function gh(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=nr(i,e,s);return a.customData._tokenResponse=t,a}function U1(i){return i!==void 0&&i.enterprise!==void 0}class qN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FN(i,e){return lr(i,"GET","/v2/recaptchaConfig",Hr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(i,e){return lr(i,"POST","/v1/accounts:delete",e)}async function Wh(i,e){return lr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GN(i,e=!1){const t=Et(i),s=await t.getIdToken(e),a=Pg(s);De(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:fu(Xm(a.auth_time)),issuedAtTime:fu(Xm(a.iat)),expirationTime:fu(Xm(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Xm(i){return Number(i)*1e3}function Pg(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const a=CE(t);return a?JSON.parse(a):(Ch("Failed to decode base64 JWT payload"),null)}catch(a){return Ch("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function L1(i){const e=Pg(i);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof or&&$N(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function $N({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zh(i){var e;const t=i.auth,s=await i.getIdToken(),a=await zo(i,Wh(t,{idToken:s}));De(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];i._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?bw(l.providerUserInfo):[],f=YN(i.providerData,c),m=i.isAnonymous,p=!(i.email&&l.passwordHash)&&!(f!=null&&f.length),y=m?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Ip(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(i,_)}async function KN(i){const e=Et(i);await Zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YN(i,e){return[...i.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function bw(i){return i.map(e=>{var{providerId:t}=e,s=Og(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(i,e){const t=await Tw(i,{},async()=>{const s=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await ww(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return i.emulatorConfig&&Us(i.emulatorConfig.host)&&(m.credentials="include"),Ew.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function WN(i,e){return lr(i,"POST","/v2/accounts:revokeToken",Hr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):L1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=L1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await XN(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,c=new Oo;return s&&(De(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(De(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(i,e){De(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Di{constructor(e){var{uid:t,auth:s,stsTokenManager:a}=e,l=Og(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ip(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await zo(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GN(this,e)}reload(){return KN(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Di(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Zh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await zo(this,HN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,a,l,c,f,m,p,y;const _=(s=t.displayName)!==null&&s!==void 0?s:void 0,v=(a=t.email)!==null&&a!==void 0?a:void 0,A=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,C=(c=t.photoURL)!==null&&c!==void 0?c:void 0,V=(f=t.tenantId)!==null&&f!==void 0?f:void 0,j=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,B=(p=t.createdAt)!==null&&p!==void 0?p:void 0,H=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:F,emailVerified:q,isAnonymous:$,providerData:z,stsTokenManager:M}=t;De(F&&M,e,"internal-error");const w=Oo.fromJSON(this.name,M);De(typeof F=="string",e,"internal-error"),ys(_,e.name),ys(v,e.name),De(typeof q=="boolean",e,"internal-error"),De(typeof $=="boolean",e,"internal-error"),ys(A,e.name),ys(C,e.name),ys(V,e.name),ys(j,e.name),ys(B,e.name),ys(H,e.name);const b=new Di({uid:F,auth:e,email:v,emailVerified:q,displayName:_,isAnonymous:$,photoURL:C,phoneNumber:A,tenantId:V,stsTokenManager:w,createdAt:B,lastLoginAt:H});return z&&Array.isArray(z)&&(b.providerData=z.map(I=>Object.assign({},I))),j&&(b._redirectEventId=j),b}static async _fromIdTokenResponse(e,t,s=!1){const a=new Oo;a.updateFromServerResponse(t);const l=new Di({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Zh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?bw(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Oo;f.updateFromIdToken(s);const m=new Di({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ip(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Map;function Mr(i){qr(i instanceof Function,"Expected a class definition");let e=j1.get(i);return e?(qr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,j1.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Aw.type="NONE";const B1=Aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(i,e,t){return`firebase:${i}:${e}:${t}`}class ko{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Ih(this.userKey,a.apiKey,l),this.fullPersistenceKey=Ih("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wh(this.auth,{idToken:e}).catch(()=>{});return t?Di._fromGetAccountInfoResponse(this.auth,t,e):null}return Di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ko(Mr(B1),e,s);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Mr(B1);const c=Ih(s,e.config.apiKey,e.name);let f=null;for(const p of t)try{const y=await p._get(c);if(y){let _;if(typeof y=="string"){const v=await Wh(e,{idToken:y}).catch(()=>{});if(!v)break;_=await Di._fromGetAccountInfoResponse(e,v,y)}else _=Di._fromJSON(e,y);p!==l&&(f=_),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new ko(l,e,s):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new ko(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Iw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nw(e))return"Blackberry";if(Dw(e))return"Webos";if(Rw(e))return"Safari";if((e.includes("chrome/")||Cw(e))&&!e.includes("edge/"))return"Chrome";if(xw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Sw(i=Un()){return/firefox\//i.test(i)}function Rw(i=Un()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cw(i=Un()){return/crios\//i.test(i)}function Iw(i=Un()){return/iemobile/i.test(i)}function xw(i=Un()){return/android/i.test(i)}function Nw(i=Un()){return/blackberry/i.test(i)}function Dw(i=Un()){return/webos/i.test(i)}function Vg(i=Un()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function ZN(i=Un()){var e;return Vg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JN(){return eR()&&document.documentMode===10}function Ow(i=Un()){return Vg(i)||xw(i)||Dw(i)||Nw(i)||/windows phone/i.test(i)||Iw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(i,e=[]){let t;switch(i){case"Browser":t=z1(Un());break;case"Worker":t=`${z1(Un())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Na}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(i,e={}){return lr(i,"GET","/v2/passwordPolicy",Hr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=6;class i4{constructor(e){var t,s,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:n4,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,a,l,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q1(this),this.idTokenSubscription=new q1(this),this.beforeStateQueue=new e4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mr(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wh(this,{idToken:e}),s=await Di._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let a=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(Ur(this));const t=e?Et(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t4(this),t=new i4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await WN(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mr(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Mr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ma(i){return Et(i)}class q1{constructor(e){this.auth=e,this.observer=null,this.addObserver=lR(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s4(i){Nf=i}function Mw(i){return Nf.loadJS(i)}function a4(){return Nf.recaptchaEnterpriseScript}function o4(){return Nf.gapiScript}function l4(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class u4{constructor(){this.enterprise=new c4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class c4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const h4="recaptcha-enterprise",Pw="NO_RECAPTCHA";class f4{constructor(e){this.type=h4,this.auth=Ma(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{FN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new qN(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{f(m)})})}function a(l,c,f){const m=window.grecaptcha;U1(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(Pw)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new u4().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&U1(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=a4();m.length!==0&&(m+=f),Mw(m).then(()=>{a(f,l,c)}).catch(p=>{c(p)})}}).catch(f=>{c(f)})})}}async function F1(i,e,t,s=!1,a=!1){const l=new f4(i);let c;if(a)c=Pw;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function xp(i,e,t,s,a){var l;if(!((l=i._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await F1(i,e,t,t==="getOobCode");return s(i,c)}else return s(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await F1(i,e,t,t==="getOobCode");return s(i,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(i,e){const t=hf(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ta(l,e??{}))return a;ki(a,"already-initialized")}return t.initialize({options:e})}function m4(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Mr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function p4(i,e,t){const s=Ma(i);De(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=Vw(e),{host:c,port:f}=g4(e),m=f===null?"":`:${f}`,p={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){De(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),De(Ta(p,s.config.emulator)&&Ta(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,Us(c)?(Bp(`${l}//${c}${m}`),zp("Auth",!0)):y4()}function Vw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function g4(i){const e=Vw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:H1(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:H1(c)}}}function H1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function y4(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,t){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}async function v4(i,e){return lr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(i,e){return Bu(i,"POST","/v1/accounts:signInWithPassword",Hr(i,e))}async function E4(i,e){return lr(i,"POST","/v1/accounts:sendOobCode",Hr(i,e))}async function T4(i,e){return E4(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(i,e){return Bu(i,"POST","/v1/accounts:signInWithEmailLink",Hr(i,e))}async function b4(i,e){return Bu(i,"POST","/v1/accounts:signInWithEmailLink",Hr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Ug{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Au(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Au(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xp(e,t,"signInWithPassword",_4);case"emailLink":return w4(e,{email:this._email,oobCode:this._password});default:ki(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xp(e,s,"signUpPassword",v4);case"emailLink":return b4(e,{idToken:t,email:this._email,oobCode:this._password});default:ki(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(i,e){return Bu(i,"POST","/v1/accounts:signInWithIdp",Hr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="http://localhost";class Ra extends Ug{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a}=t,l=Og(t,["providerId","signInMethod"]);if(!s||!a)return null;const c=new Ra(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Mo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Mo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mo(e,t)}buildRequest(){const e={requestUri:A4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Iu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R4(i){const e=eu(tu(i)).link,t=e?eu(tu(e)).deep_link_id:null,s=eu(tu(i)).deep_link_id;return(s?eu(tu(s)).link:null)||s||t||e||i}class Lg{constructor(e){var t,s,a,l,c,f;const m=eu(tu(e)),p=(t=m.apiKey)!==null&&t!==void 0?t:null,y=(s=m.oobCode)!==null&&s!==void 0?s:null,_=S4((a=m.mode)!==null&&a!==void 0?a:null);De(p&&y&&_,"argument-error"),this.apiKey=p,this.operation=_,this.code=y,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=R4(e);try{return new Lg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,t){return Au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Lg.parseLink(t);return De(s,"argument-error"),Au._fromEmailAndCode(e,s.code,s.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends Uw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends zu{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ra._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Es.credential(t,s)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends zu{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com";Ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends zu{constructor(){super("twitter.com")}static credential(e,t){return Ra._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ws.credential(t,s)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(i,e){return Bu(i,"POST","/v1/accounts:signUp",Hr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await Di._fromIdTokenResponse(e,s,a),c=G1(s);return new Ca({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=G1(s);return new Ca({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function G1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh extends or{constructor(e,t,s,a){var l;super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Jh(e,t,s,a)}}function Lw(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(i,l,e,s):l})}async function I4(i,e,t=!1){const s=await zo(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Ca._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(i,e,t=!1){const{auth:s}=i;if(ai(s.app))return Promise.reject(Ur(s));const a="reauthenticate";try{const l=await zo(i,Lw(s,a,e,i),t);De(l.idToken,s,"internal-error");const c=Pg(l.idToken);De(c,s,"internal-error");const{sub:f}=c;return De(i.uid===f,s,"user-mismatch"),Ca._forOperation(i,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ki(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(i,e,t=!1){if(ai(i.app))return Promise.reject(Ur(i));const s="signIn",a=await Lw(i,s,e),l=await Ca._fromIdTokenResponse(i,s,a);return t||await i._updateCurrentUser(l.user),l}async function N4(i,e){return jw(Ma(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(i){const e=Ma(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function D4(i,e,t){if(ai(i.app))return Promise.reject(Ur(i));const s=Ma(i),c=await xp(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",C4).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Bw(i),m}),f=await Ca._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(f.user),f}function $1(i,e,t){return ai(i.app)?Promise.reject(Ur(i)):N4(Et(i),Ko.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Bw(i),s})}async function zw(i,e){const t=Et(i),a={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:l}=await T4(t.auth,a);l!==i.email&&await i.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(i,e){return lr(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=Et(i),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await zo(s,O4(s.auth,l));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;const f=s.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=s.displayName,f.photoURL=s.photoURL),await s._updateTokensIfNecessary(c)}function M4(i,e,t,s){return Et(i).onIdTokenChanged(e,t,s)}function P4(i,e,t){return Et(i).beforeAuthStateChanged(e,t)}function qw(i,e,t,s){return Et(i).onAuthStateChanged(e,t,s)}function ef(i){return Et(i).signOut()}const tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tf,"1"),this.storage.removeItem(tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=1e3,U4=10;class Hw extends Fw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ow(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);JN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,U4):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},V4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hw.type="LOCAL";const L4=Hw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends Fw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Gw.type="SESSION";const $w=Gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Df(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(c).map(async p=>p(t.origin,l)),m=await j4(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const p=jg("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(_){const v=_;if(v.data.eventId===p)switch(v.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(v.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function z4(i){ir().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function q4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F4(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function H4(){return Qw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="firebaseLocalStorageDb",G4=1,nf="firebaseLocalStorage",Yw="fbase_key";class qu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Of(i,e){return i.transaction([nf],e?"readwrite":"readonly").objectStore(nf)}function $4(){const i=indexedDB.deleteDatabase(Kw);return new qu(i).toPromise()}function Np(){const i=indexedDB.open(Kw,G4);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(nf,{keyPath:Yw})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(nf)?e(s):(s.close(),await $4(),e(await Np()))})})}async function Q1(i,e,t){const s=Of(i,!0).put({[Yw]:e,value:t});return new qu(s).toPromise()}async function Q4(i,e){const t=Of(i,!1).get(e),s=await new qu(t).toPromise();return s===void 0?null:s.value}function K1(i,e){const t=Of(i,!0).delete(e);return new qu(t).toPromise()}const K4=800,Y4=3;class Xw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Np(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>Y4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(H4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await q4(),!this.activeServiceWorker)return;this.sender=new B4(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Np();return await Q1(e,tf,"1"),await K1(e,tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Q1(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>Q4(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>K1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Of(a,!1).getAll();return new qu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xw.type="LOCAL";const X4=Xw;new ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(i,e){return e?Mr(e):(De(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends Ug{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Z4(i){return jw(i.auth,new Bg(i),i.bypassAuthState)}function J4(i){const{auth:e,user:t}=i;return De(t,e,"internal-error"),x4(t,new Bg(i),i.bypassAuthState)}async function e3(i){const{auth:e,user:t}=i;return De(t,e,"internal-error"),I4(t,new Bg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z4;case"linkViaPopup":case"linkViaRedirect":return e3;case"reauthViaPopup":case"reauthViaRedirect":return J4;default:ki(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=new ju(2e3,1e4);class xo extends Ww{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t3.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="pendingRedirect",xh=new Map;class i3 extends Ww{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=xh.get(this.auth._key());if(!e){try{const s=await r3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}xh.set(this.auth._key(),e)}return this.bypassAuthState||xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r3(i,e){const t=o3(e),s=a3(i);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function s3(i,e){xh.set(i._key(),e)}function a3(i){return Mr(i._redirectPersistence)}function o3(i){return Ih(n3,i.config.apiKey,i.name)}async function l3(i,e,t=!1){if(ai(i.app))return Promise.reject(Ur(i));const s=Ma(i),a=W4(s,e),c=await new i3(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=10*60*1e3;class c3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Zw(e)){const a=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y1(e))}saveEventToCache(e){this.cachedEventUids.add(Y1(e)),this.lastProcessedEventTime=Date.now()}}function Y1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Zw({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h3(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f3(i,e={}){return lr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m3=/^https?/;async function p3(i){if(i.config.emulator)return;const{authorizedDomains:e}=await f3(i);for(const t of e)try{if(g3(t))return}catch{}ki(i,"unauthorized-domain")}function g3(i){const e=Cp(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!m3.test(t))return!1;if(d3.test(i))return s===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=new ju(3e4,6e4);function X1(){const i=ir().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function v3(i){return new Promise((e,t)=>{var s,a,l;function c(){X1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X1(),t(nr(i,"network-request-failed"))},timeout:y3.get()})}if(!((a=(s=ir().gapi)===null||s===void 0?void 0:s.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=ir().gapi)===null||l===void 0)&&l.load)c();else{const f=l4("iframefcb");return ir()[f]=()=>{gapi.load?c():t(nr(i,"network-request-failed"))},Mw(`${o4()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Nh=null,e})}let Nh=null;function _3(i){return Nh=Nh||v3(i),Nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=new ju(5e3,15e3),T3="__/auth/iframe",w3="emulator/auth/iframe",b3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function S3(i){const e=i.config;De(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Mg(e,w3):`https://${i.config.authDomain}/${T3}`,s={apiKey:e.apiKey,appName:i.name,v:Na},a=A3.get(i.config.apiHost);a&&(s.eid=a);const l=i._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Iu(s).slice(1)}`}async function R3(i){const e=await _3(i),t=ir().gapi;return De(t,i,"internal-error"),e.open({where:document.body,url:S3(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b3,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=nr(i,"network-request-failed"),f=ir().setTimeout(()=>{l(c)},E3.get());function m(){ir().clearTimeout(f),a(s)}s.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I3=500,x3=600,N3="_blank",D3="http://localhost";class W1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O3(i,e,t,s=I3,a=x3){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m=Object.assign(Object.assign({},C3),{width:s.toString(),height:a.toString(),top:l,left:c}),p=Un().toLowerCase();t&&(f=Cw(p)?N3:t),Sw(p)&&(e=e||D3,m.scrollbars="yes");const y=Object.entries(m).reduce((v,[A,C])=>`${v}${A}=${C},`,"");if(ZN(p)&&f!=="_self")return k3(e||"",f),new W1(null);const _=window.open(e||"",f,y);De(_,i,"popup-blocked");try{_.focus()}catch{}return new W1(_)}function k3(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="__/auth/handler",P3="emulator/auth/handler",V3=encodeURIComponent("fac");async function Z1(i,e,t,s,a,l){De(i.config.authDomain,i,"auth-domain-config-required"),De(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:Na,eventId:a};if(e instanceof Uw){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",oR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(e instanceof zu){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}i.tenantId&&(c.tid=i.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await i._getAppCheckToken(),p=m?`#${V3}=${encodeURIComponent(m)}`:"";return`${U3(i)}?${Iu(f).slice(1)}${p}`}function U3({config:i}){return i.emulator?Mg(i,P3):`https://${i.authDomain}/${M3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="webStorageSupport";class L3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$w,this._completeRedirectFn=l3,this._overrideRedirectResult=s3}async _openPopup(e,t,s,a){var l;qr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Z1(e,t,s,Cp(),a);return O3(e,c,jg())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await Z1(e,t,s,Cp(),a);return z4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(qr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await R3(e),s=new c3(e);return t.register("authEvent",a=>(De(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wm,{type:Wm},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Wm];c!==void 0&&t(!!c),ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=p3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ow()||Rw()||Vg()}}const j3=L3;var J1="@firebase/auth",eE="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q3(i){wa(new xs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:c,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kw(i)},p=new r4(s,a,l,m);return m4(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),wa(new xs("auth-internal",e=>{const t=Ma(e.getProvider("auth").getImmediate());return(s=>new B3(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ji(J1,eE,z3(i)),Ji(J1,eE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=5*60,H3=DE("authIdTokenMaxAge")||F3;let tE=null;const G3=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>H3)return;const a=t==null?void 0:t.token;tE!==a&&(tE=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Jw(i=Hp()){const e=hf(i,"auth");if(e.isInitialized())return e.getImmediate();const t=d4(i,{popupRedirectResolver:j3,persistence:[X4,L4,$w]}),s=DE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=G3(l.toString());P4(t,c,()=>c(t.currentUser)),M4(t,f=>c(f))}}const a=IE("auth");return a&&p4(t,`http://${a}`),t}function $3(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}s4({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=a=>{const l=nr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",$3().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q3("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="firebasestorage.googleapis.com",tb="storageBucket",Q3=2*60*1e3,K3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt extends or{constructor(e,t,s=0){super(Zm(e),`Firebase Storage: ${t} (${Zm(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bt;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bt||(Bt={}));function Zm(i){return"storage/"+i}function zg(){const i="An unknown error occurred, please check the error payload for server response.";return new zt(Bt.UNKNOWN,i)}function Y3(i){return new zt(Bt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function X3(i){return new zt(Bt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function W3(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zt(Bt.UNAUTHENTICATED,i)}function Z3(){return new zt(Bt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function J3(i){return new zt(Bt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function eD(){return new zt(Bt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tD(){return new zt(Bt.CANCELED,"User canceled the upload/download.")}function nD(i){return new zt(Bt.INVALID_URL,"Invalid URL '"+i+"'.")}function iD(i){return new zt(Bt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function rD(){return new zt(Bt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tb+"' property when initializing the app?")}function sD(){return new zt(Bt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function aD(){return new zt(Bt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oD(i){return new zt(Bt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dp(i){return new zt(Bt.INVALID_ARGUMENT,i)}function nb(){return new zt(Bt.APP_DELETED,"The Firebase app was deleted.")}function lD(i){return new zt(Bt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function du(i,e){return new zt(Bt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Jl(i){throw new zt(Bt.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=li.makeFromUrl(e,t)}catch{return new li(e,"")}if(s.path==="")return s;throw iD(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)";function l(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function p(q){q.path_=decodeURIComponent(q.path)}const y="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",A=new RegExp(`^https?://${_}/${y}/b/${a}/o${v}`,"i"),C={bucket:1,path:3},V=t===eb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",B=new RegExp(`^https?://${V}/${a}/${j}`,"i"),F=[{regex:f,indices:m,postModify:l},{regex:A,indices:C,postModify:p},{regex:B,indices:{bucket:1,path:2},postModify:p}];for(let q=0;q<F.length;q++){const $=F[q],z=$.regex.exec(e);if(z){const M=z[$.indices.bucket];let w=z[$.indices.path];w||(w=""),s=new li(M,w),$.postModify(s);break}}if(s==null)throw nD(e);return s}}class uD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(i,e,t){let s=1,a=null,l=null,c=!1,f=0;function m(){return f===2}let p=!1;function y(...j){p||(p=!0,e.apply(null,j))}function _(j){a=setTimeout(()=>{a=null,i(A,m())},j)}function v(){l&&clearTimeout(l)}function A(j,...B){if(p){v();return}if(j){v(),y.call(null,j,...B);return}if(m()||c){v(),y.call(null,j,...B);return}s<64&&(s*=2);let F;f===1?(f=2,F=0):F=(s+Math.random())*1e3,_(F)}let C=!1;function V(j){C||(C=!0,v(),!p&&(a!==null?(j||(f=2),clearTimeout(a),_(0)):j||(f=1)))}return _(0),l=setTimeout(()=>{c=!0,V(!0)},t),V}function hD(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(i){return i!==void 0}function dD(i){return typeof i=="object"&&!Array.isArray(i)}function qg(i){return typeof i=="string"||i instanceof String}function nE(i){return Fg()&&i instanceof Blob}function Fg(){return typeof Blob<"u"}function iE(i,e,t,s){if(s<e)throw Dp(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>t)throw Dp(`Invalid value for '${i}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(i,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${i}`}function ib(i){const e=encodeURIComponent;let t="?";for(const s in i)if(i.hasOwnProperty(s)){const a=e(s)+"="+e(i[s]);t=t+a+"&"}return t=t.slice(0,-1),t}var Ea;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Ea||(Ea={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(i,e){const t=i>=500&&i<600,a=[408,429].indexOf(i)!==-1,l=e.indexOf(i)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t,s,a,l,c,f,m,p,y,_,v=!0,A=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=_,this.retry=v,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,V)=>{this.resolve_=C,this.reject_=V,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new yh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const m=f.loaded,p=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===Ea.NO_ERROR,m=l.getStatus();if(!f||mD(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Ea.ABORT;s(!1,new yh(!1,null,y));return}const p=this.successCodes_.indexOf(m)!==-1;s(!0,new yh(p,l))})},t=(s,a)=>{const l=this.resolve_,c=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());fD(m)?l(m):l()}catch(m){c(m)}else if(f!==null){const m=zg();m.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,m)):c(m)}else if(a.canceled){const m=this.appDelete_?nb():tD();c(m)}else{const m=eD();c(m)}};this.canceled_?t(!1,new yh(!1,null,!0)):this.backoffId_=cD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yh{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function gD(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function yD(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vD(i,e){e&&(i["X-Firebase-GMPID"]=e)}function _D(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function ED(i,e,t,s,a,l,c=!0,f=!1){const m=ib(i.urlParams),p=i.url+m,y=Object.assign({},i.headers);return vD(y,e),gD(y,t),yD(y,l),_D(y,s),new pD(p,i.method,y,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,a,c,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wD(...i){const e=TD();if(e!==void 0){const t=new e;for(let s=0;s<i.length;s++)t.append(i[s]);return t.getBlob()}else{if(Fg())return new Blob(i);throw new zt(Bt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bD(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(i){if(typeof atob>"u")throw oD("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jm{constructor(e,t){this.data=e,this.contentType=t||null}}function SD(i,e){switch(i){case Zi.RAW:return new Jm(rb(e));case Zi.BASE64:case Zi.BASE64URL:return new Jm(sb(i,e));case Zi.DATA_URL:return new Jm(CD(e),ID(e))}throw zg()}function rb(i){const e=[];for(let t=0;t<i.length;t++){let s=i.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=s,c=i.charCodeAt(++t);s=65536|(l&1023)<<10|c&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function RD(i){let e;try{e=decodeURIComponent(i)}catch{throw du(Zi.DATA_URL,"Malformed data URL.")}return rb(e)}function sb(i,e){switch(i){case Zi.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw du(i,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Zi.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw du(i,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=AD(e)}catch(a){throw a.message.includes("polyfill")?a:du(i,"Invalid character found")}const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}class ab{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw du(Zi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=xD(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function CD(i){const e=new ab(i);return e.base64?sb(Zi.BASE64,e.rest):RD(e.rest)}function ID(i){return new ab(i).contentType}function xD(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){let s=0,a="";nE(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(nE(this.data_)){const s=this.data_,a=bD(s,e,t);return a===null?null:new bs(a)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new bs(s,!0)}}static getBlob(...e){if(Fg()){const t=e.map(s=>s instanceof bs?s.data_:s);return new bs(wD.apply(null,t))}else{const t=e.map(c=>qg(c)?SD(Zi.RAW,c).data:c.data_);let s=0;t.forEach(c=>{s+=c.byteLength});const a=new Uint8Array(s);let l=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)a[l++]=c[f]}),new bs(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(i){let e;try{e=JSON.parse(i)}catch{return null}return dD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function DD(i,e){const t=e.split("/").filter(s=>s.length>0).join("/");return i.length===0?t:i+"/"+t}function lb(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(i,e){return e}class qn{constructor(e,t,s,a){this.server=e,this.local=t||e,this.writable=!!s,this.xform=a||OD}}let vh=null;function kD(i){return!qg(i)||i.length<2?i:lb(i)}function ub(){if(vh)return vh;const i=[];i.push(new qn("bucket")),i.push(new qn("generation")),i.push(new qn("metageneration")),i.push(new qn("name","fullPath",!0));function e(l,c){return kD(c)}const t=new qn("name");t.xform=e,i.push(t);function s(l,c){return c!==void 0?Number(c):c}const a=new qn("size");return a.xform=s,i.push(a),i.push(new qn("timeCreated")),i.push(new qn("updated")),i.push(new qn("md5Hash",null,!0)),i.push(new qn("cacheControl",null,!0)),i.push(new qn("contentDisposition",null,!0)),i.push(new qn("contentEncoding",null,!0)),i.push(new qn("contentLanguage",null,!0)),i.push(new qn("contentType",null,!0)),i.push(new qn("metadata","customMetadata",!0)),vh=i,vh}function MD(i,e){function t(){const s=i.bucket,a=i.fullPath,l=new li(s,a);return e._makeStorageReference(l)}Object.defineProperty(i,"ref",{get:t})}function PD(i,e,t){const s={};s.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];s[c.local]=c.xform(s,e[c.server])}return MD(s,i),s}function cb(i,e,t){const s=ob(e);return s===null?null:PD(i,s,t)}function VD(i,e,t,s){const a=ob(e);if(a===null||!qg(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(p=>{const y=i.bucket,_=i.fullPath,v="/b/"+c(y)+"/o/"+c(_),A=kf(v,t,s),C=ib({alt:"media",token:p});return A+C})[0]}function UD(i,e){const t={},s=e.length;for(let a=0;a<s;a++){const l=e[a];l.writable&&(t[l.server]=i[l.local])}return JSON.stringify(t)}class Hg{constructor(e,t,s,a){this.url=e,this.method=t,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(i){if(!i)throw zg()}function LD(i,e){function t(s,a){const l=cb(i,a,e);return hb(l!==null),l}return t}function jD(i,e){function t(s,a){const l=cb(i,a,e);return hb(l!==null),VD(l,a,i.host,i._protocol)}return t}function fb(i){function e(t,s){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=Z3():a=W3():t.getStatus()===402?a=X3(i.bucket):t.getStatus()===403?a=J3(i.path):a=s,a.status=t.getStatus(),a.serverResponse=s.serverResponse,a}return e}function db(i){const e=fb(i);function t(s,a){let l=e(s,a);return s.getStatus()===404&&(l=Y3(i.path)),l.serverResponse=a.serverResponse,l}return t}function BD(i,e,t){const s=e.fullServerUrl(),a=kf(s,i.host,i._protocol),l="GET",c=i.maxOperationRetryTime,f=new Hg(a,l,jD(i,t),c);return f.errorHandler=db(e),f}function zD(i,e){const t=e.fullServerUrl(),s=kf(t,i.host,i._protocol),a="DELETE",l=i.maxOperationRetryTime;function c(m,p){}const f=new Hg(s,a,c,l);return f.successCodes=[200,204],f.errorHandler=db(e),f}function qD(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function FD(i,e,t){const s=Object.assign({},t);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=qD(null,e)),s}function HD(i,e,t,s,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let F="";for(let q=0;q<2;q++)F=F+Math.random().toString().slice(2);return F}const m=f();c["Content-Type"]="multipart/related; boundary="+m;const p=FD(e,s,a),y=UD(p,t),_="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+m+`\r
Content-Type: `+p.contentType+`\r
\r
`,v=`\r
--`+m+"--",A=bs.getBlob(_,s,v);if(A===null)throw sD();const C={name:p.fullPath},V=kf(l,i.host,i._protocol),j="POST",B=i.maxUploadRetryTime,H=new Hg(V,j,LD(i,t),B);return H.urlParams=C,H.headers=c,H.body=A.uploadData(),H.errorHandler=fb(e),H}class GD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ea.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ea.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ea.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,a,l){if(this.sent_)throw Jl("cannot .send() more than once");if(Us(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $D extends GD{initXhr(){this.xhr_.responseType="text"}}function Gg(){return new $D}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){this._service=e,t instanceof li?this._location=t:this._location=li.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ia(e,t)}get root(){const e=new li(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lb(this._location.path)}get storage(){return this._service}get parent(){const e=ND(this._location.path);if(e===null)return null;const t=new li(this._location.bucket,e);return new Ia(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lD(e)}}function QD(i,e,t){i._throwIfRoot("uploadBytes");const s=HD(i.storage,i._location,ub(),new bs(e,!0),t);return i.storage.makeRequestWithTokens(s,Gg).then(a=>({metadata:a,ref:i}))}function KD(i){i._throwIfRoot("getDownloadURL");const e=BD(i.storage,i._location,ub());return i.storage.makeRequestWithTokens(e,Gg).then(t=>{if(t===null)throw aD();return t})}function YD(i){i._throwIfRoot("deleteObject");const e=zD(i.storage,i._location);return i.storage.makeRequestWithTokens(e,Gg)}function XD(i,e){const t=DD(i._location.path,e),s=new li(i._location.bucket,t);return new Ia(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(i){return/^[A-Za-z]+:\/\//.test(i)}function ZD(i,e){return new Ia(i,e)}function mb(i,e){if(i instanceof $g){const t=i;if(t._bucket==null)throw rD();const s=new Ia(t,t._bucket);return e!=null?mb(s,e):s}else return e!==void 0?XD(i,e):i}function JD(i,e){if(e&&WD(e)){if(i instanceof $g)return ZD(i,e);throw Dp("To use ref(service, url), the first argument must be a Storage instance.")}else return mb(i,e)}function rE(i,e){const t=e==null?void 0:e[tb];return t==null?null:li.makeFromBucketSpec(t,i)}function e6(i,e,t,s={}){i.host=`${e}:${t}`;const a=Us(e);a&&(Bp(`https://${i.host}/b`),zp("Storage",!0)),i._isUsingEmulator=!0,i._protocol=a?"https":"http";const{mockUserToken:l}=s;l&&(i._overrideAuthToken=typeof l=="string"?l:OE(l,i.app.options.projectId))}class $g{constructor(e,t,s,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=eb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Q3,this._maxUploadRetryTime=K3,this._requests=new Set,a!=null?this._bucket=li.makeFromBucketSpec(a,this._host):this._bucket=rE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=li.makeFromBucketSpec(this._url,e):this._bucket=rE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ia(this,e)}_makeRequest(e,t,s,a,l=!0){if(this._deleted)return new uD(nb());{const c=ED(e,this._appId,s,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,a).getPromise()}}const sE="@firebase/storage",aE="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="storage";function t6(i,e,t){return i=Et(i),QD(i,e,t)}function n6(i){return i=Et(i),KD(i)}function i6(i){return i=Et(i),YD(i)}function gb(i,e){return i=Et(i),JD(i,e)}function r6(i=Hp(),e){i=Et(i);const s=hf(i,pb).getImmediate({identifier:e}),a=xE("storage");return a&&s6(s,...a),s}function s6(i,e,t,s={}){e6(i,e,t,s)}function a6(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),a=i.getProvider("app-check-internal");return new $g(t,s,a,e,Na)}function o6(){wa(new xs(pb,a6,"PUBLIC").setMultipleInstances(!0)),Ji(sE,aE,""),Ji(sE,aE,"esm2017")}o6();const l6={apiKey:"AIzaSyDM7ok2P_WnrqMcH69gVC4cR9EP4J9fD_8",authDomain:"goodneighbor-b1fb3.firebaseapp.com",projectId:"goodneighbor-b1fb3",storageBucket:"goodneighbor-b1fb3.firebasestorage.app",messagingSenderId:"437041543135",appId:"1:437041543135:web:c20ac170d742746f49366a",measurementId:"G-CCYJ56JPMB"},Qg=PE(l6),va=Jw(Qg),bt=mN(Qg),yb=r6(Qg),mu=In(bt,"meta","stats");async function vb(i){await gw(bt,async e=>{const t=await e.get(mu);if(!t.exists())e.set(mu,{[i]:1});else{const s=t.data(),a=typeof s[i]=="number"?s[i]:0;e.update(mu,{[i]:a+1})}})}async function u6(){try{const e=(await Ym(Vr(bt,"users"))).size,t=await Ym(Vr(bt,"listings")),s=await Ym(Vr(bt,"services")),a=t.size+s.size;return await gw(bt,async l=>{l.set(mu,{accounts:e,listings:a})}),console.log(`Updated stats: ${e} accounts, ${a} listings (${t.size} items + ${s.size} services)`),{accounts:e,listings:a}}catch(i){throw console.error("Error updating stats:",i),i}}async function c6(){try{(await bu(mu)).exists()||(console.log("Stats document does not exist, initializing from existing data..."),await u6())}catch(i){console.error("Error initializing stats:",i)}}const _b=W.createContext(),Mf=()=>{const i=W.useContext(_b);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i},h6=({children:i})=>{const[e,t]=W.useState(null),[s,a]=W.useState(null),[l,c]=W.useState(!0),f=Jw(),m=async A=>{var j;if(!A)return;const C=In(bt,"users",A.uid),V=await bu(C);if(V.exists()){const B=V.data();await Or(C,{email:A.email,lastLogin:new Date}),a(B)}else{const B={uid:A.uid,email:A.email,fullName:A.displayName||((j=A.email)==null?void 0:j.split("@")[0])||"User",phone:A.phoneNumber||"",createdAt:new Date,lastLogin:new Date};await Rp(C,B),a(B)}},p=async A=>{try{const C=In(bt,"users",A),V=await bu(C);return V.exists()?V.data():null}catch(C){return console.error("Error getting user profile:",C),null}},y=async A=>{if(e)try{const C=In(bt,"users",e.uid);return await Or(C,A),a(V=>({...V,...A})),!0}catch(C){return console.error("Error updating user profile:",C),!1}},_=async()=>{try{await ef(f),t(null),a(null)}catch(A){console.error("Error signing out:",A)}};W.useEffect(()=>qw(f,async C=>{t(C),C?await m(C):a(null),c(!1)}),[f]);const v={currentUser:e,userProfile:s,loading:l,getUserProfile:p,updateUserProfile:y,logout:_};return E.jsx(_b.Provider,{value:v,children:i})};function f6(){const i=Fr(),{currentUser:e}=Mf();return E.jsx("div",{className:"start-container",children:E.jsxs("div",{className:"start-card",children:[E.jsxs("div",{className:"start-header",children:[E.jsx("h1",{className:"start-title",children:"Welcome to Good Neighbor"}),E.jsx("p",{className:"start-subtitle",children:"Your community marketplace"})]}),E.jsxs("div",{className:"start-content",children:[E.jsx("p",{className:"start-description",children:"Connect with your neighbors, discover local services, and build a stronger community together."}),E.jsxs("div",{className:"start-buttons",children:[E.jsx("button",{className:"start-button primary",onClick:()=>i("/signin"),children:"Sign In"}),E.jsx("button",{className:"start-button secondary",onClick:()=>i("/listingspage"),children:"Browse Listings"}),E.jsx("button",{className:"start-button secondary",onClick:()=>i("/createlistings"),children:"Create Listing"}),e&&E.jsx("button",{className:"start-button secondary",onClick:()=>i("/account"),children:"Account"}),E.jsx("button",{className:"start-button secondary",onClick:()=>i("/about"),children:"About"})]}),E.jsx("div",{className:"start-footer",children:E.jsxs("p",{className:"signup-prompt",children:["New to GoodNeighbor?"," ",E.jsx("button",{className:"signup-link",onClick:()=>i("/signup"),children:"Create an account"})]})})]})]})})}function d6(){const i=Fr(),[e,t]=W.useState({email:"",password:""}),[s,a]=W.useState(""),[l,c]=W.useState(!1),[f,m]=W.useState(!1),[p,y]=W.useState(""),_=V=>{t({...e,[V.target.name]:V.target.value}),s&&a(""),f&&m(!1),p&&y("")},v=async V=>{V.preventDefault(),a(""),c(!0),m(!1),y("");try{if(!(await $1(va,e.email,e.password)).user.emailVerified){a("Please verify your email before signing in."),m(!0),await ef(va),c(!1);return}i("/listingspage")}catch(j){a(j.message)}finally{c(!1)}},A=async()=>{y(""),c(!0);try{const j=(await $1(va,e.email,e.password)).user;await zw(j),y("Verification email sent! Please check your inbox."),await ef(va)}catch{y("Failed to send verification email. Please check your credentials and try again.")}finally{c(!1)}},C=()=>{i("/")};return E.jsxs("div",{className:"signin-container",children:[E.jsx("div",{className:"back-button-container",children:E.jsxs("button",{onClick:C,className:"back-to-start-btn",children:[E.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("path",{d:"M12 19L5 12L12 5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),E.jsx("path",{d:"M19 12H5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Back to Home"]})}),E.jsxs("div",{className:"signin-card",children:[E.jsxs("div",{className:"signin-header",children:[E.jsx("h1",{className:"signin-title",children:"Welcome Back"}),E.jsx("p",{className:"signin-subtitle",children:"Sign in to your account"})]}),E.jsxs("form",{onSubmit:v,className:"signin-form",children:[E.jsxs("div",{className:"input-group",children:[E.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),E.jsx("input",{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:e.email,onChange:_,required:!0,className:"signin-input"})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{htmlFor:"password",className:"input-label",children:"Password"}),E.jsx("input",{id:"password",name:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:_,required:!0,className:"signin-input"})]}),s&&E.jsxs("div",{className:"error-message",children:[E.jsx("span",{className:"error-icon",children:"⚠️"}),s]}),f&&E.jsxs("div",{className:"resend-verification-container",children:[E.jsx("button",{type:"button",className:"resend-button",onClick:A,disabled:l,children:l?"Sending...":"Resend Verification Email"}),p&&E.jsx("div",{className:`resend-message ${p.includes("Failed")?"error":""}`,children:p})]}),E.jsx("button",{type:"submit",className:"signin-button",disabled:l,children:l?"Signing In...":"Sign In"})]}),E.jsxs("div",{className:"signin-footer",children:[E.jsxs("p",{className:"signup-prompt",children:["Don't have an account?"," ",E.jsx("button",{className:"signup-link",onClick:()=>i("/signup"),children:"Sign up"})]}),E.jsxs("p",{className:"verification-prompt",children:["Need to verify your email?"," ",E.jsx("button",{className:"verification-link",onClick:()=>m(!0),children:"Resend verification email"})]})]})]})]})}function m6(){const i=Fr(),[e,t]=W.useState({username:"",fullName:"",email:"",password:"",confirmPassword:""}),[s,a]=W.useState(""),[l,c]=W.useState(!1),f=_=>{t({...e,[_.target.name]:_.target.value}),s&&a("")},m=async _=>{try{const v=In(bt,"usernames",_.toLowerCase());return!(await bu(v)).exists()}catch(v){return console.error("Error checking username uniqueness:",v),!1}},p=async _=>{if(_.preventDefault(),a(""),c(!0),!e.username.trim()){a("Username is required"),c(!1);return}if(!e.fullName.trim()){a("Full name is required"),c(!1);return}if(!e.email.trim()){a("Email is required"),c(!1);return}if(e.password.length<6){a("Password must be at least 6 characters long"),c(!1);return}if(e.password!==e.confirmPassword){a("Passwords do not match"),c(!1);return}const v=e.username.trim().toLowerCase();if(v.length<3){a("Username must be at least 3 characters long"),c(!1);return}if(!/^[a-zA-Z0-9_]+$/.test(v)){a("Username can only contain letters, numbers, and underscores"),c(!1);return}try{if(!await m(v)){a("Username is already taken. Please choose another."),c(!1);return}const V=(await D4(va,e.email,e.password)).user;await k4(V,{displayName:e.fullName}),await zw(V),await Rp(In(bt,"users",V.uid),{username:v,fullName:e.fullName,email:e.email,createdAt:new Date}),await Rp(In(bt,"usernames",v),{userId:V.uid,createdAt:new Date}),await vb("accounts"),c(!1),alert("Account created successfully! Please check your email and verify your account before signing in."),i("/account")}catch(A){console.error("Signup error:",A);let C="An error occurred during signup. Please try again.";A.code==="auth/email-already-in-use"?C="An account with this email already exists. Please sign in instead.":A.code==="auth/invalid-email"?C="Please enter a valid email address.":A.code==="auth/weak-password"?C="Password is too weak. Please choose a stronger password.":A.code==="auth/network-request-failed"&&(C="Network error. Please check your internet connection and try again."),a(C),c(!1)}},y=()=>{i("/")};return E.jsxs("div",{className:"signup-container",children:[E.jsx("div",{className:"back-button-container",children:E.jsxs("button",{onClick:y,className:"back-to-start-btn",children:[E.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("path",{d:"M12 19L5 12L12 5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),E.jsx("path",{d:"M19 12H5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Back to Home"]})}),E.jsxs("div",{className:"signup-card",children:[E.jsxs("div",{className:"signup-header",children:[E.jsx("h1",{className:"signup-title",children:"Create Account"}),E.jsx("p",{className:"signup-subtitle",children:"Join our community today"})]}),E.jsxs("form",{onSubmit:p,className:"signup-form",children:[E.jsxs("div",{className:"input-group",children:[E.jsx("label",{htmlFor:"username",className:"input-label",children:"Username"}),E.jsx("input",{id:"username",name:"username",type:"text",placeholder:"Choose a unique username",value:e.username,onChange:f,required:!0,className:"signup-input"})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{htmlFor:"fullName",className:"input-label",children:"Full Name"}),E.jsx("input",{id:"fullName",name:"fullName",type:"text",placeholder:"Enter your full name",value:e.fullName,onChange:f,required:!0,className:"signup-input"})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),E.jsx("input",{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:e.email,onChange:f,required:!0,className:"signup-input"})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{htmlFor:"password",className:"input-label",children:"Password"}),E.jsx("input",{id:"password",name:"password",type:"password",placeholder:"Create a password",value:e.password,onChange:f,required:!0,className:"signup-input"})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{htmlFor:"confirmPassword",className:"input-label",children:"Confirm Password"}),E.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm your password",value:e.confirmPassword,onChange:f,required:!0,className:"signup-input"})]}),s&&E.jsxs("div",{className:"error-message",children:[E.jsx("span",{className:"error-icon",children:"⚠️"}),s]}),E.jsx("button",{type:"submit",className:"signup-button",disabled:l,children:l?"Creating Account...":"Create Account"})]}),E.jsx("div",{className:"signup-footer",children:E.jsxs("p",{className:"signin-prompt",children:["Already have an account?"," ",E.jsx("button",{className:"signin-link",onClick:()=>i("/signin"),children:"Sign in"})]})})]})]})}function p6({listing:i,onContact:e,onFavorite:t,onShare:s,onMatch:a,onClaim:l,showActions:c=!0,isFavorited:f=!1,currentUserId:m=null,viewMode:p="grid"}){const[y,_]=W.useState(!1),[v,A]=W.useState(!1),[C,V]=W.useState(!1),[j,B]=W.useState(null),[H,F]=W.useState(!1),q=Q=>{const J=new Date(Q),oe=Math.abs(new Date-J),K=Math.floor(oe/(1e3*60*60*24)),de=Math.floor(oe/(1e3*60*60)),Te=Math.floor(oe/(1e3*60));return Te<60?`${Te}m ago`:de<24?`${de}h ago`:K<7?`${K}d ago`:J.toLocaleDateString()},$=Q=>{switch(Q==null?void 0:Q.toLowerCase()){case"like new":return"condition-like-new";case"good":return"condition-good";case"fair":return"condition-fair";case"poor":return"condition-poor";default:return"condition-good"}},z=Q=>{switch(Q==null?void 0:Q.toLowerCase()){case"available":return"status-available";case"matched":return"status-matched";case"claimed":return"status-claimed";default:return"status-available"}},M=Q=>{switch(Q==null?void 0:Q.toLowerCase()){case"service":return"type-flair-service";case"item":return"type-flair-item";default:return"type-flair-item"}},w=Q=>{switch(Q==null?void 0:Q.toLowerCase()){case"service":return{icon:"🛠️",text:"Service"};case"item":return{icon:"📦",text:"Item"};default:return{icon:"📦",text:"Item"}}},b=()=>{A(!0)},I=()=>{_(!0)},D=Q=>{Q.stopPropagation(),e&&e(i)},k=Q=>{Q.stopPropagation(),t&&t(i.id)},x=Q=>{Q.stopPropagation(),F(!0)},Y=()=>{V(!1),B(null)},ne=m&&i.userId===m,N=(i.requestors||[]).some(Q=>Q.userId===m),O=(i.requestors||[]).length,ie=()=>{F(!1)},Z=Q=>{const J={title:`${i.title} - GoodNeighbor`,text:`Check out this free ${i.type||"item"} on GoodNeighbor: ${i.title}`,url:`${window.location.origin}/#/listingspage?listing=${i.id}`};let te="";switch(Q){case"facebook":te=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(J.url)}`;break;case"twitter":te=`https://twitter.com/intent/tweet?text=${encodeURIComponent(J.text)}&url=${encodeURIComponent(J.url)}`;break;case"instagram":const oe=`${J.text} ${J.url}`;navigator.clipboard.writeText(oe).then(()=>{alert("Content copied! You can now paste it in your Instagram story or post.")}).catch(()=>{alert(`Please copy this text and share it on Instagram:

`+oe)}),ie();return;case"whatsapp":te=`https://wa.me/?text=${encodeURIComponent(`${J.text} ${J.url}`)}`;break;case"email":te=`mailto:?subject=${encodeURIComponent(J.title)}&body=${encodeURIComponent(`${J.text}

${J.url}`)}`;break;default:return}window.open(te,"_blank","width=600,height=400"),ie()},U=async()=>{const Q={title:`${i.title} - GoodNeighbor`,text:`Check out this free ${i.type||"item"} on GoodNeighbor: ${i.title}`,url:`${window.location.origin}/#/listingspage?listing=${i.id}`},J=`${Q.title}

${Q.text}

${Q.url}`;try{await navigator.clipboard.writeText(J),alert("Link copied to clipboard!"),ie()}catch(te){console.error("Failed to copy to clipboard:",te),alert("Failed to copy to clipboard. Please try again.")}};if(p==="list"){const Q=w(i.type);return E.jsxs("div",{className:"listing-row","data-listing-id":i.id,children:[E.jsxs("div",{className:"listing-row-main",children:[E.jsx("div",{className:"listing-row-title",children:i.title}),E.jsxs("div",{className:"listing-row-meta",children:[E.jsxs("span",{className:`type-flair ${M(i.type)}`,children:[Q.icon," ",Q.text]}),E.jsx("span",{className:"listing-row-sep",children:"•"}),E.jsx("span",{className:"listing-row-category",children:i.category||i.serviceType}),E.jsx("span",{className:"listing-row-sep",children:"•"}),E.jsx("span",{className:"listing-row-location",children:i.location}),E.jsx("span",{className:"listing-row-sep",children:"•"}),(i.status==="available"||i.status==="claimed")&&E.jsx("span",{className:`status-badge ${z(i.status)}`,children:i.status}),i.status==="matched"&&E.jsx("span",{className:"matched-badge",children:"✓ Matched"}),E.jsx("span",{className:"listing-row-sep",children:"•"}),E.jsx("span",{className:"listing-row-date",children:q(i.datePosted)})]})]}),c&&E.jsx("div",{className:"listing-row-actions"})]})}return E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"listing-card","data-listing-id":i.id,children:[E.jsxs("div",{className:"listing-image-container",children:[(()=>{let Q=null;return i.photos&&i.photos.length>0?Q=typeof i.photos[0]=="string"?i.photos[0]:i.photos[0].url:i.image&&(Q=i.image),Q&&!v?E.jsxs(E.Fragment,{children:[E.jsx("img",{src:Q,alt:i.title,className:`listing-image ${y?"loaded":""}`,onLoad:I,onError:b}),!y&&E.jsx("div",{className:"image-placeholder",children:E.jsx("div",{className:"loading-spinner"})})]}):E.jsxs("div",{className:"image-placeholder no-image",children:[E.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),E.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),E.jsx("polyline",{points:"21,15 16,10 5,21"})]}),E.jsx("span",{children:"No Image"})]})})(),(i.status==="available"||i.status==="claimed")&&E.jsx("div",{className:`status-badge ${z(i.status)}`,children:i.status||"Available"}),(()=>{const Q=w(i.type);return E.jsxs("div",{className:`type-flair-badge ${M(i.type)}`,children:[Q.icon," ",Q.text]})})(),ne&&O>0&&E.jsxs("div",{className:"request-count-badge",children:[O," request",O!==1?"s":""]}),c&&!ne&&E.jsx("button",{className:`favorite-btn ${f?"favorited":""}`,onClick:k,"aria-label":f?"Remove from favorites":"Add to favorites",children:E.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:f?"currentColor":"none",stroke:"currentColor",children:E.jsx("path",{d:"20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})})]}),E.jsxs("div",{className:"listing-content",children:[E.jsx("h3",{className:"listing-title",children:i.title}),E.jsxs("div",{className:"listing-meta",children:[E.jsx("span",{className:"listing-category",children:i.category}),i.condition&&E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"meta-separator",children:"•"}),E.jsx("span",{className:`condition-badge ${$(i.condition)}`,children:i.condition})]})]}),i.description&&E.jsx("p",{className:"listing-description",children:i.description.length>100?`${i.description.substring(0,100)}...`:i.description}),E.jsx("div",{className:"listing-footer",children:E.jsxs("div",{className:"location-date",children:[E.jsxs("span",{className:"listing-location",children:[E.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("path",{d:"21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),E.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),i.location]}),E.jsx("span",{className:"listing-date",children:q(i.datePosted)})]})}),c&&E.jsxs("div",{className:"listing-actions",children:[!ne&&i.status==="available"&&!N&&E.jsxs("button",{className:"contact-btn primary",onClick:D,children:[E.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("path",{d:"4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),E.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Contact"]}),!ne&&N&&E.jsx("span",{className:"requested-indicator",children:"Requested"}),E.jsxs("button",{className:"share-btn secondary",onClick:x,children:[E.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("circle",{cx:"18",cy:"5",r:"3"}),E.jsx("circle",{cx:"6",cy:"12",r:"3"}),E.jsx("circle",{cx:"18",cy:"19",r:"3"}),E.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),E.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),"Share"]}),ne&&E.jsx("span",{className:"own-listing-indicator",children:"Your listing"})]})]}),C&&j&&E.jsx("div",{className:"contact-popup-overlay",onClick:Y,children:E.jsxs("div",{className:"contact-popup",onClick:Q=>Q.stopPropagation(),children:[E.jsx("h4",{children:"Contact Information"}),E.jsxs("p",{children:[E.jsx("strong",{children:"Name:"})," ",j.userFullName]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Email:"})," ",j.userEmail]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Requested:"})," ",q(j.requestDate)]}),E.jsx("button",{className:"close-popup-btn",onClick:Y,children:"Close"})]})})]}),H&&E.jsx("div",{className:"share-modal-overlay",onClick:ie,children:E.jsxs("div",{className:"share-modal",onClick:Q=>Q.stopPropagation(),children:[E.jsx("h4",{children:"Share this listing"}),E.jsxs("div",{className:"share-options",children:[E.jsxs("button",{onClick:()=>Z("facebook"),children:[E.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:E.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),E.jsxs("button",{onClick:()=>Z("twitter"),children:[E.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:E.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"Twitter"]}),E.jsxs("button",{onClick:()=>Z("instagram"),children:[E.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:E.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),"Instagram"]}),E.jsxs("button",{onClick:()=>Z("whatsapp"),children:[E.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:E.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp"]}),E.jsxs("button",{onClick:()=>Z("email"),children:[E.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),E.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Email"]}),E.jsxs("button",{onClick:U,children:[E.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),E.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),"Copy Link"]})]}),E.jsxs("button",{className:"close-modal-btn",onClick:ie,children:[E.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Close"]})]})})]})}const g6=["All","Textbooks/School","Clothing","Sports","Other"],y6=["All","Tutoring","Volunteering","Carpooling","Other"],v6=[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"title",label:"Title A-Z"},{value:"category",label:"Category"}];function _6({listings:i=[],onContact:e,onFavorite:t,onMatch:s,onClaim:a,favorites:l=[],currentUserId:c,loading:f=!1}){const[m,p]=W.useState("All"),[y,_]=W.useState("All"),[v,A]=W.useState(""),[C,V]=W.useState("newest"),[j,B]=W.useState("grid"),[H,F]=W.useState(!1),[q,$]=W.useState(1),z=18,M=W.useMemo(()=>{let K=i;if(m!=="All"&&(K=K.filter(de=>de.type==="item"&&de.category===m)),y!=="All"&&(K=K.filter(de=>de.type==="service"&&de.serviceType===y)),v){const de=v.toLowerCase();K=K.filter(Te=>Te.title.toLowerCase().includes(de)||Te.description.toLowerCase().includes(de)||Te.location.toLowerCase().includes(de)||Te.category&&Te.category.toLowerCase().includes(de)||Te.serviceType&&Te.serviceType.toLowerCase().includes(de))}return K.sort((de,Te)=>{switch(C){case"newest":return new Date(Te.createdAt||Te.datePosted)-new Date(de.createdAt||de.datePosted);case"oldest":return new Date(de.createdAt||de.datePosted)-new Date(Te.createdAt||Te.datePosted);case"title":return de.title.localeCompare(Te.title);case"category":const be=de.category||de.serviceType||"",Re=Te.category||Te.serviceType||"";return be.localeCompare(Re);default:return 0}}),K},[i,m,y,v,C]),w=Math.ceil(M.length/z),b=(q-1)*z,I=b+z,D=M.slice(b,I);W.useEffect(()=>{$(1)},[m,y,v,C]);const k=K=>{$(K),window.scrollTo({top:0,behavior:"smooth"})},x=K=>{p(K)},Y=K=>{_(K)},ne=K=>{A(K.target.value)},N=K=>{V(K.target.value)},O=K=>{B(K)},ie=()=>{p("All"),_("All"),A(""),V("newest")},Z=K=>{e&&e(K)},U=K=>{t&&t(K)},Q=(K,de)=>{s&&s(K,de)},J=K=>{a&&a(K)},te=Fr(),oe=()=>{te("/")};return E.jsxs("div",{className:"listings-page",children:[E.jsxs("div",{className:"listings-header",children:[E.jsxs("button",{onClick:oe,className:"back-to-start-btn",children:[E.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("path",{d:"m12 19-7-7 7-7"}),E.jsx("path",{d:"M19 12H5"})]}),"Back to Home"]}),E.jsxs("div",{className:"header-content",children:[E.jsx("h1",{children:"Marketplace"}),E.jsx("p",{children:"Find free items and services in your community"})]})]}),E.jsxs("div",{className:"listings-controls",children:[E.jsxs("div",{className:"controls-container",children:[E.jsx("div",{className:"search-container",children:E.jsxs("div",{className:"search-input-wrapper",children:[E.jsxs("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("circle",{cx:"11",cy:"11",r:"8"}),E.jsx("path",{d:"M21 21l-4.35-4.35"})]}),E.jsx("input",{type:"text",placeholder:"Search for items and services...",value:v,onChange:ne,className:"search-input"}),v&&E.jsx("button",{className:"clear-search",onClick:()=>A(""),children:E.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}),E.jsxs("button",{className:"filter-toggle",onClick:()=>F(!H),children:[E.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:E.jsx("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46"})}),"Filters"]}),E.jsxs("div",{className:"view-mode-toggle",children:[E.jsx("button",{className:`view-btn ${j==="grid"?"active":""}`,onClick:()=>O("grid"),children:E.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),E.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),E.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),E.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})}),E.jsx("button",{className:`view-btn ${j==="list"?"active":""}`,onClick:()=>O("list"),children:E.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),E.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),E.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),E.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),E.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),E.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})})]})]}),E.jsxs("div",{className:`filters-panel ${H?"show":""}`,children:[E.jsxs("div",{className:"filter-section",children:[E.jsx("h3",{children:"Categories"}),E.jsx("div",{className:"category-filters",children:g6.map(K=>E.jsx("button",{className:`category-btn ${m===K?"active":""}`,onClick:()=>x(K),children:K},K))})]}),E.jsxs("div",{className:"filter-section",children:[E.jsx("h3",{children:"Service Types"}),E.jsx("div",{className:"service-type-filters",children:y6.map(K=>E.jsx("button",{className:`service-type-btn ${y===K?"active":""}`,onClick:()=>Y(K),children:K},K))})]}),E.jsxs("div",{className:"filter-section",children:[E.jsx("h3",{children:"Sort By"}),E.jsx("select",{value:C,onChange:N,className:"sort-select",children:v6.map(K=>E.jsx("option",{value:K.value,children:K.label},K.value))})]}),E.jsx("button",{className:"clear-filters-btn",onClick:ie,children:"Clear All Filters"})]})]}),(M.length>0||m!=="All"||v)&&E.jsxs("div",{className:"results-summary",children:[M.length>0&&E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"results-count-badge",children:M.length}),E.jsx("span",{className:"results-count-text",children:M.length===1?"item found":"items found"})]}),(m!=="All"||y!=="All"||v)&&E.jsxs("div",{className:"active-filters",children:[m!=="All"&&E.jsxs("span",{className:"filter-tag",children:[m,E.jsx("button",{onClick:()=>p("All"),children:"×"})]}),y!=="All"&&E.jsxs("span",{className:"filter-tag",children:[y,E.jsx("button",{onClick:()=>_("All"),children:"×"})]}),v&&E.jsxs("span",{className:"filter-tag",children:['"',v,'"',E.jsx("button",{onClick:()=>A(""),children:"×"})]})]})]}),E.jsx("div",{className:"listings-container",children:f?E.jsxs("div",{className:"loading-container",children:[E.jsx("div",{className:"loading-spinner"}),E.jsx("p",{children:"Loading listings..."})]}):M.length>0?E.jsx("div",{className:`listings-grid ${j}`,children:D.map(K=>E.jsx(p6,{listing:K,onContact:Z,onFavorite:U,onMatch:Q,onClaim:J,isFavorited:l.includes(K.id),currentUserId:c,showActions:!0,viewMode:j},K.id))}):E.jsxs("div",{className:"no-results",children:[E.jsx("div",{className:"no-results-icon",children:E.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("circle",{cx:"11",cy:"11",r:"8"}),E.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),E.jsx("h2",{className:"no-results-title",children:"No items found"}),E.jsx("p",{className:"no-results-message",children:v||m!=="All"||y!=="All"?"Try adjusting your search or filters.":"There are no listings available at the moment. Be the first to share something with your community!"}),E.jsxs("div",{className:"no-results-actions",children:[(v||m!=="All"||y!=="All")&&E.jsx("button",{className:"clear-filters-btn",onClick:ie,children:"Clear Filters"}),E.jsx("button",{className:"create-listing-cta",onClick:()=>te("/createlistings"),children:"+ Create a Listing"})]})]})}),w>1&&E.jsxs("div",{className:"pagination-controls",children:[E.jsx("button",{className:`page-btn ${q===1?"disabled":""}`,onClick:()=>k(q-1),disabled:q===1,children:"Previous"}),E.jsxs("span",{className:"page-info",children:["Page ",q," of ",w]}),E.jsx("button",{className:`page-btn ${q===w?"disabled":""}`,onClick:()=>k(q+1),disabled:q===w,children:"Next"})]})]})}const ep=["Textbooks/School","Clothing","Sports","Other"];function E6({onCreate:i}){const e=Fr(),[t,s]=W.useState({title:"",location:"",category:ep[0],condition:"Good",description:"",serviceType:"Tutoring"}),[a,l]=W.useState([]),[c,f]=W.useState(!1),[m,p]=W.useState({current:0,total:0}),[y,_]=W.useState({}),[v,A]=W.useState("item"),C=["Tutoring","Volunteering","Carpooling","Other"],V=q=>{const{name:$,value:z}=q.target;s({...t,[$]:z}),y[$]&&_(M=>({...M,[$]:""}))},j=q=>{const $=Array.from(q.target.files);l($),$.length>0&&y.photos&&_(z=>({...z,photos:""}))},B=()=>{let q=!0;const $={};return t.title.trim()||($.title="Title is required.",q=!1),t.location.trim()||($.location="Location is required.",q=!1),t.description.trim()||($.description="Description is required.",q=!1),v==="item"?(t.category||($.category="Category is required.",q=!1),t.condition||($.condition="Condition is required.",q=!1)):v==="service"&&(t.serviceType||($.serviceType="Service type is required.",q=!1)),_($),q},H=async q=>{if(q.preventDefault(),!!B()){f(!0),p({current:0,total:a.length});try{let $=null;if(v==="item"){const z={...t,type:"item"};i&&($=await i(z,a))}else{const z={title:t.title,description:t.description,location:t.location,serviceType:t.serviceType,type:"service"};i&&($=await i(z))}s({title:"",description:"",location:"",category:ep[0],condition:"Good",serviceType:C[0]}),l([]),_({}),p({current:0,total:0}),alert("Listing created successfully!"),e("/")}catch($){console.error("Error creating listing:",$),alert("Failed to create listing. Please try again.")}finally{f(!1)}}},F=()=>{e("/")};return E.jsx("div",{className:"create-listing-page",children:E.jsxs("div",{className:"create-listing-container",children:[E.jsxs("button",{onClick:F,className:"back-to-start-btn",children:[E.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("path",{d:"M12 19-7-7 7-7"}),E.jsx("path",{d:"M19 12H5"})]}),"Back to Home"]}),E.jsxs("div",{className:"create-listing-header",children:[E.jsx("h1",{children:"Create New Listing"}),E.jsx("p",{children:"Share items or services you can offer to your community - completely free!"})]}),E.jsxs("div",{className:"listing-type-toggle",children:[E.jsxs("label",{className:v==="item"?"selected":"",children:[E.jsx("input",{type:"radio",name:"listingType",value:"item",checked:v==="item",onChange:()=>A("item")}),E.jsx("span",{children:"Item"})]}),E.jsxs("label",{className:v==="service"?"selected":"",children:[E.jsx("input",{type:"radio",name:"listingType",value:"service",checked:v==="service",onChange:()=>A("service")}),E.jsx("span",{children:"Service"})]})]}),E.jsxs("form",{onSubmit:H,className:"create-listing-form",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"title",children:"Title *"}),E.jsx("input",{type:"text",id:"title",name:"title",value:t.title,onChange:V,placeholder:v==="item"?"What are you giving away?":"What service are you offering?",maxLength:"100",className:y.title?"error":""}),y.title&&E.jsx("span",{className:"error-message",children:y.title})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"description",children:"Description *"}),E.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:V,placeholder:v==="item"?"Describe the item's condition, any flaws, pickup instructions, etc.":"Describe the service, requirements, schedule, etc.",rows:"4",maxLength:"500",className:y.description?"error":""}),E.jsxs("div",{className:"character-count",children:[t.description.length,"/500"]}),y.description&&E.jsx("span",{className:"error-message",children:y.description})]}),v==="service"&&E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"serviceType",children:"Service Type *"}),E.jsx("select",{id:"serviceType",name:"serviceType",value:t.serviceType||C[0],onChange:V,className:y.serviceType?"error":"",children:C.map(q=>E.jsx("option",{value:q,children:q},q))}),y.serviceType&&E.jsx("span",{className:"error-message",children:y.serviceType})]}),v==="item"&&E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"category",children:"Category"}),E.jsx("select",{id:"category",name:"category",value:t.category,onChange:V,children:ep.map(q=>E.jsx("option",{value:q,children:q},q))})]}),v==="item"&&E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"condition",children:"Condition"}),E.jsxs("select",{id:"condition",name:"condition",value:t.condition,onChange:V,children:[E.jsx("option",{value:"",children:"Select condition"}),E.jsx("option",{value:"Like New",children:"Like New"}),E.jsx("option",{value:"Good",children:"Good"}),E.jsx("option",{value:"Fair",children:"Fair"}),E.jsx("option",{value:"Poor",children:"Poor"})]})]}),v==="item"&&E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"photos",children:"Photos"}),E.jsxs("label",{htmlFor:"photos",className:"image-upload-label",children:[E.jsx("span",{role:"img","aria-label":"camera",style:{marginRight:8},children:"📷"}),a.length>0?`${a.length} photo${a.length>1?"s":""} selected`:"Choose Photos"]}),E.jsx("input",{type:"file",id:"photos",name:"photos",accept:"image/*",multiple:!0,onChange:j,disabled:c,className:"image-input"}),a.length>0&&E.jsx("div",{className:"image-preview-list",children:a.map((q,$)=>E.jsxs("div",{className:"image-preview-item",children:[E.jsx("span",{className:"image-preview-name",children:q.name}),E.jsxs("span",{className:"image-preview-size",children:["(",(q.size/1024/1024).toFixed(2)," MB)"]})]},$))}),y.photos&&E.jsx("span",{className:"error-message",children:y.photos}),m.total>0&&E.jsxs("div",{className:"upload-progress",children:["Uploading ",m.current," of ",m.total," photos..."]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"location",children:v==="item"?"Pickup Location *":"Service Location *"}),E.jsx("input",{type:"text",id:"location",name:"location",value:t.location,onChange:V,placeholder:v==="item"?"City, State or general area":"Where is the service provided?",className:y.location?"error":""}),y.location&&E.jsx("span",{className:"error-message",children:y.location})]}),E.jsx("div",{className:"form-actions",children:E.jsx("button",{type:"submit",disabled:c,className:"submit-btn",children:c?"Creating Listing...":"Create Listing"})})]})]})})}function T6(){const{currentUser:i,userProfile:e,logout:t,updateUserProfile:s}=Mf(),a=Fr(),[l,c]=W.useState("profile"),[f,m]=W.useState([]),[p,y]=W.useState([]),[_,v]=W.useState(!0),[A,C]=W.useState(!1),[V,j]=W.useState(!1),[B,H]=W.useState(!1),[F,q]=W.useState(null),[$,z]=W.useState(null),[M,w]=W.useState(null),[b,I]=W.useState({}),[D,k]=W.useState({}),[x,Y]=W.useState({}),[ne,N]=W.useState({}),[O,ie]=W.useState({accounts:0,listings:0}),[Z,U]=W.useState(!0),[Q,J]=W.useState(!1),[te,oe]=W.useState(null),[K,de]=W.useState(!1),[Te,be]=W.useState(!1),[Re,ze]=W.useState(null),[Le,rt]=W.useState({}),[en,qt]=W.useState(!1),[ot,Pt]=W.useState([]);W.useEffect(()=>{const he=In(bt,"meta","stats"),Me=ya(he,Ge=>{Ge.exists()?ie(Ge.data()):ie({accounts:0,listings:0}),U(!1)},Ge=>{console.error("Error fetching stats:",Ge),ie({accounts:0,listings:0}),U(!1)});return()=>Me()},[]),W.useEffect(()=>{if(!i)return;const he=ya(O1(Vr(bt,"listings"),k1("userId","==",i.uid)),Ge=>{const Fe=Ge.docs.map(Pe=>({id:Pe.id,type:"item",...Pe.data()})),Ye=ya(O1(Vr(bt,"services"),k1("userId","==",i.uid)),Pe=>{const dt=Pe.docs.map(Ot=>({id:Ot.id,type:"service",...Ot.data()})),hn=[...Fe,...dt];m(hn)});return()=>Ye()}),Me=ya(Vr(bt,"listings"),Ge=>{const Ye=Ge.docs.map(Pe=>({id:Pe.id,type:"item",...Pe.data()})).filter(Pe=>(Pe.requestors||[]).some(dt=>dt.userId===i.uid)).map(Pe=>{var hn;const dt=(Pe.requestors||[]).find(Ot=>Ot.userId===i.uid);return{...Pe,userRequest:dt,isMatched:((hn=Pe.matchedWith)==null?void 0:hn.userId)===i.uid}});y(Ye),v(!1)});return()=>{he(),Me()}},[i]);const Ue=he=>{oe(he),J(!0)},ut=async()=>{if(te){de(!0);try{const he=te.type==="service"?"services":"listings",Me=In(bt,he,te.id),Ge=await bu(Me);if(!Ge.exists())throw new Error(`${te.type==="service"?"Service":"Listing"} not found`);const Fe=Ge.data();if(Fe.userId!==i.uid)throw new Error(`You can only delete your own ${te.type==="service"?"services":"listings"}`);if(Fe.photos&&Fe.photos.length>0){const Ye=Fe.photos.map(Pe=>{const dt=gb(yb,Pe.path);return i6(dt)});await Promise.allSettled(Ye)}await SN(Me),alert(`${te.type==="service"?"Service":"Listing"} deleted successfully!`),J(!1),oe(null)}catch(he){console.error("Error deleting:",he),alert(`Failed to delete ${te.type==="service"?"service":"listing"}. Please try again.`)}finally{de(!1)}}},Tt=()=>{J(!1),oe(null)},Ct=he=>{ze(he),he.type==="service"?rt({title:he.title||"",description:he.description||"",serviceType:he.serviceType||"",location:he.location||""}):rt({title:he.title||"",description:he.description||"",category:he.category||"",condition:he.condition||"",location:he.location||""}),be(!0)},Ze=he=>{const{name:Me,value:Ge}=he.target;rt(Fe=>({...Fe,[Me]:Ge}))},tn=async()=>{if(Re){qt(!0);try{const he=Re.type==="service"?"services":"listings",Me=In(bt,he,Re.id);await Or(Me,{...Le,updatedAt:new Date}),alert(`${Re.type==="service"?"Service":"Listing"} updated successfully!`),be(!1),ze(null),rt({})}catch(he){console.error("Error updating:",he),alert(`Failed to update ${Re.type==="service"?"service":"listing"}. Please try again.`)}finally{qt(!1)}}},ht=()=>{be(!1),ze(null),rt({})},st=async()=>{try{await t(),a("/")}catch(he){console.error("Error logging out:",he)}},Qt=()=>{a("/")},Ke=he=>new Date(he).toLocaleDateString(),qe=he=>{switch(he==null?void 0:he.toLowerCase()){case"available":return"status-available";case"matched":return"status-matched";case"claimed":return"status-claimed";default:return"status-available"}},at=he=>{q(he),C(!0)},St=he=>{z(he),j(!0)},Dt=(he,Me)=>{w(he),q({id:Me}),H(!0)},Vt=()=>{C(!1),j(!1),H(!1),q(null),z(null),w(null)},Ut=async(he,Me)=>{const Ge=`${he}-${Me.userId}`;I(Fe=>({...Fe,[Ge]:!0}));try{const Fe=In(bt,"listings",he);await Or(Fe,{matchedWith:{userId:Me.userId,userEmail:Me.userEmail,userFullName:Me.userFullName,matchDate:new Date().toISOString()},status:"matched"}),k(Ye=>({...Ye,[Ge]:!0})),setTimeout(()=>{k(Ye=>{const Pe={...Ye};return delete Pe[Ge],Pe}),I(Ye=>{const Pe={...Ye};return delete Pe[Ge],Pe})},3e3)}catch(Fe){console.error("Error matching with user:",Fe),alert("Failed to match with user. Please try again.")}finally{I(Fe=>{const Ye={...Fe};return delete Ye[Ge],Ye})}},nn=async(he,Me,Ge)=>{const Fe=`${F.id}-${he}`;Y(Ye=>({...Ye,[Fe]:!0}));try{const Ye=In(bt,"listings",F.id);await Or(Ye,{contactExchanged:{[he]:{sharedBy:i.uid,sharedAt:new Date().toISOString(),userEmail:i.email,userFullName:(e==null?void 0:e.fullName)||"Unknown"}}}),N(Pe=>({...Pe,[Fe]:!0})),setTimeout(()=>{N(Pe=>{const dt={...Pe};return delete dt[Fe],dt}),Y(Pe=>{const dt={...Pe};return delete dt[Fe],dt})},3e3)}catch(Ye){console.error("Error sharing contact:",Ye),alert("Failed to share contact. Please try again.")}finally{Y(Ye=>{const Pe={...Ye};return delete Pe[Fe],Pe})}};return _?E.jsx("div",{className:"account-page",children:E.jsxs("div",{className:"loading-container",children:[E.jsx("div",{className:"loading-spinner"}),E.jsx("p",{children:"Loading account information..."})]})}):E.jsxs("div",{className:"account-page",children:[E.jsxs("div",{className:"account-container",children:[E.jsxs("button",{onClick:Qt,className:"back-to-start-btn",children:[E.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("path",{d:"M12 19-7-7 7-7"}),E.jsx("path",{d:"M19 12H5"})]}),"Back to Home"]}),E.jsxs("div",{className:"account-header",children:[E.jsx("h1",{children:"Account"}),E.jsx("p",{children:"Manage your profile, listings, and requests"})]}),E.jsxs("div",{className:"account-tabs",children:[E.jsx("button",{className:`tab-btn ${l==="profile"?"active":""}`,onClick:()=>c("profile"),children:"Profile"}),E.jsxs("button",{className:`tab-btn ${l==="listings"?"active":""}`,onClick:()=>c("listings"),children:["My Listings (",f.length+ot.length,")"]}),E.jsxs("button",{className:`tab-btn ${l==="requests"?"active":""}`,onClick:()=>c("requests"),children:["My Requests (",p.length,")"]})]}),E.jsxs("div",{className:"tab-content",children:[l==="profile"&&E.jsxs("div",{className:"profile-section",children:[E.jsx("h3",{children:"Profile Information"}),E.jsxs("div",{className:"profile-info",children:[E.jsxs("div",{className:"info-row",children:[E.jsx("span",{className:"info-label",children:"Email:"}),E.jsx("span",{className:"info-value",children:i.email}),E.jsx("span",{className:`verification-badge ${i.emailVerified?"verified":"unverified"}`,children:i.emailVerified?"✓ Verified":"⚠ Unverified"})]}),E.jsxs("div",{className:"info-row",children:[E.jsx("span",{className:"info-label",children:"Full Name:"}),E.jsx("span",{className:"info-value",children:(e==null?void 0:e.fullName)||"Not set"})]}),E.jsxs("div",{className:"info-row",children:[E.jsx("span",{className:"info-label",children:"Username:"}),E.jsx("span",{className:"info-value",children:(e==null?void 0:e.username)||"Not set"})]}),E.jsxs("div",{className:"info-row",children:[E.jsx("span",{className:"info-label",children:"Member Since:"}),E.jsx("span",{className:"info-value",children:e!=null&&e.createdAt?new Date(e.createdAt.toDate()).toLocaleDateString():"Unknown"})]})]}),E.jsxs("div",{className:"profile-update",children:[E.jsx("h3",{children:"Update Profile"}),E.jsxs("form",{onSubmit:async he=>{he.preventDefault();const Ge=new FormData(he.target).get("fullName");if(Ge.trim()){const Fe=await s({fullName:Ge.trim()});alert(Fe?"Profile updated successfully!":"Failed to update profile. Please try again.")}},children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"fullName",children:"Full Name"}),E.jsx("input",{type:"text",id:"fullName",name:"fullName",placeholder:"Enter your full name",defaultValue:(e==null?void 0:e.fullName)||"",className:"profile-input"})]}),E.jsx("button",{type:"submit",className:"update-profile-btn",children:"Update Profile"})]})]}),E.jsx("button",{onClick:st,className:"logout-btn",children:"Sign Out"})]}),l==="listings"&&E.jsxs("div",{className:"listings-section",children:[E.jsx("h2",{children:"My Listings"}),f.length===0&&ot.length===0?E.jsxs("div",{className:"empty-state",children:[E.jsx("p",{children:"You haven't created any listings yet."}),E.jsx("button",{onClick:()=>a("/createlistings"),className:"create-listing-btn",children:"Create Your First Listing"})]}):E.jsxs("div",{className:"listings-grid",children:[f.map(he=>E.jsxs("div",{className:"listing-card",children:[E.jsxs("div",{className:"listing-header",children:[E.jsx("h3",{children:he.title}),E.jsxs("div",{className:"listing-status",children:[E.jsx("span",{className:"listing-type-badge item",children:"Item"}),he.status!=="matched"&&E.jsx("span",{className:`status-badge ${qe(he.status)}`,children:he.status}),he.matchedWith&&E.jsx("span",{className:"matched-badge",children:"✓ Matched"})]})]}),E.jsx("p",{className:"listing-description",children:he.description}),E.jsxs("div",{className:"listing-meta",children:[E.jsx("span",{children:he.category}),E.jsx("span",{children:"•"}),E.jsx("span",{children:he.condition}),E.jsx("span",{children:"•"}),E.jsx("span",{children:he.location})]}),E.jsxs("div",{className:"listing-actions",children:[E.jsxs("span",{className:"request-count",children:[(he.requestors||[]).length," request",(he.requestors||[]).length!==1?"s":""]}),E.jsxs("div",{className:"listing-buttons",children:[(he.requestors||[]).length>0&&E.jsx("button",{className:"view-requests-btn",onClick:()=>at(he),children:"View Requests"}),E.jsx("button",{className:"edit-listing-btn",onClick:()=>Ct(he),children:"Edit"}),E.jsx("button",{className:"delete-listing-btn",onClick:()=>Ue(he),children:"Delete"})]})]})]},`item-${he.id}`)),ot.map(he=>E.jsxs("div",{className:"listing-card",children:[E.jsxs("div",{className:"listing-header",children:[E.jsx("h3",{children:he.title}),E.jsxs("div",{className:"listing-status",children:[E.jsx("span",{className:"listing-type-badge service",children:"Service"}),he.status!=="matched"&&E.jsx("span",{className:`status-badge ${qe(he.status)}`,children:he.status}),he.matchedWith&&E.jsx("span",{className:"matched-badge",children:"✓ Matched"})]})]}),E.jsx("p",{className:"listing-description",children:he.description}),E.jsxs("div",{className:"listing-meta",children:[E.jsx("span",{children:he.serviceType}),E.jsx("span",{children:"•"}),E.jsx("span",{children:he.location})]}),E.jsxs("div",{className:"listing-actions",children:[E.jsxs("span",{className:"request-count",children:[(he.requestors||[]).length," request",(he.requestors||[]).length!==1?"s":""]}),E.jsxs("div",{className:"listing-buttons",children:[(he.requestors||[]).length>0&&E.jsx("button",{className:"view-requests-btn",onClick:()=>at(he),children:"View Requests"}),E.jsx("button",{className:"edit-listing-btn",onClick:()=>Ct(he),children:"Edit"}),E.jsx("button",{className:"delete-listing-btn",onClick:()=>Ue(he),children:"Delete"})]})]})]},`service-${he.id}`))]})]}),l==="requests"&&E.jsxs("div",{className:"requests-section",children:[E.jsx("h2",{children:"My Requests"}),p.length===0?E.jsxs("div",{className:"empty-state",children:[E.jsx("p",{children:"You haven't requested any items yet."}),E.jsx("button",{onClick:()=>a("/listingspage"),className:"browse-listings-btn",children:"Browse Listings"})]}):E.jsx("div",{className:"requests-grid",children:p.map(he=>E.jsxs("div",{className:"request-card",children:[E.jsxs("div",{className:"request-header",children:[E.jsx("h3",{children:he.title}),E.jsxs("div",{className:"request-status",children:[(he.status==="available"||he.status==="claimed")&&E.jsx("span",{className:`status-badge ${qe(he.status)}`,children:he.status}),he.isMatched&&E.jsx("span",{className:"matched-badge",children:"✓ Matched"})]})]}),E.jsx("p",{className:"request-description",children:he.description}),E.jsxs("div",{className:"request-meta",children:[E.jsxs("span",{children:["Posted by: ",he.userFullName]}),E.jsx("span",{children:"•"}),E.jsxs("span",{children:["Requested: ",Ke(he.userRequest.requestDate)]})]}),he.isMatched&&E.jsx("div",{className:"matched-info",children:E.jsx("button",{className:"view-owner-contact-btn",onClick:()=>St(he),children:"View Owner Contact"})})]},he.id))})]})]})]}),A&&F&&E.jsx("div",{className:"modal-overlay",onClick:Vt,children:E.jsxs("div",{className:"modal-content",onClick:he=>he.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",children:[E.jsxs("h3",{children:['Requests for "',F.title,'"']}),E.jsx("button",{className:"close-modal-btn",onClick:Vt,children:"×"})]}),E.jsx("div",{className:"modal-body",children:(F.requestors||[]).length===0?E.jsx("p",{children:"No requests yet."}):E.jsx("div",{className:"requests-list",children:F.requestors.map((he,Me)=>{const Ge=`${F.id}-${he.userId}`,Fe=`${F.id}-${he.userId}`,Ye=b[Ge],Pe=D[Ge],dt=x[Fe],hn=ne[Fe];return E.jsxs("div",{className:"requestor-item",children:[E.jsxs("div",{className:"requestor-header",children:[E.jsxs("div",{className:"requestor-info",children:[E.jsx("h4",{children:he.userFullName}),E.jsxs("p",{children:["Email: ",he.userEmail]}),E.jsxs("p",{children:["Requested: ",Ke(he.requestDate)]})]}),E.jsx("div",{className:"requestor-status",children:E.jsx("button",{className:`match-btn ${Ye?"loading":""}`,onClick:()=>Ut(F.id,he),disabled:Ye,children:Ye?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"spinner"}),"Matching..."]}):"Match"})})]}),E.jsx("div",{className:"requestor-actions",children:Pe?hn?E.jsx("button",{className:"contact-btn shared",disabled:!0,children:"✓ Contact Shared"}):E.jsx("button",{className:`contact-btn ${dt?"loading":""}`,onClick:()=>Dt(he,F.id),disabled:dt,children:dt?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"spinner"}),"Sharing..."]}):"Share Contact"}):E.jsx("button",{className:"contact-btn",onClick:()=>Dt(he,F.id),children:"Contact"})})]},Me)})})})]})}),V&&$&&E.jsx("div",{className:"modal-overlay",onClick:Vt,children:E.jsxs("div",{className:"modal-content",onClick:he=>he.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",children:[E.jsx("h3",{children:"Owner Contact Information"}),E.jsx("button",{className:"close-modal-btn",onClick:Vt,children:"×"})]}),E.jsxs("div",{className:"modal-body",children:[E.jsxs("div",{className:"owner-info",children:[E.jsxs("h4",{children:["Item: ",$.title]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Owner Name:"})," ",$.userFullName]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Owner Email:"})," ",$.userEmail]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Posted:"})," ",Ke($.datePosted)]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Your Request:"})," ",Ke($.userRequest.requestDate)]})]}),E.jsx("div",{className:"contact-actions",children:E.jsx("p",{className:"contact-note",children:"You can now contact the owner directly using their email address above."})})]})]})}),B&&M&&F&&E.jsx("div",{className:"modal-overlay",onClick:Vt,children:E.jsxs("div",{className:"modal-content",onClick:he=>he.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",children:[E.jsx("h3",{children:"Contact Exchange"}),E.jsx("button",{className:"close-modal-btn",onClick:Vt,children:"×"})]}),E.jsx("div",{className:"modal-body",children:E.jsxs("div",{className:"contact-exchange-info",children:[E.jsxs("h4",{children:["Exchange Contact with ",M.userFullName]}),E.jsx("p",{children:"Share your contact information to facilitate the exchange."}),E.jsxs("div",{className:"contact-details",children:[E.jsxs("div",{className:"your-contact",children:[E.jsx("h5",{children:"Your Contact Information:"}),E.jsxs("p",{children:[E.jsx("strong",{children:"Name:"})," ",(e==null?void 0:e.fullName)||"Not set"]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Email:"})," ",i==null?void 0:i.email]})]}),E.jsxs("div",{className:"their-contact",children:[E.jsx("h5",{children:"Their Contact Information:"}),E.jsxs("p",{children:[E.jsx("strong",{children:"Name:"})," ",M.userFullName]}),E.jsxs("p",{children:[E.jsx("strong",{children:"Email:"})," ",M.userEmail]})]})]}),E.jsxs("div",{className:"contact-exchange-actions",children:[E.jsx("button",{className:"share-contact-btn",onClick:()=>nn(M.userId,M.userEmail,M.userFullName),children:"Share My Contact"}),E.jsx("p",{className:"contact-exchange-note",children:"By sharing your contact, you agree to exchange contact information with this user."})]})]})})]})}),Q&&te&&E.jsx("div",{className:"modal-overlay",onClick:Tt,children:E.jsxs("div",{className:"modal-content",onClick:he=>he.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",children:[E.jsx("h3",{children:"Delete Listing"}),E.jsx("button",{className:"close-modal-btn",onClick:Tt,children:"×"})]}),E.jsx("div",{className:"modal-body",children:E.jsxs("p",{children:["Are you sure you want to delete ",E.jsx("strong",{children:te.title}),"? This action cannot be undone."]})}),E.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[E.jsx("button",{className:"cancel-btn",onClick:Tt,disabled:K,children:"Cancel"}),E.jsx("button",{className:"confirm-delete-btn",onClick:ut,disabled:K,style:{background:"#dc2626",color:"white"},children:K?"Deleting...":"Delete"})]})]})}),Te&&Re&&E.jsx("div",{className:"modal-overlay",onClick:ht,children:E.jsxs("div",{className:"modal-content",onClick:he=>he.stopPropagation(),children:[E.jsxs("div",{className:"modal-header",children:[E.jsxs("h3",{children:["Edit ",Re.type==="service"?"Service":"Listing"]}),E.jsx("button",{className:"close-modal-btn",onClick:ht,children:"×"})]}),E.jsx("div",{className:"modal-body",children:E.jsxs("form",{className:"edit-form",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"edit-title",children:"Title"}),E.jsx("input",{type:"text",id:"edit-title",name:"title",value:Le.title,onChange:Ze,className:"form-input",required:!0})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"edit-description",children:"Description"}),E.jsx("textarea",{id:"edit-description",name:"description",value:Le.description,onChange:Ze,className:"form-textarea",rows:"4",required:!0})]}),Re.type==="service"&&E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"edit-serviceType",children:"Service Type"}),E.jsxs("select",{id:"edit-serviceType",name:"serviceType",value:Le.serviceType,onChange:Ze,className:"form-select",required:!0,children:[E.jsx("option",{value:"",children:"Select Service Type"}),E.jsx("option",{value:"Tutoring",children:"Tutoring"}),E.jsx("option",{value:"Volunteering",children:"Volunteering"}),E.jsx("option",{value:"Carpooling",children:"Carpooling"}),E.jsx("option",{value:"Other",children:"Other"})]})]}),Re.type==="item"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"edit-category",children:"Category"}),E.jsxs("select",{id:"edit-category",name:"category",value:Le.category,onChange:Ze,className:"form-select",required:!0,children:[E.jsx("option",{value:"",children:"Select Category"}),E.jsx("option",{value:"Textbooks/School",children:"Textbooks/School"}),E.jsx("option",{value:"Clothing",children:"Clothing"}),E.jsx("option",{value:"Sports",children:"Sports"}),E.jsx("option",{value:"Other",children:"Other"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"edit-condition",children:"Condition"}),E.jsxs("select",{id:"edit-condition",name:"condition",value:Le.condition,onChange:Ze,className:"form-select",required:!0,children:[E.jsx("option",{value:"",children:"Select Condition"}),E.jsx("option",{value:"Like New",children:"Like New"}),E.jsx("option",{value:"Good",children:"Good"}),E.jsx("option",{value:"Fair",children:"Fair"}),E.jsx("option",{value:"Poor",children:"Poor"})]})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{htmlFor:"edit-location",children:"Location"}),E.jsx("input",{type:"text",id:"edit-location",name:"location",value:Le.location,onChange:Ze,className:"form-input",required:!0})]})]})}),E.jsx("div",{className:"modal-footer",children:E.jsx("button",{className:`save-btn ${en?"loading":""}`,onClick:tn,disabled:en,children:en?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"spinner"}),"Saving..."]}):"Save Changes"})})]})})]})}function w6(){const i=Fr(),[e,t]=W.useState({accounts:0,listings:0}),[s,a]=W.useState(!0);W.useEffect(()=>{const c=In(bt,"meta","stats"),f=ya(c,m=>{m.exists()?t(m.data()):t({accounts:0,listings:0}),a(!1)},m=>{console.error("Error fetching stats:",m),t({accounts:0,listings:0}),a(!1)});return()=>f()},[]);const l=()=>{i("/")};return E.jsx("div",{className:"about-page",children:E.jsxs("div",{className:"about-container",children:[E.jsxs("button",{onClick:l,className:"back-to-start-btn",children:[E.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[E.jsx("path",{d:"M12 19L5 12L12 5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),E.jsx("path",{d:"M19 12H5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Back to Home"]}),E.jsx("h1",{className:"about-title",children:"About GoodNeighbor"}),E.jsxs("div",{className:"community-stats-card",children:[E.jsx("div",{className:"community-stats-title",children:"Community Stats"}),s?E.jsx("div",{className:"community-stats-loading",children:"Loading..."}):E.jsxs("div",{className:"community-stats-list",children:[E.jsxs("div",{className:"community-stat",children:[E.jsx("span",{className:"community-stat-number accounts",children:e.accounts}),E.jsx("span",{className:"community-stat-label",children:"Accounts"})]}),E.jsxs("div",{className:"community-stat",children:[E.jsx("span",{className:"community-stat-number listings",children:e.listings}),E.jsx("span",{className:"community-stat-label",children:"Listings"})]})]})]}),E.jsxs("div",{className:"about-section",children:[E.jsx("h2",{className:"about-section-title",children:"About Us"}),E.jsx("div",{className:"about-section-text",children:E.jsx("p",{children:"Welcome to Good Neighbor! This is a community-driven marketplace where you can exchange goods and services with members of your community. As a kind reminder from Good Neighbor, please be mindful of both giving and receiving. This project is only sustainable if we all do our part to keep it going. Our dream is to not only create a platform for people to exchange, but to create a stronger, more connected community."})})]}),E.jsxs("div",{className:"about-section",children:[E.jsx("h2",{className:"about-section-title",children:"Team"}),E.jsxs("div",{className:"co-founders-list",children:[E.jsx("a",{href:"https://www.instagram.com/_michael.yang/",target:"_blank",rel:"noopener noreferrer",className:"co-founder-link",children:E.jsxs("div",{className:"co-founder",children:[E.jsx("h3",{className:"co-founder-name",children:"Michael Yang"}),E.jsx("p",{className:"co-founder-nickname",children:E.jsx("em",{children:"Blorg"})})]})}),E.jsx("a",{href:"https://www.instagram.com/ronit_kongara/",target:"_blank",rel:"noopener noreferrer",className:"co-founder-link",children:E.jsxs("div",{className:"co-founder",children:[E.jsx("h3",{className:"co-founder-name",children:"Ronit Kongara"}),E.jsx("p",{className:"co-founder-nickname",children:E.jsx("em",{children:"Kongaroo"})})]})})]}),E.jsx("div",{className:"team-contact",children:E.jsxs("p",{className:"team-email",children:[E.jsx("strong",{children:"Contact us:"})," ",E.jsx("a",{href:"mailto:gneighborus@gmail.com",className:"email-link",children:"gneighborus@gmail.com"})]})})]})]})})}function b6(i,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(s){if(s!=="default"&&!(s in i)){var a=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(i,s,a.get?a:{enumerable:!0,get:function(){return t[s]}})}})}),Object.freeze(i)}function Eb(i,e){return new Promise(function(t,s){let a;return A6(i).then(function(l){try{return a=l,t(new Blob([e.slice(0,2),a,e.slice(2)],{type:"image/jpeg"}))}catch(c){return s(c)}},s)})}const A6=i=>new Promise((e,t)=>{const s=new FileReader;s.addEventListener("load",({target:{result:a}})=>{const l=new DataView(a);let c=0;if(l.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const f=l.getUint16(c);if(f===65498)break;const m=l.getUint16(c+2);if(f===65505&&l.getUint32(c+4)===1165519206){const p=c+10;let y;switch(l.getUint16(p)){case 18761:y=!0;break;case 19789:y=!1;break;default:return t("TIFF header contains invalid endian")}if(l.getUint16(p+2,y)!==42)return t("TIFF header contains invalid version");const _=l.getUint32(p+4,y),v=p+_+2+12*l.getUint16(p+_,y);for(let A=p+_+2;A<v;A+=12)if(l.getUint16(A,y)==274){if(l.getUint16(A+2,y)!==3)return t("Orientation data type is invalid");if(l.getUint32(A+4,y)!==1)return t("Orientation data count is invalid");l.setUint16(A+8,1,y);break}return e(a.slice(c,c+2+m))}c+=2+m}return e(new Blob)}),s.readAsArrayBuffer(i)});var rf={},S6={get exports(){return rf},set exports(i){rf=i}};(function(i){var e,t,s={};S6.exports=s,s.parse=function(a,l){for(var c=s.bin.readUshort,f=s.bin.readUint,m=0,p={},y=new Uint8Array(a),_=y.length-4;f(y,_)!=101010256;)_--;m=_,m+=4;var v=c(y,m+=4);c(y,m+=2);var A=f(y,m+=2),C=f(y,m+=4);m+=4,m=C;for(var V=0;V<v;V++){f(y,m),m+=4,m+=4,m+=4,f(y,m+=4),A=f(y,m+=4);var j=f(y,m+=4),B=c(y,m+=4),H=c(y,m+2),F=c(y,m+4);m+=6;var q=f(y,m+=8);m+=4,m+=B+H+F,s._readLocal(y,q,p,A,j,l)}return p},s._readLocal=function(a,l,c,f,m,p){var y=s.bin.readUshort,_=s.bin.readUint;_(a,l),y(a,l+=4),y(a,l+=2);var v=y(a,l+=2);_(a,l+=2),_(a,l+=4),l+=4;var A=y(a,l+=8),C=y(a,l+=2);l+=2;var V=s.bin.readUTF8(a,l,A);if(l+=A,l+=C,p)c[V]={size:m,csize:f};else{var j=new Uint8Array(a.buffer,l);if(v==0)c[V]=new Uint8Array(j.buffer.slice(l,l+f));else{if(v!=8)throw"unknown compression method: "+v;var B=new Uint8Array(m);s.inflateRaw(j,B),c[V]=B}}},s.inflateRaw=function(a,l){return s.F.inflate(a,l)},s.inflate=function(a,l){return a[0],a[1],s.inflateRaw(new Uint8Array(a.buffer,a.byteOffset+2,a.length-6),l)},s.deflate=function(a,l){l==null&&(l={level:6});var c=0,f=new Uint8Array(50+Math.floor(1.1*a.length));f[c]=120,f[c+1]=156,c+=2,c=s.F.deflateRaw(a,f,c,l.level);var m=s.adler(a,0,a.length);return f[c+0]=m>>>24&255,f[c+1]=m>>>16&255,f[c+2]=m>>>8&255,f[c+3]=m>>>0&255,new Uint8Array(f.buffer,0,c+4)},s.deflateRaw=function(a,l){l==null&&(l={level:6});var c=new Uint8Array(50+Math.floor(1.1*a.length)),f=s.F.deflateRaw(a,c,f,l.level);return new Uint8Array(c.buffer,0,f)},s.encode=function(a,l){l==null&&(l=!1);var c=0,f=s.bin.writeUint,m=s.bin.writeUshort,p={};for(var y in a){var _=!s._noNeed(y)&&!l,v=a[y],A=s.crc.crc(v,0,v.length);p[y]={cpr:_,usize:v.length,crc:A,file:_?s.deflateRaw(v):v}}for(var y in p)c+=p[y].file.length+30+46+2*s.bin.sizeUTF8(y);c+=22;var C=new Uint8Array(c),V=0,j=[];for(var y in p){var B=p[y];j.push(V),V=s._writeHeader(C,V,y,B,0)}var H=0,F=V;for(var y in p)B=p[y],j.push(V),V=s._writeHeader(C,V,y,B,1,j[H++]);var q=V-F;return f(C,V,101010256),V+=4,m(C,V+=4,H),m(C,V+=2,H),f(C,V+=2,q),f(C,V+=4,F),V+=4,V+=2,C.buffer},s._noNeed=function(a){var l=a.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(l)!=-1},s._writeHeader=function(a,l,c,f,m,p){var y=s.bin.writeUint,_=s.bin.writeUshort,v=f.file;return y(a,l,m==0?67324752:33639248),l+=4,m==1&&(l+=2),_(a,l,20),_(a,l+=2,0),_(a,l+=2,f.cpr?8:0),y(a,l+=2,0),y(a,l+=4,f.crc),y(a,l+=4,v.length),y(a,l+=4,f.usize),_(a,l+=4,s.bin.sizeUTF8(c)),_(a,l+=2,0),l+=2,m==1&&(l+=2,l+=2,y(a,l+=6,p),l+=4),l+=s.bin.writeUTF8(a,l,c),m==0&&(a.set(v,l),l+=v.length),l},s.crc={table:function(){for(var a=new Uint32Array(256),l=0;l<256;l++){for(var c=l,f=0;f<8;f++)1&c?c=3988292384^c>>>1:c>>>=1;a[l]=c}return a}(),update:function(a,l,c,f){for(var m=0;m<f;m++)a=s.crc.table[255&(a^l[c+m])]^a>>>8;return a},crc:function(a,l,c){return 4294967295^s.crc.update(4294967295,a,l,c)}},s.adler=function(a,l,c){for(var f=1,m=0,p=l,y=l+c;p<y;){for(var _=Math.min(p+5552,y);p<_;)m+=f+=a[p++];f%=65521,m%=65521}return m<<16|f},s.bin={readUshort:function(a,l){return a[l]|a[l+1]<<8},writeUshort:function(a,l,c){a[l]=255&c,a[l+1]=c>>8&255},readUint:function(a,l){return 16777216*a[l+3]+(a[l+2]<<16|a[l+1]<<8|a[l])},writeUint:function(a,l,c){a[l]=255&c,a[l+1]=c>>8&255,a[l+2]=c>>16&255,a[l+3]=c>>24&255},readASCII:function(a,l,c){for(var f="",m=0;m<c;m++)f+=String.fromCharCode(a[l+m]);return f},writeASCII:function(a,l,c){for(var f=0;f<c.length;f++)a[l+f]=c.charCodeAt(f)},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,l,c){for(var f,m="",p=0;p<c;p++)m+="%"+s.bin.pad(a[l+p].toString(16));try{f=decodeURIComponent(m)}catch{return s.bin.readASCII(a,l,c)}return f},writeUTF8:function(a,l,c){for(var f=c.length,m=0,p=0;p<f;p++){var y=c.charCodeAt(p);if((4294967168&y)==0)a[l+m]=y,m++;else if((4294965248&y)==0)a[l+m]=192|y>>6,a[l+m+1]=128|y>>0&63,m+=2;else if((4294901760&y)==0)a[l+m]=224|y>>12,a[l+m+1]=128|y>>6&63,a[l+m+2]=128|y>>0&63,m+=3;else{if((4292870144&y)!=0)throw"e";a[l+m]=240|y>>18,a[l+m+1]=128|y>>12&63,a[l+m+2]=128|y>>6&63,a[l+m+3]=128|y>>0&63,m+=4}}return m},sizeUTF8:function(a){for(var l=a.length,c=0,f=0;f<l;f++){var m=a.charCodeAt(f);if((4294967168&m)==0)c++;else if((4294965248&m)==0)c+=2;else if((4294901760&m)==0)c+=3;else{if((4292870144&m)!=0)throw"e";c+=4}}return c}},s.F={},s.F.deflateRaw=function(a,l,c,f){var m=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][f],p=s.F.U,y=s.F._goodIndex;s.F._hash;var _=s.F._putsE,v=0,A=c<<3,C=0,V=a.length;if(f==0){for(;v<V;)_(l,A,v+(D=Math.min(65535,V-v))==V?1:0),A=s.F._copyExact(a,v,D,l,A+8),v+=D;return A>>>3}var j=p.lits,B=p.strt,H=p.prev,F=0,q=0,$=0,z=0,M=0,w=0;for(V>2&&(B[w=s.F._hash(a,0)]=0),v=0;v<V;v++){if(M=w,v+1<V-2){w=s.F._hash(a,v+1);var b=v+1&32767;H[b]=B[w],B[w]=b}if(C<=v){(F>14e3||q>26697)&&V-v>100&&(C<v&&(j[F]=v-C,F+=2,C=v),A=s.F._writeBlock(v==V-1||C==V?1:0,j,F,z,a,$,v-$,l,A),F=q=z=0,$=v);var I=0;v<V-2&&(I=s.F._bestMatch(a,v,H,M,Math.min(m[2],V-v),m[3]));var D=I>>>16,k=65535&I;if(I!=0){k=65535&I;var x=y(D=I>>>16,p.of0);p.lhst[257+x]++;var Y=y(k,p.df0);p.dhst[Y]++,z+=p.exb[x]+p.dxb[Y],j[F]=D<<23|v-C,j[F+1]=k<<16|x<<8|Y,F+=2,C=v+D}else p.lhst[a[v]]++;q++}}for($==v&&a.length!=0||(C<v&&(j[F]=v-C,F+=2,C=v),A=s.F._writeBlock(1,j,F,z,a,$,v-$,l,A),F=0,q=0,F=q=z=0,$=v);(7&A)!=0;)A++;return A>>>3},s.F._bestMatch=function(a,l,c,f,m,p){var y=32767&l,_=c[y],v=y-_+32768&32767;if(_==y||f!=s.F._hash(a,l-v))return 0;for(var A=0,C=0,V=Math.min(32767,l);v<=V&&--p!=0&&_!=y;){if(A==0||a[l+A]==a[l+A-v]){var j=s.F._howLong(a,l,v);if(j>A){if(C=v,(A=j)>=m)break;v+2<j&&(j=v+2);for(var B=0,H=0;H<j-2;H++){var F=l-v+H+32768&32767,q=F-c[F]+32768&32767;q>B&&(B=q,_=F)}}}v+=(y=_)-(_=c[y])+32768&32767}return A<<16|C},s.F._howLong=function(a,l,c){if(a[l]!=a[l-c]||a[l+1]!=a[l+1-c]||a[l+2]!=a[l+2-c])return 0;var f=l,m=Math.min(a.length,l+258);for(l+=3;l<m&&a[l]==a[l-c];)l++;return l-f},s.F._hash=function(a,l){return(a[l]<<8|a[l+1])+(a[l+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(a,l,c,f,m,p,y,_,v){var A,C,V,j,B,H,F,q,$,z=s.F.U,M=s.F._putsF,w=s.F._putsE;z.lhst[256]++,C=(A=s.F.getTrees())[0],V=A[1],j=A[2],B=A[3],H=A[4],F=A[5],q=A[6],$=A[7];var b=32+((v+3&7)==0?0:8-(v+3&7))+(y<<3),I=f+s.F.contSize(z.fltree,z.lhst)+s.F.contSize(z.fdtree,z.dhst),D=f+s.F.contSize(z.ltree,z.lhst)+s.F.contSize(z.dtree,z.dhst);D+=14+3*F+s.F.contSize(z.itree,z.ihst)+(2*z.ihst[16]+3*z.ihst[17]+7*z.ihst[18]);for(var k=0;k<286;k++)z.lhst[k]=0;for(k=0;k<30;k++)z.dhst[k]=0;for(k=0;k<19;k++)z.ihst[k]=0;var x=b<I&&b<D?0:I<D?1:2;if(M(_,v,a),M(_,v+1,x),v+=3,x==0){for(;(7&v)!=0;)v++;v=s.F._copyExact(m,p,y,_,v)}else{var Y,ne;if(x==1&&(Y=z.fltree,ne=z.fdtree),x==2){s.F.makeCodes(z.ltree,C),s.F.revCodes(z.ltree,C),s.F.makeCodes(z.dtree,V),s.F.revCodes(z.dtree,V),s.F.makeCodes(z.itree,j),s.F.revCodes(z.itree,j),Y=z.ltree,ne=z.dtree,w(_,v,B-257),w(_,v+=5,H-1),w(_,v+=5,F-4),v+=4;for(var N=0;N<F;N++)w(_,v+3*N,z.itree[1+(z.ordr[N]<<1)]);v+=3*F,v=s.F._codeTiny(q,z.itree,_,v),v=s.F._codeTiny($,z.itree,_,v)}for(var O=p,ie=0;ie<c;ie+=2){for(var Z=l[ie],U=Z>>>23,Q=O+(8388607&Z);O<Q;)v=s.F._writeLit(m[O++],Y,_,v);if(U!=0){var J=l[ie+1],te=J>>16,oe=J>>8&255,K=255&J;w(_,v=s.F._writeLit(257+oe,Y,_,v),U-z.of0[oe]),v+=z.exb[oe],M(_,v=s.F._writeLit(K,ne,_,v),te-z.df0[K]),v+=z.dxb[K],O+=U}}v=s.F._writeLit(256,Y,_,v)}return v},s.F._copyExact=function(a,l,c,f,m){var p=m>>>3;return f[p]=c,f[p+1]=c>>>8,f[p+2]=255-f[p],f[p+3]=255-f[p+1],p+=4,f.set(new Uint8Array(a.buffer,l,c),p),m+(c+4<<3)},s.F.getTrees=function(){for(var a=s.F.U,l=s.F._hufTree(a.lhst,a.ltree,15),c=s.F._hufTree(a.dhst,a.dtree,15),f=[],m=s.F._lenCodes(a.ltree,f),p=[],y=s.F._lenCodes(a.dtree,p),_=0;_<f.length;_+=2)a.ihst[f[_]]++;for(_=0;_<p.length;_+=2)a.ihst[p[_]]++;for(var v=s.F._hufTree(a.ihst,a.itree,7),A=19;A>4&&a.itree[1+(a.ordr[A-1]<<1)]==0;)A--;return[l,c,v,m,y,A,f,p]},s.F.getSecond=function(a){for(var l=[],c=0;c<a.length;c+=2)l.push(a[c+1]);return l},s.F.nonZero=function(a){for(var l="",c=0;c<a.length;c+=2)a[c+1]!=0&&(l+=(c>>1)+",");return l},s.F.contSize=function(a,l){for(var c=0,f=0;f<l.length;f++)c+=l[f]*a[1+(f<<1)];return c},s.F._codeTiny=function(a,l,c,f){for(var m=0;m<a.length;m+=2){var p=a[m],y=a[m+1];f=s.F._writeLit(p,l,c,f);var _=p==16?2:p==17?3:7;p>15&&(s.F._putsE(c,f,y,_),f+=_)}return f},s.F._lenCodes=function(a,l){for(var c=a.length;c!=2&&a[c-1]==0;)c-=2;for(var f=0;f<c;f+=2){var m=a[f+1],p=f+3<c?a[f+3]:-1,y=f+5<c?a[f+5]:-1,_=f==0?-1:a[f-1];if(m==0&&p==m&&y==m){for(var v=f+5;v+2<c&&a[v+2]==m;)v+=2;(A=Math.min(v+1-f>>>1,138))<11?l.push(17,A-3):l.push(18,A-11),f+=2*A-2}else if(m==_&&p==m&&y==m){for(v=f+5;v+2<c&&a[v+2]==m;)v+=2;var A=Math.min(v+1-f>>>1,6);l.push(16,A-3),f+=2*A-2}else l.push(m,0)}return c>>>1},s.F._hufTree=function(a,l,c){var f=[],m=a.length,p=l.length,y=0;for(y=0;y<p;y+=2)l[y]=0,l[y+1]=0;for(y=0;y<m;y++)a[y]!=0&&f.push({lit:y,f:a[y]});var _=f.length,v=f.slice(0);if(_==0)return 0;if(_==1){var A=f[0].lit;return v=A==0?1:0,l[1+(A<<1)]=1,l[1+(v<<1)]=1,1}f.sort(function(q,$){return q.f-$.f});var C=f[0],V=f[1],j=0,B=1,H=2;for(f[0]={lit:-1,f:C.f+V.f,l:C,r:V,d:0};B!=_-1;)C=j!=B&&(H==_||f[j].f<f[H].f)?f[j++]:f[H++],V=j!=B&&(H==_||f[j].f<f[H].f)?f[j++]:f[H++],f[B++]={lit:-1,f:C.f+V.f,l:C,r:V};var F=s.F.setDepth(f[B-1],0);for(F>c&&(s.F.restrictDepth(v,c,F),F=c),y=0;y<_;y++)l[1+(v[y].lit<<1)]=v[y].d;return F},s.F.setDepth=function(a,l){return a.lit!=-1?(a.d=l,l):Math.max(s.F.setDepth(a.l,l+1),s.F.setDepth(a.r,l+1))},s.F.restrictDepth=function(a,l,c){var f=0,m=1<<c-l,p=0;for(a.sort(function(_,v){return v.d==_.d?_.f-v.f:v.d-_.d}),f=0;f<a.length&&a[f].d>l;f++){var y=a[f].d;a[f].d=l,p+=m-(1<<c-y)}for(p>>>=c-l;p>0;)(y=a[f].d)<l?(a[f].d++,p-=1<<l-y-1):f++;for(;f>=0;f--)a[f].d==l&&p<0&&(a[f].d--,p++);p!=0&&console.log("debt left")},s.F._goodIndex=function(a,l){var c=0;return l[16|c]<=a&&(c|=16),l[8|c]<=a&&(c|=8),l[4|c]<=a&&(c|=4),l[2|c]<=a&&(c|=2),l[1|c]<=a&&(c|=1),c},s.F._writeLit=function(a,l,c,f){return s.F._putsF(c,f,l[a<<1]),f+l[1+(a<<1)]},s.F.inflate=function(a,l){var c=Uint8Array;if(a[0]==3&&a[1]==0)return l||new c(0);var f=s.F,m=f._bitsF,p=f._bitsE,y=f._decodeTiny,_=f.makeCodes,v=f.codes2map,A=f._get17,C=f.U,V=l==null;V&&(l=new c(a.length>>>2<<3));for(var j,B,H=0,F=0,q=0,$=0,z=0,M=0,w=0,b=0,I=0;H==0;)if(H=m(a,I,1),F=m(a,I+1,2),I+=3,F!=0){if(V&&(l=s.F._check(l,b+(1<<17))),F==1&&(j=C.flmap,B=C.fdmap,M=511,w=31),F==2){q=p(a,I,5)+257,$=p(a,I+5,5)+1,z=p(a,I+10,4)+4,I+=14;for(var D=0;D<38;D+=2)C.itree[D]=0,C.itree[D+1]=0;var k=1;for(D=0;D<z;D++){var x=p(a,I+3*D,3);C.itree[1+(C.ordr[D]<<1)]=x,x>k&&(k=x)}I+=3*z,_(C.itree,k),v(C.itree,k,C.imap),j=C.lmap,B=C.dmap,I=y(C.imap,(1<<k)-1,q+$,a,I,C.ttree);var Y=f._copyOut(C.ttree,0,q,C.ltree);M=(1<<Y)-1;var ne=f._copyOut(C.ttree,q,$,C.dtree);w=(1<<ne)-1,_(C.ltree,Y),v(C.ltree,Y,j),_(C.dtree,ne),v(C.dtree,ne,B)}for(;;){var N=j[A(a,I)&M];I+=15&N;var O=N>>>4;if(!(O>>>8))l[b++]=O;else{if(O==256)break;var ie=b+O-254;if(O>264){var Z=C.ldef[O-257];ie=b+(Z>>>3)+p(a,I,7&Z),I+=7&Z}var U=B[A(a,I)&w];I+=15&U;var Q=U>>>4,J=C.ddef[Q],te=(J>>>4)+m(a,I,15&J);for(I+=15&J,V&&(l=s.F._check(l,b+(1<<17)));b<ie;)l[b]=l[b++-te],l[b]=l[b++-te],l[b]=l[b++-te],l[b]=l[b++-te];b=ie}}}else{(7&I)!=0&&(I+=8-(7&I));var oe=4+(I>>>3),K=a[oe-4]|a[oe-3]<<8;V&&(l=s.F._check(l,b+K)),l.set(new c(a.buffer,a.byteOffset+oe,K),b),I=oe+K<<3,b+=K}return l.length==b?l:l.slice(0,b)},s.F._check=function(a,l){var c=a.length;if(l<=c)return a;var f=new Uint8Array(Math.max(c<<1,l));return f.set(a,0),f},s.F._decodeTiny=function(a,l,c,f,m,p){for(var y=s.F._bitsE,_=s.F._get17,v=0;v<c;){var A=a[_(f,m)&l];m+=15&A;var C=A>>>4;if(C<=15)p[v]=C,v++;else{var V=0,j=0;C==16?(j=3+y(f,m,2),m+=2,V=p[v-1]):C==17?(j=3+y(f,m,3),m+=3):C==18&&(j=11+y(f,m,7),m+=7);for(var B=v+j;v<B;)p[v]=V,v++}}return m},s.F._copyOut=function(a,l,c,f){for(var m=0,p=0,y=f.length>>>1;p<c;){var _=a[p+l];f[p<<1]=0,f[1+(p<<1)]=_,_>m&&(m=_),p++}for(;p<y;)f[p<<1]=0,f[1+(p<<1)]=0,p++;return m},s.F.makeCodes=function(a,l){for(var c,f,m,p,y=s.F.U,_=a.length,v=y.bl_count,A=0;A<=l;A++)v[A]=0;for(A=1;A<_;A+=2)v[a[A]]++;var C=y.next_code;for(c=0,v[0]=0,f=1;f<=l;f++)c=c+v[f-1]<<1,C[f]=c;for(m=0;m<_;m+=2)(p=a[m+1])!=0&&(a[m]=C[p],C[p]++)},s.F.codes2map=function(a,l,c){for(var f=a.length,m=s.F.U.rev15,p=0;p<f;p+=2)if(a[p+1]!=0)for(var y=p>>1,_=a[p+1],v=y<<4|_,A=l-_,C=a[p]<<A,V=C+(1<<A);C!=V;)c[m[C]>>>15-l]=v,C++},s.F.revCodes=function(a,l){for(var c=s.F.U.rev15,f=15-l,m=0;m<a.length;m+=2){var p=a[m]<<l-a[m+1];a[m]=c[p]>>>f}},s.F._putsE=function(a,l,c){c<<=7&l;var f=l>>>3;a[f]|=c,a[f+1]|=c>>>8},s.F._putsF=function(a,l,c){c<<=7&l;var f=l>>>3;a[f]|=c,a[f+1]|=c>>>8,a[f+2]|=c>>>16},s.F._bitsE=function(a,l,c){return(a[l>>>3]|a[1+(l>>>3)]<<8)>>>(7&l)&(1<<c)-1},s.F._bitsF=function(a,l,c){return(a[l>>>3]|a[1+(l>>>3)]<<8|a[2+(l>>>3)]<<16)>>>(7&l)&(1<<c)-1},s.F._get17=function(a,l){return(a[l>>>3]|a[1+(l>>>3)]<<8|a[2+(l>>>3)]<<16)>>>(7&l)},s.F._get25=function(a,l){return(a[l>>>3]|a[1+(l>>>3)]<<8|a[2+(l>>>3)]<<16|a[3+(l>>>3)]<<24)>>>(7&l)},s.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var a=s.F.U,l=0;l<32768;l++){var c=l;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,a.rev15[l]=(c>>>16|c<<16)>>>17}function f(m,p,y){for(;p--!=0;)m.push(0,y)}for(l=0;l<32;l++)a.ldef[l]=a.of0[l]<<3|a.exb[l],a.ddef[l]=a.df0[l]<<4|a.dxb[l];f(a.fltree,144,8),f(a.fltree,112,9),f(a.fltree,24,7),f(a.fltree,8,8),s.F.makeCodes(a.fltree,9),s.F.codes2map(a.fltree,9,a.flmap),s.F.revCodes(a.fltree,9),f(a.fdtree,32,5),s.F.makeCodes(a.fdtree,5),s.F.codes2map(a.fdtree,5,a.fdmap),s.F.revCodes(a.fdtree,5),f(a.itree,19,0),f(a.ltree,286,0),f(a.dtree,30,0),f(a.ttree,320,0)}()})();var R6=b6({__proto__:null,default:rf},[rf]);const Ni=function(){var i={nextZero(y,_){for(;y[_]!=0;)_++;return _},readUshort:(y,_)=>y[_]<<8|y[_+1],writeUshort(y,_,v){y[_]=v>>8&255,y[_+1]=255&v},readUint:(y,_)=>16777216*y[_]+(y[_+1]<<16|y[_+2]<<8|y[_+3]),writeUint(y,_,v){y[_]=v>>24&255,y[_+1]=v>>16&255,y[_+2]=v>>8&255,y[_+3]=255&v},readASCII(y,_,v){let A="";for(let C=0;C<v;C++)A+=String.fromCharCode(y[_+C]);return A},writeASCII(y,_,v){for(let A=0;A<v.length;A++)y[_+A]=v.charCodeAt(A)},readBytes(y,_,v){const A=[];for(let C=0;C<v;C++)A.push(y[_+C]);return A},pad:y=>y.length<2?`0${y}`:y,readUTF8(y,_,v){let A,C="";for(let V=0;V<v;V++)C+=`%${i.pad(y[_+V].toString(16))}`;try{A=decodeURIComponent(C)}catch{return i.readASCII(y,_,v)}return A}};function e(y,_,v,A){const C=_*v,V=l(A),j=Math.ceil(_*V/8),B=new Uint8Array(4*C),H=new Uint32Array(B.buffer),{ctype:F}=A,{depth:q}=A,$=i.readUshort;if(F==6){const Z=C<<2;if(q==8)for(var z=0;z<Z;z+=4)B[z]=y[z],B[z+1]=y[z+1],B[z+2]=y[z+2],B[z+3]=y[z+3];if(q==16)for(z=0;z<Z;z++)B[z]=y[z<<1]}else if(F==2){const Z=A.tabs.tRNS;if(Z==null){if(q==8)for(z=0;z<C;z++){var M=3*z;H[z]=255<<24|y[M+2]<<16|y[M+1]<<8|y[M]}if(q==16)for(z=0;z<C;z++)M=6*z,H[z]=255<<24|y[M+4]<<16|y[M+2]<<8|y[M]}else{var w=Z[0];const U=Z[1],Q=Z[2];if(q==8)for(z=0;z<C;z++){var b=z<<2;M=3*z,H[z]=255<<24|y[M+2]<<16|y[M+1]<<8|y[M],y[M]==w&&y[M+1]==U&&y[M+2]==Q&&(B[b+3]=0)}if(q==16)for(z=0;z<C;z++)b=z<<2,M=6*z,H[z]=255<<24|y[M+4]<<16|y[M+2]<<8|y[M],$(y,M)==w&&$(y,M+2)==U&&$(y,M+4)==Q&&(B[b+3]=0)}}else if(F==3){const Z=A.tabs.PLTE,U=A.tabs.tRNS,Q=U?U.length:0;if(q==1)for(var I=0;I<v;I++){var D=I*j,k=I*_;for(z=0;z<_;z++){b=k+z<<2;var x=3*(Y=y[D+(z>>3)]>>7-((7&z)<<0)&1);B[b]=Z[x],B[b+1]=Z[x+1],B[b+2]=Z[x+2],B[b+3]=Y<Q?U[Y]:255}}if(q==2)for(I=0;I<v;I++)for(D=I*j,k=I*_,z=0;z<_;z++)b=k+z<<2,x=3*(Y=y[D+(z>>2)]>>6-((3&z)<<1)&3),B[b]=Z[x],B[b+1]=Z[x+1],B[b+2]=Z[x+2],B[b+3]=Y<Q?U[Y]:255;if(q==4)for(I=0;I<v;I++)for(D=I*j,k=I*_,z=0;z<_;z++)b=k+z<<2,x=3*(Y=y[D+(z>>1)]>>4-((1&z)<<2)&15),B[b]=Z[x],B[b+1]=Z[x+1],B[b+2]=Z[x+2],B[b+3]=Y<Q?U[Y]:255;if(q==8)for(z=0;z<C;z++){var Y;b=z<<2,x=3*(Y=y[z]),B[b]=Z[x],B[b+1]=Z[x+1],B[b+2]=Z[x+2],B[b+3]=Y<Q?U[Y]:255}}else if(F==4){if(q==8)for(z=0;z<C;z++){b=z<<2;var ne=y[N=z<<1];B[b]=ne,B[b+1]=ne,B[b+2]=ne,B[b+3]=y[N+1]}if(q==16)for(z=0;z<C;z++){var N;b=z<<2,ne=y[N=z<<2],B[b]=ne,B[b+1]=ne,B[b+2]=ne,B[b+3]=y[N+2]}}else if(F==0)for(w=A.tabs.tRNS?A.tabs.tRNS:-1,I=0;I<v;I++){const Z=I*j,U=I*_;if(q==1)for(var O=0;O<_;O++){var ie=(ne=255*(y[Z+(O>>>3)]>>>7-(7&O)&1))==255*w?0:255;H[U+O]=ie<<24|ne<<16|ne<<8|ne}else if(q==2)for(O=0;O<_;O++)ie=(ne=85*(y[Z+(O>>>2)]>>>6-((3&O)<<1)&3))==85*w?0:255,H[U+O]=ie<<24|ne<<16|ne<<8|ne;else if(q==4)for(O=0;O<_;O++)ie=(ne=17*(y[Z+(O>>>1)]>>>4-((1&O)<<2)&15))==17*w?0:255,H[U+O]=ie<<24|ne<<16|ne<<8|ne;else if(q==8)for(O=0;O<_;O++)ie=(ne=y[Z+O])==w?0:255,H[U+O]=ie<<24|ne<<16|ne<<8|ne;else if(q==16)for(O=0;O<_;O++)ne=y[Z+(O<<1)],ie=$(y,Z+(O<<1))==w?0:255,H[U+O]=ie<<24|ne<<16|ne<<8|ne}return B}function t(y,_,v,A){const C=l(y),V=Math.ceil(v*C/8),j=new Uint8Array((V+1+y.interlace)*A);return _=y.tabs.CgBI?a(_,j):s(_,j),y.interlace==0?_=c(_,y,0,v,A):y.interlace==1&&(_=function(H,F){const q=F.width,$=F.height,z=l(F),M=z>>3,w=Math.ceil(q*z/8),b=new Uint8Array($*w);let I=0;const D=[0,0,4,0,2,0,1],k=[0,4,0,2,0,1,0],x=[8,8,8,4,4,2,2],Y=[8,8,4,4,2,2,1];let ne=0;for(;ne<7;){const O=x[ne],ie=Y[ne];let Z=0,U=0,Q=D[ne];for(;Q<$;)Q+=O,U++;let J=k[ne];for(;J<q;)J+=ie,Z++;const te=Math.ceil(Z*z/8);c(H,F,I,Z,U);let oe=0,K=D[ne];for(;K<$;){let de=k[ne],Te=I+oe*te<<3;for(;de<q;){var N;if(z==1&&(N=(N=H[Te>>3])>>7-(7&Te)&1,b[K*w+(de>>3)]|=N<<7-((7&de)<<0)),z==2&&(N=(N=H[Te>>3])>>6-(7&Te)&3,b[K*w+(de>>2)]|=N<<6-((3&de)<<1)),z==4&&(N=(N=H[Te>>3])>>4-(7&Te)&15,b[K*w+(de>>1)]|=N<<4-((1&de)<<2)),z>=8){const be=K*w+de*M;for(let Re=0;Re<M;Re++)b[be+Re]=H[(Te>>3)+Re]}Te+=z,de+=ie}oe++,K+=O}Z*U!=0&&(I+=U*(1+te)),ne+=1}return b}(_,y)),_}function s(y,_){return a(new Uint8Array(y.buffer,2,y.length-6),_)}var a=function(){const y={H:{}};return y.H.N=function(_,v){const A=Uint8Array;let C,V,j=0,B=0,H=0,F=0,q=0,$=0,z=0,M=0,w=0;if(_[0]==3&&_[1]==0)return v||new A(0);const b=y.H,I=b.b,D=b.e,k=b.R,x=b.n,Y=b.A,ne=b.Z,N=b.m,O=v==null;for(O&&(v=new A(_.length>>>2<<5));j==0;)if(j=I(_,w,1),B=I(_,w+1,2),w+=3,B!=0){if(O&&(v=y.H.W(v,M+(1<<17))),B==1&&(C=N.J,V=N.h,$=511,z=31),B==2){H=D(_,w,5)+257,F=D(_,w+5,5)+1,q=D(_,w+10,4)+4,w+=14;let Z=1;for(var ie=0;ie<38;ie+=2)N.Q[ie]=0,N.Q[ie+1]=0;for(ie=0;ie<q;ie++){const J=D(_,w+3*ie,3);N.Q[1+(N.X[ie]<<1)]=J,J>Z&&(Z=J)}w+=3*q,x(N.Q,Z),Y(N.Q,Z,N.u),C=N.w,V=N.d,w=k(N.u,(1<<Z)-1,H+F,_,w,N.v);const U=b.V(N.v,0,H,N.C);$=(1<<U)-1;const Q=b.V(N.v,H,F,N.D);z=(1<<Q)-1,x(N.C,U),Y(N.C,U,C),x(N.D,Q),Y(N.D,Q,V)}for(;;){const Z=C[ne(_,w)&$];w+=15&Z;const U=Z>>>4;if(!(U>>>8))v[M++]=U;else{if(U==256)break;{let Q=M+U-254;if(U>264){const de=N.q[U-257];Q=M+(de>>>3)+D(_,w,7&de),w+=7&de}const J=V[ne(_,w)&z];w+=15&J;const te=J>>>4,oe=N.c[te],K=(oe>>>4)+I(_,w,15&oe);for(w+=15&oe;M<Q;)v[M]=v[M++-K],v[M]=v[M++-K],v[M]=v[M++-K],v[M]=v[M++-K];M=Q}}}}else{(7&w)!=0&&(w+=8-(7&w));const Z=4+(w>>>3),U=_[Z-4]|_[Z-3]<<8;O&&(v=y.H.W(v,M+U)),v.set(new A(_.buffer,_.byteOffset+Z,U),M),w=Z+U<<3,M+=U}return v.length==M?v:v.slice(0,M)},y.H.W=function(_,v){const A=_.length;if(v<=A)return _;const C=new Uint8Array(A<<1);return C.set(_,0),C},y.H.R=function(_,v,A,C,V,j){const B=y.H.e,H=y.H.Z;let F=0;for(;F<A;){const q=_[H(C,V)&v];V+=15&q;const $=q>>>4;if($<=15)j[F]=$,F++;else{let z=0,M=0;$==16?(M=3+B(C,V,2),V+=2,z=j[F-1]):$==17?(M=3+B(C,V,3),V+=3):$==18&&(M=11+B(C,V,7),V+=7);const w=F+M;for(;F<w;)j[F]=z,F++}}return V},y.H.V=function(_,v,A,C){let V=0,j=0;const B=C.length>>>1;for(;j<A;){const H=_[j+v];C[j<<1]=0,C[1+(j<<1)]=H,H>V&&(V=H),j++}for(;j<B;)C[j<<1]=0,C[1+(j<<1)]=0,j++;return V},y.H.n=function(_,v){const A=y.H.m,C=_.length;let V,j,B,H;const F=A.j;for(var q=0;q<=v;q++)F[q]=0;for(q=1;q<C;q+=2)F[_[q]]++;const $=A.K;for(V=0,F[0]=0,j=1;j<=v;j++)V=V+F[j-1]<<1,$[j]=V;for(B=0;B<C;B+=2)H=_[B+1],H!=0&&(_[B]=$[H],$[H]++)},y.H.A=function(_,v,A){const C=_.length,V=y.H.m.r;for(let j=0;j<C;j+=2)if(_[j+1]!=0){const B=j>>1,H=_[j+1],F=B<<4|H,q=v-H;let $=_[j]<<q;const z=$+(1<<q);for(;$!=z;)A[V[$]>>>15-v]=F,$++}},y.H.l=function(_,v){const A=y.H.m.r,C=15-v;for(let V=0;V<_.length;V+=2){const j=_[V]<<v-_[V+1];_[V]=A[j]>>>C}},y.H.M=function(_,v,A){A<<=7&v;const C=v>>>3;_[C]|=A,_[C+1]|=A>>>8},y.H.I=function(_,v,A){A<<=7&v;const C=v>>>3;_[C]|=A,_[C+1]|=A>>>8,_[C+2]|=A>>>16},y.H.e=function(_,v,A){return(_[v>>>3]|_[1+(v>>>3)]<<8)>>>(7&v)&(1<<A)-1},y.H.b=function(_,v,A){return(_[v>>>3]|_[1+(v>>>3)]<<8|_[2+(v>>>3)]<<16)>>>(7&v)&(1<<A)-1},y.H.Z=function(_,v){return(_[v>>>3]|_[1+(v>>>3)]<<8|_[2+(v>>>3)]<<16)>>>(7&v)},y.H.i=function(_,v){return(_[v>>>3]|_[1+(v>>>3)]<<8|_[2+(v>>>3)]<<16|_[3+(v>>>3)]<<24)>>>(7&v)},y.H.m=function(){const _=Uint16Array,v=Uint32Array;return{K:new _(16),j:new _(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new _(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new _(512),_:[],h:new _(32),$:[],w:new _(32768),C:[],v:[],d:new _(32768),D:[],u:new _(512),Q:[],r:new _(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new _(65536),g:new _(32768)}}(),function(){const _=y.H.m;for(var v=0;v<32768;v++){let C=v;C=(2863311530&C)>>>1|(1431655765&C)<<1,C=(3435973836&C)>>>2|(858993459&C)<<2,C=(4042322160&C)>>>4|(252645135&C)<<4,C=(4278255360&C)>>>8|(16711935&C)<<8,_.r[v]=(C>>>16|C<<16)>>>17}function A(C,V,j){for(;V--!=0;)C.push(0,j)}for(v=0;v<32;v++)_.q[v]=_.S[v]<<3|_.T[v],_.c[v]=_.p[v]<<4|_.z[v];A(_._,144,8),A(_._,112,9),A(_._,24,7),A(_._,8,8),y.H.n(_._,9),y.H.A(_._,9,_.J),y.H.l(_._,9),A(_.$,32,5),y.H.n(_.$,5),y.H.A(_.$,5,_.h),y.H.l(_.$,5),A(_.Q,19,0),A(_.C,286,0),A(_.D,30,0),A(_.v,320,0)}(),y.H.N}();function l(y){return[1,null,3,1,2,null,4][y.ctype]*y.depth}function c(y,_,v,A,C){let V=l(_);const j=Math.ceil(A*V/8);let B,H;V=Math.ceil(V/8);let F=y[v],q=0;if(F>1&&(y[v]=[0,0,1][F-2]),F==3)for(q=V;q<j;q++)y[q+1]=y[q+1]+(y[q+1-V]>>>1)&255;for(let $=0;$<C;$++)if(B=v+$*j,H=B+$+1,F=y[H-1],q=0,F==0)for(;q<j;q++)y[B+q]=y[H+q];else if(F==1){for(;q<V;q++)y[B+q]=y[H+q];for(;q<j;q++)y[B+q]=y[H+q]+y[B+q-V]}else if(F==2)for(;q<j;q++)y[B+q]=y[H+q]+y[B+q-j];else if(F==3){for(;q<V;q++)y[B+q]=y[H+q]+(y[B+q-j]>>>1);for(;q<j;q++)y[B+q]=y[H+q]+(y[B+q-j]+y[B+q-V]>>>1)}else{for(;q<V;q++)y[B+q]=y[H+q]+f(0,y[B+q-j],0);for(;q<j;q++)y[B+q]=y[H+q]+f(y[B+q-V],y[B+q-j],y[B+q-V-j])}return y}function f(y,_,v){const A=y+_-v,C=A-y,V=A-_,j=A-v;return C*C<=V*V&&C*C<=j*j?y:V*V<=j*j?_:v}function m(y,_,v){v.width=i.readUint(y,_),_+=4,v.height=i.readUint(y,_),_+=4,v.depth=y[_],_++,v.ctype=y[_],_++,v.compress=y[_],_++,v.filter=y[_],_++,v.interlace=y[_],_++}function p(y,_,v,A,C,V,j,B,H){const F=Math.min(_,C),q=Math.min(v,V);let $=0,z=0;for(let ne=0;ne<q;ne++)for(let N=0;N<F;N++)if(j>=0&&B>=0?($=ne*_+N<<2,z=(B+ne)*C+j+N<<2):($=(-B+ne)*_-j+N<<2,z=ne*C+N<<2),H==0)A[z]=y[$],A[z+1]=y[$+1],A[z+2]=y[$+2],A[z+3]=y[$+3];else if(H==1){var M=y[$+3]*.00392156862745098,w=y[$]*M,b=y[$+1]*M,I=y[$+2]*M,D=A[z+3]*(1/255),k=A[z]*D,x=A[z+1]*D,Y=A[z+2]*D;const O=1-M,ie=M+D*O,Z=ie==0?0:1/ie;A[z+3]=255*ie,A[z+0]=(w+k*O)*Z,A[z+1]=(b+x*O)*Z,A[z+2]=(I+Y*O)*Z}else if(H==2)M=y[$+3],w=y[$],b=y[$+1],I=y[$+2],D=A[z+3],k=A[z],x=A[z+1],Y=A[z+2],M==D&&w==k&&b==x&&I==Y?(A[z]=0,A[z+1]=0,A[z+2]=0,A[z+3]=0):(A[z]=w,A[z+1]=b,A[z+2]=I,A[z+3]=M);else if(H==3){if(M=y[$+3],w=y[$],b=y[$+1],I=y[$+2],D=A[z+3],k=A[z],x=A[z+1],Y=A[z+2],M==D&&w==k&&b==x&&I==Y)continue;if(M<220&&D>20)return!1}return!0}return{decode:function(_){const v=new Uint8Array(_);let A=8;const C=i,V=C.readUshort,j=C.readUint,B={tabs:{},frames:[]},H=new Uint8Array(v.length);let F,q=0,$=0;const z=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(v[M]!=z[M])throw"The input is not a PNG file!";for(;A<v.length;){const ne=C.readUint(v,A);A+=4;const N=C.readASCII(v,A,4);if(A+=4,N=="IHDR")m(v,A,B);else if(N=="iCCP"){for(var w=A;v[w]!=0;)w++;C.readASCII(v,A,w-A),v[w+1];const O=v.slice(w+2,A+ne);let ie=null;try{ie=s(O)}catch{ie=a(O)}B.tabs[N]=ie}else if(N=="CgBI")B.tabs[N]=v.slice(A,A+4);else if(N=="IDAT"){for(M=0;M<ne;M++)H[q+M]=v[A+M];q+=ne}else if(N=="acTL")B.tabs[N]={num_frames:j(v,A),num_plays:j(v,A+4)},F=new Uint8Array(v.length);else if(N=="fcTL"){$!=0&&((Y=B.frames[B.frames.length-1]).data=t(B,F.slice(0,$),Y.rect.width,Y.rect.height),$=0);const O={x:j(v,A+12),y:j(v,A+16),width:j(v,A+4),height:j(v,A+8)};let ie=V(v,A+22);ie=V(v,A+20)/(ie==0?100:ie);const Z={rect:O,delay:Math.round(1e3*ie),dispose:v[A+24],blend:v[A+25]};B.frames.push(Z)}else if(N=="fdAT"){for(M=0;M<ne-4;M++)F[$+M]=v[A+M+4];$+=ne-4}else if(N=="pHYs")B.tabs[N]=[C.readUint(v,A),C.readUint(v,A+4),v[A+8]];else if(N=="cHRM")for(B.tabs[N]=[],M=0;M<8;M++)B.tabs[N].push(C.readUint(v,A+4*M));else if(N=="tEXt"||N=="zTXt"){B.tabs[N]==null&&(B.tabs[N]={});var b=C.nextZero(v,A),I=C.readASCII(v,A,b-A),D=A+ne-b-1;if(N=="tEXt")x=C.readASCII(v,b+1,D);else{var k=s(v.slice(b+2,b+2+D));x=C.readUTF8(k,0,k.length)}B.tabs[N][I]=x}else if(N=="iTXt"){B.tabs[N]==null&&(B.tabs[N]={}),b=0,w=A,b=C.nextZero(v,w),I=C.readASCII(v,w,b-w);const O=v[w=b+1];var x;v[w+1],w+=2,b=C.nextZero(v,w),C.readASCII(v,w,b-w),w=b+1,b=C.nextZero(v,w),C.readUTF8(v,w,b-w),D=ne-((w=b+1)-A),O==0?x=C.readUTF8(v,w,D):(k=s(v.slice(w,w+D)),x=C.readUTF8(k,0,k.length)),B.tabs[N][I]=x}else if(N=="PLTE")B.tabs[N]=C.readBytes(v,A,ne);else if(N=="hIST"){const O=B.tabs.PLTE.length/3;for(B.tabs[N]=[],M=0;M<O;M++)B.tabs[N].push(V(v,A+2*M))}else if(N=="tRNS")B.ctype==3?B.tabs[N]=C.readBytes(v,A,ne):B.ctype==0?B.tabs[N]=V(v,A):B.ctype==2&&(B.tabs[N]=[V(v,A),V(v,A+2),V(v,A+4)]);else if(N=="gAMA")B.tabs[N]=C.readUint(v,A)/1e5;else if(N=="sRGB")B.tabs[N]=v[A];else if(N=="bKGD")B.ctype==0||B.ctype==4?B.tabs[N]=[V(v,A)]:B.ctype==2||B.ctype==6?B.tabs[N]=[V(v,A),V(v,A+2),V(v,A+4)]:B.ctype==3&&(B.tabs[N]=v[A]);else if(N=="IEND")break;A+=ne,C.readUint(v,A),A+=4}var Y;return $!=0&&((Y=B.frames[B.frames.length-1]).data=t(B,F.slice(0,$),Y.rect.width,Y.rect.height)),B.data=t(B,H,B.width,B.height),delete B.compress,delete B.interlace,delete B.filter,B},toRGBA8:function(_){const v=_.width,A=_.height;if(_.tabs.acTL==null)return[e(_.data,v,A,_).buffer];const C=[];_.frames[0].data==null&&(_.frames[0].data=_.data);const V=v*A*4,j=new Uint8Array(V),B=new Uint8Array(V),H=new Uint8Array(V);for(let q=0;q<_.frames.length;q++){const $=_.frames[q],z=$.rect.x,M=$.rect.y,w=$.rect.width,b=$.rect.height,I=e($.data,w,b,_);if(q!=0)for(var F=0;F<V;F++)H[F]=j[F];if($.blend==0?p(I,w,b,j,v,A,z,M,0):$.blend==1&&p(I,w,b,j,v,A,z,M,1),C.push(j.buffer.slice(0)),$.dispose!=0){if($.dispose==1)p(B,w,b,j,v,A,z,M,0);else if($.dispose==2)for(F=0;F<V;F++)j[F]=H[F]}}return C},_paeth:f,_copyTile:p,_bin:i}}();(function(){const{_copyTile:i}=Ni,{_bin:e}=Ni,t=Ni._paeth;var s={table:function(){const w=new Uint32Array(256);for(let b=0;b<256;b++){let I=b;for(let D=0;D<8;D++)1&I?I=3988292384^I>>>1:I>>>=1;w[b]=I}return w}(),update(w,b,I,D){for(let k=0;k<D;k++)w=s.table[255&(w^b[I+k])]^w>>>8;return w},crc:(w,b,I)=>4294967295^s.update(4294967295,w,b,I)};function a(w,b,I,D){b[I]+=w[0]*D>>4,b[I+1]+=w[1]*D>>4,b[I+2]+=w[2]*D>>4,b[I+3]+=w[3]*D>>4}function l(w){return Math.max(0,Math.min(255,w))}function c(w,b){const I=w[0]-b[0],D=w[1]-b[1],k=w[2]-b[2],x=w[3]-b[3];return I*I+D*D+k*k+x*x}function f(w,b,I,D,k,x,Y){Y==null&&(Y=1);const ne=D.length,N=[];for(var O=0;O<ne;O++){const K=D[O];N.push([K>>>0&255,K>>>8&255,K>>>16&255,K>>>24&255])}for(O=0;O<ne;O++){let K=4294967295;for(var ie=0,Z=0;Z<ne;Z++){var U=c(N[O],N[Z]);Z!=O&&U<K&&(K=U,ie=Z)}}const Q=new Uint32Array(k.buffer),J=new Int16Array(b*I*4),te=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(O=0;O<te.length;O++)te[O]=255*((te[O]+.5)/16-.5);for(let K=0;K<I;K++)for(let de=0;de<b;de++){var oe;O=4*(K*b+de),Y!=2?oe=[l(w[O]+J[O]),l(w[O+1]+J[O+1]),l(w[O+2]+J[O+2]),l(w[O+3]+J[O+3])]:(U=te[4*(3&K)+(3&de)],oe=[l(w[O]+U),l(w[O+1]+U),l(w[O+2]+U),l(w[O+3]+U)]),ie=0;let Te=16777215;for(Z=0;Z<ne;Z++){const ze=c(oe,N[Z]);ze<Te&&(Te=ze,ie=Z)}const be=N[ie],Re=[oe[0]-be[0],oe[1]-be[1],oe[2]-be[2],oe[3]-be[3]];Y==1&&(de!=b-1&&a(Re,J,O+4,7),K!=I-1&&(de!=0&&a(Re,J,O+4*b-4,3),a(Re,J,O+4*b,5),de!=b-1&&a(Re,J,O+4*b+4,1))),x[O>>2]=ie,Q[O>>2]=D[ie]}}function m(w,b,I,D,k){k==null&&(k={});const{crc:x}=s,Y=e.writeUint,ne=e.writeUshort,N=e.writeASCII;let O=8;const ie=w.frames.length>1;let Z,U=!1,Q=33+(ie?20:0);if(k.sRGB!=null&&(Q+=13),k.pHYs!=null&&(Q+=21),k.iCCP!=null&&(Z=pako.deflate(k.iCCP),Q+=21+Z.length+4),w.ctype==3){for(var J=w.plte.length,te=0;te<J;te++)w.plte[te]>>>24!=255&&(U=!0);Q+=8+3*J+4+(U?8+1*J+4:0)}for(var oe=0;oe<w.frames.length;oe++)ie&&(Q+=38),Q+=(be=w.frames[oe]).cimg.length+12,oe!=0&&(Q+=4);Q+=12;const K=new Uint8Array(Q),de=[137,80,78,71,13,10,26,10];for(te=0;te<8;te++)K[te]=de[te];if(Y(K,O,13),O+=4,N(K,O,"IHDR"),O+=4,Y(K,O,b),O+=4,Y(K,O,I),O+=4,K[O]=w.depth,O++,K[O]=w.ctype,O++,K[O]=0,O++,K[O]=0,O++,K[O]=0,O++,Y(K,O,x(K,O-17,17)),O+=4,k.sRGB!=null&&(Y(K,O,1),O+=4,N(K,O,"sRGB"),O+=4,K[O]=k.sRGB,O++,Y(K,O,x(K,O-5,5)),O+=4),k.iCCP!=null){const Re=13+Z.length;Y(K,O,Re),O+=4,N(K,O,"iCCP"),O+=4,N(K,O,"ICC profile"),O+=11,O+=2,K.set(Z,O),O+=Z.length,Y(K,O,x(K,O-(Re+4),Re+4)),O+=4}if(k.pHYs!=null&&(Y(K,O,9),O+=4,N(K,O,"pHYs"),O+=4,Y(K,O,k.pHYs[0]),O+=4,Y(K,O,k.pHYs[1]),O+=4,K[O]=k.pHYs[2],O++,Y(K,O,x(K,O-13,13)),O+=4),ie&&(Y(K,O,8),O+=4,N(K,O,"acTL"),O+=4,Y(K,O,w.frames.length),O+=4,Y(K,O,k.loop!=null?k.loop:0),O+=4,Y(K,O,x(K,O-12,12)),O+=4),w.ctype==3){for(Y(K,O,3*(J=w.plte.length)),O+=4,N(K,O,"PLTE"),O+=4,te=0;te<J;te++){const Re=3*te,ze=w.plte[te],Le=255&ze,rt=ze>>>8&255,en=ze>>>16&255;K[O+Re+0]=Le,K[O+Re+1]=rt,K[O+Re+2]=en}if(O+=3*J,Y(K,O,x(K,O-3*J-4,3*J+4)),O+=4,U){for(Y(K,O,J),O+=4,N(K,O,"tRNS"),O+=4,te=0;te<J;te++)K[O+te]=w.plte[te]>>>24&255;O+=J,Y(K,O,x(K,O-J-4,J+4)),O+=4}}let Te=0;for(oe=0;oe<w.frames.length;oe++){var be=w.frames[oe];ie&&(Y(K,O,26),O+=4,N(K,O,"fcTL"),O+=4,Y(K,O,Te++),O+=4,Y(K,O,be.rect.width),O+=4,Y(K,O,be.rect.height),O+=4,Y(K,O,be.rect.x),O+=4,Y(K,O,be.rect.y),O+=4,ne(K,O,D[oe]),O+=2,ne(K,O,1e3),O+=2,K[O]=be.dispose,O++,K[O]=be.blend,O++,Y(K,O,x(K,O-30,30)),O+=4);const Re=be.cimg;Y(K,O,(J=Re.length)+(oe==0?0:4)),O+=4;const ze=O;N(K,O,oe==0?"IDAT":"fdAT"),O+=4,oe!=0&&(Y(K,O,Te++),O+=4),K.set(Re,O),O+=J,Y(K,O,x(K,ze,O-ze)),O+=4}return Y(K,O,0),O+=4,N(K,O,"IEND"),O+=4,Y(K,O,x(K,O-4,4)),O+=4,K.buffer}function p(w,b,I){for(let D=0;D<w.frames.length;D++){const k=w.frames[D];k.rect.width;const x=k.rect.height,Y=new Uint8Array(x*k.bpl+x);k.cimg=A(k.img,x,k.bpp,k.bpl,Y,b,I)}}function y(w,b,I,D,k){const x=k[0],Y=k[1],ne=k[2],N=k[3],O=k[4],ie=k[5];let Z=6,U=8,Q=255;for(var J=0;J<w.length;J++){const Pt=new Uint8Array(w[J]);for(var te=Pt.length,oe=0;oe<te;oe+=4)Q&=Pt[oe+3]}const K=Q!=255,de=function(Ue,ut,Tt,Ct,Ze,tn){const ht=[];for(var st=0;st<Ue.length;st++){const Dt=new Uint8Array(Ue[st]),Vt=new Uint32Array(Dt.buffer);var Qt;let Ut=0,nn=0,he=ut,Me=Tt,Ge=Ct?1:0;if(st!=0){const Fe=tn||Ct||st==1||ht[st-2].dispose!=0?1:2;let Ye=0,Pe=1e9;for(let dt=0;dt<Fe;dt++){var Ke=new Uint8Array(Ue[st-1-dt]);const hn=new Uint32Array(Ue[st-1-dt]);let Ot=ut,Gn=Tt,_n=-1,bi=-1;for(let $n=0;$n<Tt;$n++)for(let Dn=0;Dn<ut;Dn++)Vt[at=$n*ut+Dn]!=hn[at]&&(Dn<Ot&&(Ot=Dn),Dn>_n&&(_n=Dn),$n<Gn&&(Gn=$n),$n>bi&&(bi=$n));_n==-1&&(Ot=Gn=_n=bi=0),Ze&&((1&Ot)==1&&Ot--,(1&Gn)==1&&Gn--);const Ai=(_n-Ot+1)*(bi-Gn+1);Ai<Pe&&(Pe=Ai,Ye=dt,Ut=Ot,nn=Gn,he=_n-Ot+1,Me=bi-Gn+1)}Ke=new Uint8Array(Ue[st-1-Ye]),Ye==1&&(ht[st-1].dispose=2),Qt=new Uint8Array(he*Me*4),i(Ke,ut,Tt,Qt,he,Me,-Ut,-nn,0),Ge=i(Dt,ut,Tt,Qt,he,Me,-Ut,-nn,3)?1:0,Ge==1?v(Dt,ut,Tt,Qt,{x:Ut,y:nn,width:he,height:Me}):i(Dt,ut,Tt,Qt,he,Me,-Ut,-nn,0)}else Qt=Dt.slice(0);ht.push({rect:{x:Ut,y:nn,width:he,height:Me},img:Qt,blend:Ge,dispose:0})}if(Ct)for(st=0;st<ht.length;st++){if((St=ht[st]).blend==1)continue;const Dt=St.rect,Vt=ht[st-1].rect,Ut=Math.min(Dt.x,Vt.x),nn=Math.min(Dt.y,Vt.y),he={x:Ut,y:nn,width:Math.max(Dt.x+Dt.width,Vt.x+Vt.width)-Ut,height:Math.max(Dt.y+Dt.height,Vt.y+Vt.height)-nn};ht[st-1].dispose=1,st-1!=0&&_(Ue,ut,Tt,ht,st-1,he,Ze),_(Ue,ut,Tt,ht,st,he,Ze)}let qe=0;if(Ue.length!=1)for(var at=0;at<ht.length;at++){var St;qe+=(St=ht[at]).rect.width*St.rect.height}return ht}(w,b,I,x,Y,ne),Te={},be=[],Re=[];if(D!=0){const Pt=[];for(oe=0;oe<de.length;oe++)Pt.push(de[oe].img.buffer);const Ue=function(Ze){let tn=0;for(var ht=0;ht<Ze.length;ht++)tn+=Ze[ht].byteLength;const st=new Uint8Array(tn);let Qt=0;for(ht=0;ht<Ze.length;ht++){const Ke=new Uint8Array(Ze[ht]),qe=Ke.length;for(let at=0;at<qe;at+=4){let St=Ke[at],Dt=Ke[at+1],Vt=Ke[at+2];const Ut=Ke[at+3];Ut==0&&(St=Dt=Vt=0),st[Qt+at]=St,st[Qt+at+1]=Dt,st[Qt+at+2]=Vt,st[Qt+at+3]=Ut}Qt+=qe}return st.buffer}(Pt),ut=V(Ue,D);for(oe=0;oe<ut.plte.length;oe++)be.push(ut.plte[oe].est.rgba);let Tt=0;for(oe=0;oe<de.length;oe++){const Ct=(Le=de[oe]).img.length;var ze=new Uint8Array(ut.inds.buffer,Tt>>2,Ct>>2);Re.push(ze);const Ze=new Uint8Array(ut.abuf,Tt,Ct);ie&&f(Le.img,Le.rect.width,Le.rect.height,be,Ze,ze),Le.img.set(Ze),Tt+=Ct}}else for(J=0;J<de.length;J++){var Le=de[J];const Pt=new Uint32Array(Le.img.buffer);var rt=Le.rect.width;for(te=Pt.length,ze=new Uint8Array(te),Re.push(ze),oe=0;oe<te;oe++){const Ue=Pt[oe];if(oe!=0&&Ue==Pt[oe-1])ze[oe]=ze[oe-1];else if(oe>rt&&Ue==Pt[oe-rt])ze[oe]=ze[oe-rt];else{let ut=Te[Ue];if(ut==null&&(Te[Ue]=ut=be.length,be.push(Ue),be.length>=300))break;ze[oe]=ut}}}const en=be.length;for(en<=256&&O==0&&(U=en<=2?1:en<=4?2:en<=16?4:8,U=Math.max(U,N)),J=0;J<de.length;J++){(Le=de[J]).rect.x,Le.rect.y,rt=Le.rect.width;const Pt=Le.rect.height;let Ue=Le.img;new Uint32Array(Ue.buffer);let ut=4*rt,Tt=4;if(en<=256&&O==0){ut=Math.ceil(U*rt/8);var qt=new Uint8Array(ut*Pt);const Ct=Re[J];for(let Ze=0;Ze<Pt;Ze++){oe=Ze*ut;const tn=Ze*rt;if(U==8)for(var ot=0;ot<rt;ot++)qt[oe+ot]=Ct[tn+ot];else if(U==4)for(ot=0;ot<rt;ot++)qt[oe+(ot>>1)]|=Ct[tn+ot]<<4-4*(1&ot);else if(U==2)for(ot=0;ot<rt;ot++)qt[oe+(ot>>2)]|=Ct[tn+ot]<<6-2*(3&ot);else if(U==1)for(ot=0;ot<rt;ot++)qt[oe+(ot>>3)]|=Ct[tn+ot]<<7-1*(7&ot)}Ue=qt,Z=3,Tt=1}else if(K==0&&de.length==1){qt=new Uint8Array(rt*Pt*3);const Ct=rt*Pt;for(oe=0;oe<Ct;oe++){const Ze=3*oe,tn=4*oe;qt[Ze]=Ue[tn],qt[Ze+1]=Ue[tn+1],qt[Ze+2]=Ue[tn+2]}Ue=qt,Z=2,Tt=3,ut=3*rt}Le.img=Ue,Le.bpl=ut,Le.bpp=Tt}return{ctype:Z,depth:U,plte:be,frames:de}}function _(w,b,I,D,k,x,Y){const ne=Uint8Array,N=Uint32Array,O=new ne(w[k-1]),ie=new N(w[k-1]),Z=k+1<w.length?new ne(w[k+1]):null,U=new ne(w[k]),Q=new N(U.buffer);let J=b,te=I,oe=-1,K=-1;for(let Te=0;Te<x.height;Te++)for(let be=0;be<x.width;be++){const Re=x.x+be,ze=x.y+Te,Le=ze*b+Re,rt=Q[Le];rt==0||D[k-1].dispose==0&&ie[Le]==rt&&(Z==null||Z[4*Le+3]!=0)||(Re<J&&(J=Re),Re>oe&&(oe=Re),ze<te&&(te=ze),ze>K&&(K=ze))}oe==-1&&(J=te=oe=K=0),Y&&((1&J)==1&&J--,(1&te)==1&&te--),x={x:J,y:te,width:oe-J+1,height:K-te+1};const de=D[k];de.rect=x,de.blend=1,de.img=new Uint8Array(x.width*x.height*4),D[k-1].dispose==0?(i(O,b,I,de.img,x.width,x.height,-x.x,-x.y,0),v(U,b,I,de.img,x)):i(U,b,I,de.img,x.width,x.height,-x.x,-x.y,0)}function v(w,b,I,D,k){i(w,b,I,D,k.width,k.height,-k.x,-k.y,2)}function A(w,b,I,D,k,x,Y){const ne=[];let N,O=[0,1,2,3,4];x!=-1?O=[x]:(b*D>5e5||I==1)&&(O=[0]),Y&&(N={level:0});const ie=R6;for(var Z=0;Z<O.length;Z++){for(let J=0;J<b;J++)C(k,w,J,D,I,O[Z]);ne.push(ie.deflate(k,N))}let U,Q=1e9;for(Z=0;Z<ne.length;Z++)ne[Z].length<Q&&(U=Z,Q=ne[Z].length);return ne[U]}function C(w,b,I,D,k,x){const Y=I*D;let ne=Y+I;if(w[ne]=x,ne++,x==0)if(D<500)for(var N=0;N<D;N++)w[ne+N]=b[Y+N];else w.set(new Uint8Array(b.buffer,Y,D),ne);else if(x==1){for(N=0;N<k;N++)w[ne+N]=b[Y+N];for(N=k;N<D;N++)w[ne+N]=b[Y+N]-b[Y+N-k]+256&255}else if(I==0){for(N=0;N<k;N++)w[ne+N]=b[Y+N];if(x==2)for(N=k;N<D;N++)w[ne+N]=b[Y+N];if(x==3)for(N=k;N<D;N++)w[ne+N]=b[Y+N]-(b[Y+N-k]>>1)+256&255;if(x==4)for(N=k;N<D;N++)w[ne+N]=b[Y+N]-t(b[Y+N-k],0,0)+256&255}else{if(x==2)for(N=0;N<D;N++)w[ne+N]=b[Y+N]+256-b[Y+N-D]&255;if(x==3){for(N=0;N<k;N++)w[ne+N]=b[Y+N]+256-(b[Y+N-D]>>1)&255;for(N=k;N<D;N++)w[ne+N]=b[Y+N]+256-(b[Y+N-D]+b[Y+N-k]>>1)&255}if(x==4){for(N=0;N<k;N++)w[ne+N]=b[Y+N]+256-t(0,b[Y+N-D],0)&255;for(N=k;N<D;N++)w[ne+N]=b[Y+N]+256-t(b[Y+N-k],b[Y+N-D],b[Y+N-k-D])&255}}}function V(w,b){const I=new Uint8Array(w),D=I.slice(0),k=new Uint32Array(D.buffer),x=j(D,b),Y=x[0],ne=x[1],N=I.length,O=new Uint8Array(N>>2);let ie;if(I.length<2e7)for(var Z=0;Z<N;Z+=4)ie=B(Y,U=I[Z]*(1/255),Q=I[Z+1]*(1/255),J=I[Z+2]*(1/255),te=I[Z+3]*(1/255)),O[Z>>2]=ie.ind,k[Z>>2]=ie.est.rgba;else for(Z=0;Z<N;Z+=4){var U=I[Z]*.00392156862745098,Q=I[Z+1]*(1/255),J=I[Z+2]*(1/255),te=I[Z+3]*(1/255);for(ie=Y;ie.left;)ie=H(ie.est,U,Q,J,te)<=0?ie.left:ie.right;O[Z>>2]=ie.ind,k[Z>>2]=ie.est.rgba}return{abuf:D.buffer,inds:O,plte:ne}}function j(w,b,I){I==null&&(I=1e-4);const D=new Uint32Array(w.buffer),k={i0:0,i1:w.length,bst:null,est:null,tdst:0,left:null,right:null};k.bst=$(w,k.i0,k.i1),k.est=z(k.bst);const x=[k];for(;x.length<b;){let ne=0,N=0;for(var Y=0;Y<x.length;Y++)x[Y].est.L>ne&&(ne=x[Y].est.L,N=Y);if(ne<I)break;const O=x[N],ie=F(w,D,O.i0,O.i1,O.est.e,O.est.eMq255);if(O.i0>=ie||O.i1<=ie){O.est.L=0;continue}const Z={i0:O.i0,i1:ie,bst:null,est:null,tdst:0,left:null,right:null};Z.bst=$(w,Z.i0,Z.i1),Z.est=z(Z.bst);const U={i0:ie,i1:O.i1,bst:null,est:null,tdst:0,left:null,right:null};for(U.bst={R:[],m:[],N:O.bst.N-Z.bst.N},Y=0;Y<16;Y++)U.bst.R[Y]=O.bst.R[Y]-Z.bst.R[Y];for(Y=0;Y<4;Y++)U.bst.m[Y]=O.bst.m[Y]-Z.bst.m[Y];U.est=z(U.bst),O.left=Z,O.right=U,x[N]=Z,x.push(U)}for(x.sort((ne,N)=>N.bst.N-ne.bst.N),Y=0;Y<x.length;Y++)x[Y].ind=Y;return[k,x]}function B(w,b,I,D,k){if(w.left==null)return w.tdst=function(Z,U,Q,J,te){const oe=U-Z[0],K=Q-Z[1],de=J-Z[2],Te=te-Z[3];return oe*oe+K*K+de*de+Te*Te}(w.est.q,b,I,D,k),w;const x=H(w.est,b,I,D,k);let Y=w.left,ne=w.right;x>0&&(Y=w.right,ne=w.left);const N=B(Y,b,I,D,k);if(N.tdst<=x*x)return N;const O=B(ne,b,I,D,k);return O.tdst<N.tdst?O:N}function H(w,b,I,D,k){const{e:x}=w;return x[0]*b+x[1]*I+x[2]*D+x[3]*k-w.eMq}function F(w,b,I,D,k,x){for(D-=4;I<D;){for(;q(w,I,k)<=x;)I+=4;for(;q(w,D,k)>x;)D-=4;if(I>=D)break;const Y=b[I>>2];b[I>>2]=b[D>>2],b[D>>2]=Y,I+=4,D-=4}for(;q(w,I,k)>x;)I-=4;return I+4}function q(w,b,I){return w[b]*I[0]+w[b+1]*I[1]+w[b+2]*I[2]+w[b+3]*I[3]}function $(w,b,I){const D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=[0,0,0,0],x=I-b>>2;for(let Y=b;Y<I;Y+=4){const ne=w[Y]*.00392156862745098,N=w[Y+1]*(1/255),O=w[Y+2]*(1/255),ie=w[Y+3]*(1/255);k[0]+=ne,k[1]+=N,k[2]+=O,k[3]+=ie,D[0]+=ne*ne,D[1]+=ne*N,D[2]+=ne*O,D[3]+=ne*ie,D[5]+=N*N,D[6]+=N*O,D[7]+=N*ie,D[10]+=O*O,D[11]+=O*ie,D[15]+=ie*ie}return D[4]=D[1],D[8]=D[2],D[9]=D[6],D[12]=D[3],D[13]=D[7],D[14]=D[11],{R:D,m:k,N:x}}function z(w){const{R:b}=w,{m:I}=w,{N:D}=w,k=I[0],x=I[1],Y=I[2],ne=I[3],N=D==0?0:1/D,O=[b[0]-k*k*N,b[1]-k*x*N,b[2]-k*Y*N,b[3]-k*ne*N,b[4]-x*k*N,b[5]-x*x*N,b[6]-x*Y*N,b[7]-x*ne*N,b[8]-Y*k*N,b[9]-Y*x*N,b[10]-Y*Y*N,b[11]-Y*ne*N,b[12]-ne*k*N,b[13]-ne*x*N,b[14]-ne*Y*N,b[15]-ne*ne*N],ie=O,Z=M;let U=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,J=0;if(D!=0)for(let oe=0;oe<16&&(U=Z.multVec(ie,U),J=Math.sqrt(Z.dot(U,U)),U=Z.sml(1/J,U),!(oe!=0&&Math.abs(J-Q)<1e-9));oe++)Q=J;const te=[k*N,x*N,Y*N,ne*N];return{Cov:O,q:te,e:U,L:Q,eMq255:Z.dot(Z.sml(255,te),U),eMq:Z.dot(U,te),rgba:(Math.round(255*te[3])<<24|Math.round(255*te[2])<<16|Math.round(255*te[1])<<8|Math.round(255*te[0])<<0)>>>0}}var M={multVec:(w,b)=>[w[0]*b[0]+w[1]*b[1]+w[2]*b[2]+w[3]*b[3],w[4]*b[0]+w[5]*b[1]+w[6]*b[2]+w[7]*b[3],w[8]*b[0]+w[9]*b[1]+w[10]*b[2]+w[11]*b[3],w[12]*b[0]+w[13]*b[1]+w[14]*b[2]+w[15]*b[3]],dot:(w,b)=>w[0]*b[0]+w[1]*b[1]+w[2]*b[2]+w[3]*b[3],sml:(w,b)=>[w*b[0],w*b[1],w*b[2],w*b[3]]};Ni.encode=function(b,I,D,k,x,Y,ne){k==null&&(k=0),ne==null&&(ne=!1);const N=y(b,I,D,k,[!1,!1,!1,0,ne,!1]);return p(N,-1),m(N,I,D,x,Y)},Ni.encodeLL=function(b,I,D,k,x,Y,ne,N){const O={ctype:0+(k==1?0:2)+(x==0?0:4),depth:Y,frames:[]},ie=(k+x)*Y,Z=ie*I;for(let U=0;U<b.length;U++)O.frames.push({rect:{x:0,y:0,width:I,height:D},img:new Uint8Array(b[U]),blend:0,dispose:1,bpp:Math.ceil(ie/8),bpl:Math.ceil(Z/8)});return p(O,0,!0),m(O,I,D,ne,N)},Ni.encode.compress=y,Ni.encode.dither=f,Ni.quantize=V,Ni.quantize.getKDtree=j,Ni.quantize.getNearest=B})();const Tb={toArrayBuffer(i,e){const t=i.width,s=i.height,a=t<<2,l=i.getContext("2d").getImageData(0,0,t,s),c=new Uint32Array(l.data.buffer),f=(32*t+31)/32<<2,m=f*s,p=122+m,y=new ArrayBuffer(p),_=new DataView(y),v=1<<20;let A,C,V,j,B=v,H=0,F=0,q=0;function $(w){_.setUint16(F,w,!0),F+=2}function z(w){_.setUint32(F,w,!0),F+=4}function M(w){F+=w}$(19778),z(p),M(4),z(122),z(108),z(t),z(-s>>>0),$(1),$(32),z(3),z(m),z(2835),z(2835),M(8),z(16711680),z(65280),z(255),z(4278190080),z(1466527264),function w(){for(;H<s&&B>0;){for(j=122+H*f,A=0;A<a;)B--,C=c[q++],V=C>>>24,_.setUint32(j+A,C<<8|V),A+=4;H++}q<c.length?(B=v,setTimeout(w,Tb._dly)):e(y)}()},toBlob(i,e){this.toArrayBuffer(i,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var Wn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},C6={[Wn.CHROME]:16384,[Wn.FIREFOX]:11180,[Wn.DESKTOP_SAFARI]:16384,[Wn.IE]:8192,[Wn.IOS]:4096,[Wn.ETC]:8192};const Kg=typeof window<"u",wb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,sf=Kg&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),I6=(Kg||wb)&&(sf&&sf.getOriginalSymbol(window,"File")||typeof File<"u"&&File),bb=(Kg||wb)&&(sf&&sf.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Yg(i,e,t=Date.now()){return new Promise(s=>{const a=i.split(","),l=a[0].match(/:(.*?);/)[1],c=globalThis.atob(a[1]);let f=c.length;const m=new Uint8Array(f);for(;f--;)m[f]=c.charCodeAt(f);const p=new Blob([m],{type:l});p.name=e,p.lastModified=t,s(p)})}function Ab(i){return new Promise((e,t)=>{const s=new bb;s.onload=()=>e(s.result),s.onerror=a=>t(a),s.readAsDataURL(i)})}function Sb(i){return new Promise((e,t)=>{const s=new Image;s.onload=()=>e(s),s.onerror=a=>t(a),s.src=i})}function _a(){if(_a.cachedResult!==void 0)return _a.cachedResult;let i=Wn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?i=Wn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?i=Wn.IOS:/Safari/i.test(e)?i=Wn.DESKTOP_SAFARI:/Firefox/i.test(e)?i=Wn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(i=Wn.IE),_a.cachedResult=i,_a.cachedResult}function Rb(i,e){const t=_a(),s=C6[t];let a=i,l=e,c=a*l;const f=a>l?l/a:a/l;for(;c>s*s;){const m=(s+a)/2,p=(s+l)/2;m<p?(l=p,a=p*f):(l=m*f,a=m),c=a*l}return{width:a,height:l}}function Pf(i,e){let t,s;try{if(t=new OffscreenCanvas(i,e),s=t.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),s=t.getContext("2d")}return t.width=i,t.height=e,[t,s]}function Cb(i,e){const{width:t,height:s}=Rb(i.width,i.height),[a,l]=Pf(t,s);return e&&/jpe?g/.test(e)&&(l.fillStyle="white",l.fillRect(0,0,a.width,a.height)),l.drawImage(i,0,0,a.width,a.height),a}function Dh(){return Dh.cachedResult!==void 0||(Dh.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Dh.cachedResult}function af(i,e={}){return new Promise(function(t,s){let a,l;var c=function(){try{return l=Cb(a,e.fileType||i.type),t([a,l])}catch(m){return s(m)}},f=function(m){try{var p=function(y){try{throw y}catch(_){return s(_)}};try{let y;return Ab(i).then(function(_){try{return y=_,Sb(y).then(function(v){try{return a=v,function(){try{return c()}catch(A){return s(A)}}()}catch(A){return p(A)}},p)}catch(v){return p(v)}},p)}catch(y){p(y)}}catch(y){return s(y)}};try{if(Dh()||[Wn.DESKTOP_SAFARI,Wn.MOBILE_SAFARI].includes(_a()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(i).then(function(m){try{return a=m,c()}catch{return f()}},f)}catch{f()}})}function of(i,e,t,s,a=1){return new Promise(function(l,c){let f;if(e==="image/png"){let _,v,A;return _=i.getContext("2d"),{data:v}=_.getImageData(0,0,i.width,i.height),A=Ni.encode([v.buffer],i.width,i.height,4096*a),f=new Blob([A],{type:e}),f.name=t,f.lastModified=s,m.call(this)}{let _=function(){return m.call(this)};var p=_;if(e==="image/bmp")return new Promise(v=>Tb.toBlob(i,v)).then((function(v){try{return f=v,f.name=t,f.lastModified=s,_.call(this)}catch(A){return c(A)}}).bind(this),c);{let v=function(){return _.call(this)};var y=v;if(typeof OffscreenCanvas=="function"&&i instanceof OffscreenCanvas)return i.convertToBlob({type:e,quality:a}).then((function(A){try{return f=A,f.name=t,f.lastModified=s,v.call(this)}catch(C){return c(C)}}).bind(this),c);{let A;return A=i.toDataURL(e,a),Yg(A,t,s).then((function(C){try{return f=C,v.call(this)}catch(V){return c(V)}}).bind(this),c)}}}function m(){return l(f)}})}function Wi(i){i.width=0,i.height=0}function No(){return new Promise(function(i,e){let t,s,a,l;return No.cachedResult!==void 0?i(No.cachedResult):Yg("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return t=c,af(t).then(function(f){try{return s=f[1],of(s,t.type,t.name,t.lastModified).then(function(m){try{return a=m,Wi(s),af(a).then(function(p){try{return l=p[0],No.cachedResult=l.width===1&&l.height===2,i(No.cachedResult)}catch(y){return e(y)}},e)}catch(p){return e(p)}},e)}catch(m){return e(m)}},e)}catch(f){return e(f)}},e)})}function Ib(i){return new Promise((e,t)=>{const s=new bb;s.onload=a=>{const l=new DataView(a.target.result);if(l.getUint16(0,!1)!=65496)return e(-2);const c=l.byteLength;let f=2;for(;f<c;){if(l.getUint16(f+2,!1)<=8)return e(-1);const m=l.getUint16(f,!1);if(f+=2,m==65505){if(l.getUint32(f+=2,!1)!=1165519206)return e(-1);const p=l.getUint16(f+=6,!1)==18761;f+=l.getUint32(f+4,p);const y=l.getUint16(f,p);f+=2;for(let _=0;_<y;_++)if(l.getUint16(f+12*_,p)==274)return e(l.getUint16(f+12*_+8,p))}else{if((65280&m)!=65280)break;f+=l.getUint16(f,!1)}}return e(-1)},s.onerror=a=>t(a),s.readAsArrayBuffer(i)})}function xb(i,e){const{width:t}=i,{height:s}=i,{maxWidthOrHeight:a}=e;let l,c=i;return isFinite(a)&&(t>a||s>a)&&([c,l]=Pf(t,s),t>s?(c.width=a,c.height=s/t*a):(c.width=t/s*a,c.height=a),l.drawImage(i,0,0,c.width,c.height),Wi(i)),c}function Nb(i,e){const{width:t}=i,{height:s}=i,[a,l]=Pf(t,s);switch(e>4&&e<9?(a.width=s,a.height=t):(a.width=t,a.height=s),e){case 2:l.transform(-1,0,0,1,t,0);break;case 3:l.transform(-1,0,0,-1,t,s);break;case 4:l.transform(1,0,0,-1,0,s);break;case 5:l.transform(0,1,1,0,0,0);break;case 6:l.transform(0,1,-1,0,s,0);break;case 7:l.transform(0,-1,-1,0,s,t);break;case 8:l.transform(0,-1,1,0,0,t)}return l.drawImage(i,0,0,t,s),Wi(i),a}function oE(i,e,t=0){return new Promise(function(s,a){let l,c,f,m,p,y,_,v,A,C,V,j,B,H,F,q,$,z,M,w;function b(D=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;l+=D,e.onProgress(Math.min(l,100))}function I(D){if(e.signal&&e.signal.aborted)throw e.signal.reason;l=Math.min(Math.max(D,l),100),e.onProgress(l)}return l=t,c=e.maxIteration||10,f=1024*e.maxSizeMB*1024,b(),af(i,e).then((function(D){try{return[,m]=D,b(),p=xb(m,e),b(),new Promise(function(k,x){var Y;if(!(Y=e.exifOrientation))return Ib(i).then((function(N){try{return Y=N,ne.call(this)}catch(O){return x(O)}}).bind(this),x);function ne(){return k(Y)}return ne.call(this)}).then((function(k){try{return y=k,b(),No().then((function(x){try{return _=x?p:Nb(p,y),b(),v=e.initialQuality||1,A=e.fileType||i.type,of(_,A,i.name,i.lastModified,v).then((function(Y){try{{let ie=function(){if(c--&&(F>f||F>B)){let U,Q;return U=w?.95*M.width:M.width,Q=w?.95*M.height:M.height,[$,z]=Pf(U,Q),z.drawImage(M,0,0,U,Q),v*=A==="image/png"?.85:.95,of($,A,i.name,i.lastModified,v).then(function(J){try{return q=J,Wi(M),M=$,F=q.size,I(Math.min(99,Math.floor((H-F)/(H-f)*100))),ie}catch(te){return a(te)}},a)}return[1]},Z=function(){return Wi(M),Wi($),Wi(p),Wi(_),Wi(m),I(100),s(q)};var N=ie,O=Z;if(C=Y,b(),V=C.size>f,j=C.size>i.size,!V&&!j)return I(100),s(C);var ne;return B=i.size,H=C.size,F=H,M=_,w=!e.alwaysKeepResolution&&V,(ne=(function(U){for(;U;){if(U.then)return void U.then(ne,a);try{if(U.pop){if(U.length)return U.pop()?Z.call(this):U;U=ie}else U=U.call(this)}catch(Q){return a(Q)}}}).bind(this))(ie)}}catch(ie){return a(ie)}}).bind(this),a)}catch(Y){return a(Y)}}).bind(this),a)}catch(x){return a(x)}}).bind(this),a)}catch(k){return a(k)}}).bind(this),a)})}const x6=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let tp;function N6(i,e){return new Promise((t,s)=>{tp||(tp=function(c){const f=[];return f.push(c),URL.createObjectURL(new Blob(f))}(x6));const a=new Worker(tp);a.addEventListener("message",function(c){if(e.signal&&e.signal.aborted)a.terminate();else if(c.data.progress===void 0){if(c.data.error)return s(new Error(c.data.error)),void a.terminate();t(c.data.file),a.terminate()}else e.onProgress(c.data.progress)}),a.addEventListener("error",s),e.signal&&e.signal.addEventListener("abort",()=>{s(e.signal.reason),a.terminate()}),a.postMessage({file:i,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Pn(i,e){return new Promise(function(t,s){let a,l,c,f,m,p;if(a={...e},c=0,{onProgress:f}=a,a.maxSizeMB=a.maxSizeMB||Number.POSITIVE_INFINITY,m=typeof a.useWebWorker!="boolean"||a.useWebWorker,delete a.useWebWorker,a.onProgress=A=>{c=A,typeof f=="function"&&f(c)},!(i instanceof Blob||i instanceof I6))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(i.type))return s(new Error("The file given is not an image"));if(p=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!m||typeof Worker!="function"||p)return oE(i,a).then((function(A){try{return l=A,v.call(this)}catch(C){return s(C)}}).bind(this),s);var y=(function(){try{return v.call(this)}catch(A){return s(A)}}).bind(this),_=function(A){try{return oE(i,a).then(function(C){try{return l=C,y()}catch(V){return s(V)}},s)}catch(C){return s(C)}};try{return a.libURL=a.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",N6(i,a).then(function(A){try{return l=A,y()}catch{return _()}},_)}catch{_()}function v(){try{l.name=i.name,l.lastModified=i.lastModified}catch{}try{a.preserveExif&&i.type==="image/jpeg"&&(!a.fileType||a.fileType&&a.fileType===i.type)&&(l=Eb(i,l))}catch{}return t(l)}})}Pn.getDataUrlFromFile=Ab,Pn.getFilefromDataUrl=Yg,Pn.loadImage=Sb,Pn.drawImageInCanvas=Cb,Pn.drawFileInCanvas=af,Pn.canvasToFile=of,Pn.getExifOrientation=Ib,Pn.handleMaxWidthOrHeight=xb,Pn.followExifOrientation=Nb,Pn.cleanupCanvasMemory=Wi,Pn.isAutoOrientationInBrowser=No,Pn.approximateBelowMaximumCanvasSizeOfBrowser=Rb,Pn.copyExifWithoutOrientation=Eb,Pn.getBrowserName=_a,Pn.version="2.0.2";const lE=({children:i})=>{const{currentUser:e,loading:t}=Mf();return t?E.jsx("div",{children:"Loading..."}):e?i:E.jsx(nS,{to:"/signin"})};function D6(){const[i,e]=W.useState([]),[t,s]=W.useState([]),[a,l]=W.useState(!0),[c,f]=W.useState(!0),{currentUser:m,userProfile:p,getUserProfile:y}=Mf();W.useEffect(()=>{c6()},[]),W.useEffect(()=>{const H=ya(Vr(bt,"listings"),F=>{const q=F.docs.map(z=>{const M=z.data(),{id:w,...b}=M;return{id:z.id,type:"item",...b}}),$=ya(Vr(bt,"services"),z=>{const M=z.docs.map(b=>{const I=b.data(),{id:D,...k}=I;return{id:b.id,type:"service",...k}}),w=[...q,...M];e(w),f(!1)},z=>{console.error("Error fetching services:",z),e(q),f(!1)});return()=>{$()}},F=>{console.error("Error fetching listings:",F),f(!1)});return()=>{H()}},[]);const _=async(H,F={})=>{const q={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,quality:.8,...F};try{console.log("Original file size:",(H.size/1024/1024).toFixed(2),"MB");const $=await Pn(H,q);return console.log("Compressed file size:",($.size/1024/1024).toFixed(2),"MB"),$}catch($){return console.error("Image compression failed:",$),H}},v=async(H,F)=>{const q=F.map(async($,z)=>{try{const M=await _($),w=`${H}_${z}_${Date.now()}.jpg`,b=gb(yb,`listings/${H}/${w}`),I=await t6(b,M);return{url:await n6(I.ref),fileName:w,originalName:$.name}}catch(M){throw console.error("Error uploading photo:",M),M}});return Promise.all(q)},A=async(H,F=[])=>{try{const q=H.type==="service"?"services":"listings",$={...H,userId:m.uid,userEmail:(p==null?void 0:p.email)||m.email,userFullName:(p==null?void 0:p.fullName)||m.displayName||"User",createdAt:new Date,requestors:[],matchedWith:null,status:"available",photos:[],views:0,favorites:[]},z=await RN(Vr(bt,q),$),M=z.id;if(await vb("listings"),H.type==="item"&&F&&F.length>0){console.log("Compressing and uploading",F.length,"photos...");const w=await v(M,F);await Or(z,{photos:w,updatedAt:new Date}),console.log("Photos uploaded and compressed successfully")}return console.log("Listing created with ID:",M),M}catch(q){throw console.error("Error creating listing:",q),q}},C=async H=>{if(!m){alert("Please sign in to contact the owner");return}if(!H){console.error("Invalid listing object:",H),alert("Invalid listing. Please try again.");return}try{console.log("Listing object:",H),console.log("Current user:",m.uid);const F=Array.isArray(H.requestors)?H.requestors:[];if(console.log("Requestors array:",F),F.some(M=>M.userId===m.uid)){alert("You have already requested this item");return}const $=In(bt,"listings",H.id),z={userId:m.uid,userEmail:(p==null?void 0:p.email)||m.email,userFullName:(p==null?void 0:p.fullName)||m.displayName||"User",requestDate:new Date().toISOString()};console.log("New requestor:",z),console.log("Updated requestors array:",[...F,z]),await Or($,{requestors:[...F,z]}),alert("Request sent successfully!")}catch(F){console.error("Error sending request:",F),console.error("Error details:",{listing:H,currentUser:m==null?void 0:m.uid,userProfile:p}),alert("Failed to send request. Please try again.")}},V=H=>{console.log("Favoriting listing:",H)},j=async(H,F)=>{try{const q=In(bt,"listings",H);await Or(q,{matchedWith:F,status:"matched"}),alert("Successfully matched with requestor!")}catch(q){console.error("Error matching with requestor:",q),alert("Failed to match with requestor. Please try again.")}},B=async H=>{try{const F=In(bt,"listings",H);await Or(F,{status:"claimed"}),alert("Listing marked as claimed!")}catch(F){console.error("Error claiming listing:",F),alert("Failed to mark as claimed. Please try again.")}};return E.jsx(IS,{children:E.jsxs(rS,{children:[E.jsx(vs,{path:"/",element:E.jsx(f6,{})}),E.jsx(vs,{path:"/signin",element:E.jsx(d6,{})}),E.jsx(vs,{path:"/signup",element:E.jsx(m6,{})}),E.jsx(vs,{path:"/listingspage",element:E.jsx(_6,{listings:i,onContact:C,onFavorite:V,onMatch:j,onClaim:B,currentUserId:m==null?void 0:m.uid,loading:c})}),E.jsx(vs,{path:"/createlistings",element:E.jsx(lE,{children:E.jsx(E6,{onCreate:A})})}),E.jsx(vs,{path:"/account",element:E.jsx(lE,{children:E.jsx(T6,{})})}),E.jsx(vs,{path:"/about",element:E.jsx(w6,{})})]})})}function O6(){return E.jsx(h6,{children:E.jsx(D6,{})})}const k6=W.createContext();function M6({children:i}){const[e,t]=W.useState(null),[s,a]=W.useState(!0);W.useEffect(()=>qw(va,f=>{t(f),a(!1)}),[]);const l=()=>ef(va);return E.jsx(k6.Provider,{value:{user:e,loading:s,logout:l},children:i})}f2.createRoot(document.getElementById("root")).render(E.jsx(r2.StrictMode,{children:E.jsx(M6,{children:E.jsx(O6,{})})}));
